!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("redux-saga/effects"),require("lodash"),require("react-intl").default,require("classnames"),require("class-autobind"),require("@ux/button").default,require("react-redux"),require("@ux/spinner").default,require("@ux/modal").default,require("uuid"),require("axios"),require("mirror-creator"),require("redux-saga"),require("@ux/tooltip").default,require("@ux/dropdown").default,require("redux"),require("md5"),require("ux"),require("@ux/growl").default,require("react-dom"),require("react-img-carousel"),require("react-dropzone"),require("@ux/search").default,require("@ux/progress-bar").default,require("canvas-confetti"),require("form-data")):"function"==typeof define&&define.amd?define(["react","prop-types","redux-saga/effects","lodash","react-intl","classnames","class-autobind","@ux/button","react-redux","@ux/spinner","@ux/modal","uuid","axios","mirror-creator","redux-saga","@ux/tooltip","@ux/dropdown","redux","md5","ux","@ux/growl","react-dom","react-img-carousel","react-dropzone","@ux/search","@ux/progress-bar","canvas-confetti","form-data"],t):"object"==typeof exports?exports.ImageManager=t(require("react"),require("prop-types"),require("redux-saga/effects"),require("lodash"),require("react-intl").default,require("classnames"),require("class-autobind"),require("@ux/button").default,require("react-redux"),require("@ux/spinner").default,require("@ux/modal").default,require("uuid"),require("axios"),require("mirror-creator"),require("redux-saga"),require("@ux/tooltip").default,require("@ux/dropdown").default,require("redux"),require("md5"),require("ux"),require("@ux/growl").default,require("react-dom"),require("react-img-carousel"),require("react-dropzone"),require("@ux/search").default,require("@ux/progress-bar").default,require("canvas-confetti"),require("form-data")):(e.bb=e.bb||{},e.bb.ImageManager=t(e.React,e.PropTypes,e.bb.reduxSaga.effects,e.bb.lodash,e.ux.intl,e.bb.classnames,e.bb.classAutobind,e.ux.Button,e.bb.reactRedux,e.ux.Spinner,e.ux.Modal,e.bb.uuid,e.bb.axios,e.bb.mirrorCreator,e.bb.reduxSaga,e.ux.Tooltip,e.ux.Dropdown,e.bb.redux,e.bb.md5,e.ux,e.ux.Growl,e.ReactDOM,e.bb.reactImgCarousel,e.bb.reactDropzone,e.ux.Search,e.ux.ProgressBar,e.bb.canvasConfetti,e.bb.formData))}(window,(function(e,t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O,E,_,I,S,w,T,k){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://img1.wsimg.com/blobby/go/static/brandbook/",n(n.s=146)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports=n(123)},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(57);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(47),a=n(13);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=i},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t,n){var r=n(116);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){var r=n(120),a=n(121),o=n(64),i=n(122);e.exports=function(e){return r(e)||a(e)||o(e)||i()}},function(e,t,n){var r=n(108),a=n(109),o=n(64),i=n(110);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()}},function(e,t,n){"use strict";(function(t){var r=n(23),a=r(n(15)),o=r(n(18)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(0)),s=n(117),c=r(n(1));const l=["width","height","className","title","desc","role"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}void 0===t||!t.versions||t.versions.node;e.exports=function(e,t){const n=i.default.forwardRef((function(t,n){let{width:r="1.5em",height:c="1.5em",className:u,title:d,desc:p,role:f="img"}=t,m=(0,o.default)(t,l);const[h,g]=(0,i.useState)(null),v=s.svgosm.get(e,(function(){const t=s.svgosm.extract("uxp-icon-"+e);if(t)return Object.assign(t,{title:d,desc:p})}));if((0,i.useEffect)((function(){v||h||g(!0)}),[]),!v)return null;const b={},y={className:["uxicon-svg-container",u].join(" ").trim(),height:c||v.height,width:r||v.width,role:f,ref:n};if(Object.keys(m).forEach((function(e){e.startsWith("aria-")||e.startsWith("data-")?y[e]=m[e]:b[e]=m[e]})),!y["aria-labelledby"]&&(d||p)){const e=v.link.slice(1),t=[];d&&t.push(e+"-title"),p&&t.push(e+"-desc"),y["aria-labelledby"]=t.join(" ")}return i.default.createElement("svg",y,i.default.createElement("use",(0,a.default)({fill:"currentColor"},b,{xlinkHref:v.link})))}));return n.displayName=e+"Icon",n.propTypes={width:c.default.oneOfType([c.default.number,c.default.string]),height:c.default.oneOfType([c.default.number,c.default.string]),className:c.default.string,desc:c.default.string,title:c.default.string,role:c.default.string},n}}).call(this,n(115))},function(e,t){function n(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,c,"next",e)}function c(e){n(i,a,o,s,c,"throw",e)}s(void 0)}))}}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=l},function(e,t,n){"use strict";const r=n(21);e.exports=r("cloud-upload","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("checkmark","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("x","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("image","false")},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(0)),o=r(n(1)),i=r(n(8)),s=r(n(118)),c=r(n(66)),l=r(n(68));function u(e){const{children:t,className:n,divider:r,gap:o,id:u,invalid:d,label:p,helpMessage:f,errorMessage:m,required:h,orientation:g="horizontal",stretch:v,wrap:b}=e||{};if(!t)return null;const y=p&&u&&u+"-label",O=f&&u&&u+"-help",E=m&&u&&u+"-error";return a.default.createElement("div",{className:(0,i.default)("ux-sibling-set",n,"ux-sibling-set-"+g,{["ux-sibling-set-gap-"+o]:o,"ux-sibling-set--stretch":v,"ux-sibling-set--wrap":b}),role:"group","aria-labelledby":y,"aria-describedby":[O,E].filter(Boolean).join(" ")},y&&a.default.createElement(s.default,{className:"ux-sibling-set-label",id:y,htmlFor:u,required:h},p),r&&a.default.createElement("hr",null),a.default.createElement("div",{id:u,"aria-invalid":d,className:(0,l.default)({className:"ux-sibling-set-children",emphasis:d?"critical":null}),style:{"--ux-siblingset-amount":t.length}},t),f&&a.default.createElement(c.default.p,{text:f,as:"caption",id:O,emphasis:"passive"}),m&&a.default.createElement(c.default.p,{text:m,as:"caption",id:E,emphasis:"critical",role:"alert"}))}function d(e,t,n){const r=e.label&&!e.id,a=e.helpMessage&&!e.id,i=e.errorMessage&&!e.id;return r||a||i?new Error("When using a label, helpMessage or errorMessage, the 'id' prop is required"):o.default.checkPropTypes({[t]:o.default.node},e,t,n)}u.propTypes={children:o.default.node,className:o.default.string,divider:o.default.bool,gap:o.default.oneOf(["sm","md","lg"]),id:d,invalid:o.default.oneOfType([o.default.bool,o.default.oneOf(["grammar","spelling"])]),label:d,helpMessage:d,errorMessage:d,orientation:o.default.oneOf(["horizontal","vertical"]),required:s.default.propTypes.required,stretch:o.default.bool,wrap:o.default.bool},u.displayName="SiblingSet";var p=u;t.default=p},function(e,t,n){"use strict";const r=n(21);e.exports=r("page","false")},function(e,t){e.exports=u},function(e,t,n){"use strict";const r=n(21);e.exports=r("video-camera","false")},function(e,t){e.exports=d},function(e,t){e.exports=p},function(e,t){e.exports=f},function(e,t,n){"use strict";const r=n(21);e.exports=r("download","false")},function(e,t){e.exports=m},function(e,t,n){"use strict";const r=n(21);e.exports=r("chevron-right","false")},function(e,t){e.exports=h},function(e,t,n){"use strict";const r=n(21);e.exports=r("chevron-left","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("website","false")},function(e,t,n){e.exports=n.p+"eeb412be1917ccc5e1af37dc74b5492a.png"},function(e,t){e.exports=g},function(e,t){e.exports=v},function(e,t){e.exports=b},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=y},function(e,t,n){"use strict";const r=n(21);e.exports=r("trash","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("image-gallery","false")},function(e,t){e.exports=O},function(e,t,n){"use strict";const r=n(21);e.exports=r("cart","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("information","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("plus","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("window-new","false")},function(e,t,n){e.exports=n.p+"e60aa250ea0dd1b330f199755ec6aa82.png"},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){e.exports=E},function(e,t,n){"use strict";const r=n(111),a=n(112),o=n(113),i=n(114);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function l(e,t){return t.decode?a(e):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const a="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!a&&l(n,e).includes(e.arrayFormatSeparator);n=o?l(n,e):n;const i=a||o?n.split(e.arrayFormatSeparator).map(t=>l(t,e)):null===n?n:l(n,e);r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const a of e.split("&")){if(""===a)continue;let[e,i]=o(t.decode?a.replace(/\+/g," "):a,"=");i=void 0===i?null:["comma","separator"].includes(t.arrayFormat)?i:l(i,t),n(l(e,t),i,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=d,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[",a,"]"].join("")]:[...n,[c(t,e),"[",c(a,e),"]=",c(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[c(t,e),"[]"].join("")]:[...n,[c(t,e),"[]=",c(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[c(t,e),"=",c(r,e)].join("")]:[[n,c(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,c(t,e)]:[...n,[c(t,e),"=",c(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const o=Object.keys(a);return!1!==t.sort&&o.sort(t.sort),o.map(n=>{const a=e[n];return void 0===a?"":null===a?c(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):c(n,t)+"="+c(a,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:l(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=u(e.url).split("?")[0]||"",a=t.extract(e.url),o=t.parse(a,{sort:!1}),i=Object.assign(o,e.query);let s=t.stringify(i,n);s&&(s="?"+s);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l="#"+c(e.fragmentIdentifier,n)),`${r}${s}${l}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:a,query:o,fragmentIdentifier:s}=t.parseUrl(e,r);return t.stringifyUrl({url:a,query:i(o,n),fragmentIdentifier:s},r)},t.exclude=(e,n,r)=>{const a=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,a,r)}},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var r={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0};e.exports={BROWSER_TYPES:{CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari",EDGE_CHROMIUM:"Edge Chromium"},DEVICE_TYPES:r,OS_TYPES:{IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone",WINDOWS:"Windows",MAC_OS:"Mac OS"},defaultData:{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1}}},function(e,t,n){"use strict";var r,a=n(2),o=n(0),i=o.BROWSER_TYPES,s=o.OS_TYPES,c=o.DEVICE_TYPES,l=n(4),u=l.checkType,d=l.broPayload,p=l.mobilePayload,f=l.wearPayload,m=l.consolePayload,h=l.stvPayload,g=l.getNavigatorInstance,v=l.isIOS13Check,b=new a,y=b.getBrowser(),O=b.getDevice(),E=b.getEngine(),_=b.getOS(),I=b.getUA(),S=i.CHROME,w=i.CHROMIUM,T=i.IE,k=i.INTERNET_EXPLORER,C=i.OPERA,x=i.FIREFOX,A=i.SAFARI,D=i.EDGE,P=i.YANDEX,j=i.MOBILE_SAFARI,M=c.MOBILE,L=c.TABLET,R=c.SMART_TV,N=c.BROWSER,U=c.WEARABLE,F=c.CONSOLE,V=s.ANDROID,B=s.WINDOWS_PHONE,G=s.IOS,z=s.WINDOWS,H=s.MAC_OS,K=function(){return _.name===s.WINDOWS&&"10"===_.version&&("string"==typeof I&&-1!==I.indexOf("Edg/"))},W=function(){return y.name===D},q=function(){return v("iPad")},Y=O.type===R,X=O.type===F,Q=O.type===U,$=y.name===j||q(),Z=y.name===w,J=function(){switch(O.type){case M:case L:return!0;default:return!1}}()||q(),ee=O.type===M,te=O.type===L||q(),ne=O.type===N,re=_.name===V,ae=_.name===B,oe=_.name===G||q(),ie=y.name===S,se=y.name===x,ce=y.name===A||y.name===j,le=y.name===C,ue=y.name===k||y.name===T,de=_.version?_.version:"none",pe=_.name?_.name:"none",fe=y.major,me=y.version,he=y.name,ge=O.vendor?O.vendor:"none",ve=O.model?O.model:"none",be=E.name,ye=E.version,Oe=I,Ee=W()||K(),_e=y.name===P,Ie=O.type,Se=(r=g())&&(/iPad|iPhone|iPod/.test(r.platform)||"MacIntel"===r.platform&&r.maxTouchPoints>1)&&!window.MSStream,we=q(),Te=v("iPhone"),ke=v("iPod"),Ce=function(){var e=g(),t=e&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),xe=K(),Ae=W(),De=_.name===z,Pe=_.name===H,je=u(O.type);e.exports={deviceDetect:function(){var e=je.isBrowser,t=je.isMobile,n=je.isTablet,r=je.isSmartTV,a=je.isConsole,o=je.isWearable;return e?d(e,y,E,_,I):r?h(r,E,_,I):a?m(a,E,_,I):t||n?p(je,O,_,I):o?f(o,E,_,I):void 0},isSmartTV:Y,isConsole:X,isWearable:Q,isMobileSafari:$,isChromium:Z,isMobile:J,isMobileOnly:ee,isTablet:te,isBrowser:ne,isAndroid:re,isWinPhone:ae,isIOS:oe,isChrome:ie,isFirefox:se,isSafari:ce,isOpera:le,isIE:ue,osVersion:de,osName:pe,fullBrowserVersion:fe,browserVersion:me,browserName:he,mobileVendor:ge,mobileModel:ve,engineName:be,engineVersion:ye,getUA:Oe,isEdge:Ee,isYandex:_e,deviceType:Ie,isIOS13:Se,isIPad13:we,isIPhone13:Te,isIPod13:ke,isElectron:Ce,isEdgeChromium:xe,isLegacyEdge:Ae,isWindows:De,isMacOs:Pe}},function(e,t,n){var r;
/*!
 * UAParser.js v0.7.18
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 or MIT
 */!function(a,o){"use strict";var i="model",s="name",c="type",l="vendor",u="version",d="mobile",p="tablet",f={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(e,t){for(var n,r,a,o,i,s,c=0;c<t.length&&!i;){var l=t[c],u=t[c+1];for(n=r=0;n<l.length&&!i;)if(i=l[n++].exec(e))for(a=0;a<u.length;a++)s=i[++r],"object"==typeof(o=u[a])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;c+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(f.has(t[n][r],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,m.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,l,[c,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[l,"Apple"],[c,p]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,i,[c,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[i,[l,"Amazon"],[c,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[i,m.str,h.device.amazon.model],[l,"Amazon"],[c,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,l,[c,d]],[/\((ip[honed|\s\w*]+);/i],[i,[l,"Apple"],[c,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,i,[c,d]],[/\(bb10;\s(\w+)/i],[i,[l,"BlackBerry"],[c,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[l,"Asus"],[c,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[i,"Xperia Tablet"],[c,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[i,[l,"Sony"],[c,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,i,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[l,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[l,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[l,m.str,h.device.sprint.vendor],[i,m.str,h.device.sprint.model],[c,d]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,i,[c,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[i,/_/g," "],[c,d]],[/(nexus\s9)/i],[i,[l,"HTC"],[c,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[i,[l,"Huawei"],[c,d]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,i,[c,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[l,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[l,"Microsoft"],[c,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[l,"Motorola"],[c,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[l,"Motorola"],[c,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,f.trim],[i,f.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[l,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[l,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],i,[c,p]],[/smart-tv.+(samsung)/i],[l,[c,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],i,[c,d]],[/sie-(\w*)/i],[i,[l,"Siemens"],[c,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],i,[c,d]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[l,"Acer"],[c,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[i,[l,"LG"],[c,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],i,[c,p]],[/(lg) netcast\.tv/i],[l,i,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[i,[l,"LG"],[c,d]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[l,"Lenovo"],[c,p]],[/linux;.+((jolla));/i],[l,i,[c,d]],[/((pebble))app\/[\d\.]+\s/i],[l,i,[c,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,i,[c,d]],[/crkey/i],[[i,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[i,[l,"Google"],[c,"wearable"]],[/android.+;\s(pixel c)\s/i],[i,[l,"Google"],[c,p]],[/android.+;\s(pixel xl|pixel)\s/i],[i,[l,"Google"],[c,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[l,"Xiaomi"],[c,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[i,/_/g," "],[l,"Xiaomi"],[c,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[i,[l,"Meizu"],[c,p]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[i,[l,"OnePlus"],[c,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[i,[l,"RCA"],[c,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[i,[l,"Dell"],[c,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[i,[l,"Verizon"],[c,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],i,[c,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[i,[l,"NuVision"],[c,p]],[/android.+;\s(k88)\sbuild/i],[i,[l,"ZTE"],[c,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[i,[l,"Swiss"],[c,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[i,[l,"Swiss"],[c,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[i,[l,"Zeki"],[c,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],i,[c,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[i,[l,"Insignia"],[c,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[i,[l,"NextBook"],[c,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],i,[c,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],i,[c,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[i,[l,"Envizen"],[c,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,i,[c,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[i,[l,"MachSpeed"],[c,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,i,[c,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[i,[l,"Rotor"],[c,p]],[/android.+(KS(.+))\s+build/i],[i,[l,"Amazon"],[c,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,i,[c,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,f.lowerize],l,i],[/(android[\w\.\s\-]{0,9});.+build/i],[i,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,m.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,m.str,h.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},v=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof v))return new v(e,t).getResult();var n=e||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),r=t?f.extend(g,t):g;return this.getBrowser=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,n,r.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return m.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return m.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return m.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:s,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:i,VENDOR:l,TYPE:c,CONSOLE:"console",MOBILE:d,SMARTTV:"smarttv",TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:u},v.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=v),t.UAParser=v):n(3)?void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r):a&&(a.UAParser=v);var b=a&&(a.jQuery||a.Zepto);if(void 0!==b){var y=new v;b.ua=y.getResult(),b.ua.get=function(){return y.getUA()},b.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)b.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=a.DEVICE_TYPES,i=a.defaultData,s=t.getNavigatorInstance=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},c=t.isIOS13Check=function(e){var t=s();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};e.exports={checkType:function(e){switch(e){case o.MOBILE:return{isMobile:!0};case o.TABLET:return{isTablet:!0};case o.SMART_TV:return{isSmartTV:!0};case o.CONSOLE:return{isConsole:!0};case o.WEARABLE:return{isWearable:!0};case o.BROWSER:return{isBrowser:!0};default:return i}},broPayload:function(e,t,n,r,a){return{isBrowser:e,browserMajorVersion:t.major,browserFullVersion:t.version,browserName:t.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:a}},mobilePayload:function(e,t,n,a){return r({},e,{vendor:t.vendor,model:t.model,os:n.name,osVersion:n.version,ua:a})},stvPayload:function(e,t,n,r){return{isSmartTV:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},consolePayload:function(e,t,n,r){return{isConsole:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},wearPayload:function(e,t,n,r){return{isWearable:e,engineName:t.name,engineVersion:t.version,osName:n.name,osVersion:n.version,userAgent:r}},getNavigatorInstance:s,isIOS13Check:c}}])},function(e,t,n){"use strict";const r=n(21);e.exports=r("edit","false")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAsset=function(e){return(0,r.get)(s.name,e)},t.setAssets=function(e){var t=e.containerKey,n=e.lastSyncedAt,a=e.upsertList,o=e.deleteList;return Promise.all([(0,r.setList)(s.name,a),(0,r.removeList)(s.name,o)]).then((function(){return(0,r.set)(c.name,{containerKey:t,lastSyncedAt:n}).then((function(){return Promise.resolve()}))}))},t.addAssets=function(e){return(0,r.setList)(s.name,e)},t.removeAssets=function(e){return(0,r.removeList)(s.name,e)},t.getManifest=function(e){return(0,r.get)(l.name,e)},t.setManifest=function(e){return(0,r.set)(l.name,e)},t.getAssets=function(e){return Promise.all([(0,r.get)(c.name,e),(0,r.getList)({objectStoreName:s.name,indexName:d.name,query:e})]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}());return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r[0],{images:r[1]})}))},t.setAsset=function(e){return(0,r.set)(s.name,e)},t.getSearchIndex=function(e){return(0,r.get)(u.name,e)},t.setSearchIndex=function(e){return(0,r.set)(u.name,e)},n(124);var r=n(125),a=n(70);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=a.STORES.ASSET,c=a.STORES.CONTAINER_LAST_SYNC,l=a.STORES.CONTAINER_MANIFEST,u=a.STORES.SEARCH_INDEX,d=a.INDEXES.CONTAINER_KEY},function(e,t,n){"use strict";(function(t){function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function o(){o=function(){},a.Symbol||(a.Symbol=c)}function i(e,t){this.b=e,r(this,"description",{configurable:!0,writable:!0,value:t})}i.prototype.toString=function(){return this.b};var s,c=(s=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new i("jscomp_symbol_"+(t||"")+"_"+s++,t)});function l(){o();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return l(),(e={next:e})[a.Symbol.iterator]=function(){return this},e}(n(this))}}),l=function(){}}function u(e,t){if(t){var n=a;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];i in n||(n[i]={}),n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function d(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}u("Array.prototype.keys",(function(e){return e||function(){return function(e,t){l(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),u("Promise",(function(e){function t(e){this.h=0,this.m=void 0,this.b=[];var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.b=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.b){this.b=[];var t=this;this.j((function(){t.m()}))}this.b.push(e)};var o=a.setTimeout;n.prototype.j=function(e){o(e,0)},n.prototype.m=function(){for(;this.b&&this.b.length;){var e=this.b;this.b=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.l(e)}}}this.b=null},n.prototype.l=function(e){this.j((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.L),reject:e(this.l)}},t.prototype.L=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.M(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.K(e):this.w(e)}},t.prototype.K=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.N(t,e):this.w(e)},t.prototype.l=function(e){this.B(2,e)},t.prototype.w=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.m=t,this.I()},t.prototype.I=function(){if(null!=this.b){for(var e=0;e<this.b.length;++e)i.h(this.b[e]);this.b=null}};var i=new n;return t.prototype.M=function(e){var t=this.j();e.F(t.resolve,t.reject)},t.prototype.N=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(e){o(e)}}:t}var a,o,i=new t((function(e,t){a=e,o=t}));return this.F(r(e,a),r(n,o)),i},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.F=function(e,t){function n(){switch(r.h){case 1:e(r.m);break;case 2:t(r.m);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.b?i.h(n):this.b.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=d(e),o=a.next();!o.done;o=a.next())r(o.value).F(t,n)}))},t.all=function(e){var n=d(e),a=n.next();return a.done?r([]):new t((function(e,t){function o(t){return function(n){i[t]=n,0==--s&&e(i)}}var i=[],s=0;do{i.push(void 0),s++,r(a.value).F(o(i.length-1),t),a=n.next()}while(!a.done)}))},t})),function(t,n,r){var a;(a=r.define)&&a.amd?a([],(function(){return n})):(a=r.modules)?a["FlexSearch".toLowerCase()]=n:e.exports=n}(0,function e(t){function n(e,t){var n=t?t.id:e&&e.id;this.id=n||0===n?n:A++,this.init(e,t),i(this,"index",(function(){return this.a?Object.keys(this.a.index[this.a.keys[0]].f):Object.keys(this.f)})),i(this,"length",(function(){return this.index.length}))}function r(e,t,n,r){return this.D!==this.i&&(this.A=this.A.concat(n),this.D++,r&&this.A.length>=r&&(this.D=this.i),this.D===this.i&&(this.cache&&this.u.set(t,this.A),this.H&&this.H(this.A))),this}function a(e,t){for(var n=e.length,r=y(t),a=[],o=0,i=0;o<n;o++){var s=e[o];(r&&t(s)||!r&&!t[s])&&(a[i++]=s)}return a}function o(e,t,n,r,a,o,i,s,c,l){if(n=g(n,i?0:a,s,o,t,c,l),s){s=n.page;var u=n.next;n=n.result}if(i)t=this.where(i,null,a,n);else{for(t=n,n=this.v,a=t.length,o=Array(a),i=0;i<a;i++)o[i]=n[t[i]];t=o}return n=t,r&&(y(r)||(1<(T=r.split(":")).length?r=m:(T=T[0],r=f)),n.sort(r)),n=h(s,u,n),this.cache&&this.u.set(e,n),n}function i(e,t,n){Object.defineProperty(e,t,{get:n})}function s(e){return new RegExp(e,"g")}function c(e,t){for(var n=0;n<t.length;n+=2)e=e.replace(t[n],t[n+1]);return e}function l(e,t,n,r,a,o,i,s){return t[n]?t[n]:(a=a?(s-(i||s/1.5))*o+(i||s/1.5)*a:o,t[n]=a,a>=i&&((e=(e=e[s-(a+.5>>0)])[n]||(e[n]=[]))[e.length]=r),a)}function u(e,t){if(e)for(var n=Object.keys(e),r=0,a=n.length;r<a;r++){var o=n[r],i=e[o];if(i)for(var s=0,c=i.length;s<c;s++){if(i[s]===t){1===c?delete e[o]:i.splice(s,1);break}O(i[s])&&u(i[s],t)}}}function d(e){for(var t="",n="",r="",a=0;a<e.length;a++){var o=e[a];o!==n&&(a&&"h"===o?(r="a"===r||"e"===r||"i"===r||"o"===r||"u"===r||"y"===r,(("a"===n||"e"===n||"i"===n||"o"===n||"u"===n||"y"===n)&&r||" "===n)&&(t+=o)):t+=o),r=a===e.length-1?"":e[a+1],n=o}return t}function p(e,t){return 0>(e=e.length-t.length)?1:e?-1:0}function f(e,t){return(e=e[T])<(t=t[T])?-1:e>t?1:0}function m(e,t){for(var n=T.length,r=0;r<n;r++)e=e[T[r]],t=t[T[r]];return e<t?-1:e>t?1:0}function h(e,t,n){return e?{page:e,next:t?""+t:null,result:n}:n}function g(e,t,n,r,a,o,i){var s=[];if(!0===n){n="0";var c=""}else c=n&&n.split(":");var l=e.length;if(1<l){var u,d,p,f,m=I(),g=[],b=0,y=!0,O=0;if(c)if(2===c.length){var _=c;c=!1}else c=p=parseInt(c[0],10);if(i){for(u=I();b<l;b++)if("not"===a[b]){var S=e[b],w=S.length;for(d=0;d<w;d++)u["@"+S[d]]=1}else var T=b+1;if(E(T))return h(n,M,s);b=0}else var k=v(a)&&a;for(;b<l;b++){var C=b===(T||l)-1;if(!k||!b)if((d=k||a&&a[b])&&"and"!==d){if("or"!==d)continue;f=!1}else f=o=!0;if(w=(S=e[b]).length){if(y){if(!D){D=S;continue}var x=D.length;for(d=0;d<x;d++){var A="@"+(y=D[d]);i&&u[A]||(m[A]=1,o||(s[O++]=y))}var D=null;y=!1}for(A=!1,d=0;d<w;d++){var P="@"+(x=S[d]),j=o?m[P]||0:b;if(!(!j&&!r||i&&u[P]||!o&&m[P]))if(j===b){if(C){if((!p||--p<O)&&(s[O++]=x,t&&O===t))return h(n,O+(c||0),s)}else m[P]=b+1;A=!0}else r&&((P=g[j]||(g[j]=[]))[P.length]=x)}if(f&&!A&&!r)break}else if(f&&!r)return h(n,M,S)}if(D)if(b=D.length,i)for(d=c?parseInt(c,10):0;d<b;d++)u["@"+(e=D[d])]||(s[O++]=e);else s=D;if(r)for(O=s.length,_?(b=parseInt(_[0],10)+1,d=parseInt(_[1],10)+1):(b=g.length,d=0);b--;)if(x=g[b]){for(w=x.length;d<w;d++)if(r=x[d],(!i||!u["@"+r])&&(s[O++]=r,t&&O===t))return h(n,b+":"+d,s);d=0}}else!l||a&&"not"===a[0]||(s=e[0],c&&(c=parseInt(c[0],10)));if(t){i=s.length,c&&c>i&&(c=0);var M=(c=c||0)+t;M<i?s=s.slice(c,M):(M=0,c&&(s=s.slice(c)))}return h(n,M,s)}function v(e){return"string"==typeof e}function b(e){return e.constructor===Array}function y(e){return"function"==typeof e}function O(e){return"object"==typeof e}function E(e){return void 0===e}function _(e){for(var t=Array(e),n=0;n<e;n++)t[n]=I();return t}function I(){return Object.create(null)}function S(){var e,t;self.onmessage=function(n){if(n=n.data)if(n.search){var r=t.search(n.content,n.threshold?{limit:n.limit,threshold:n.threshold,where:n.where}:n.limit);self.postMessage({id:e,content:n.content,limit:n.limit,result:r})}else n.add?t.add(n.id,n.content):n.update?t.update(n.id,n.content):n.remove?t.remove(n.id):n.clear?t.clear():n.info?((n=t.info()).worker=e,console.log(n)):n.register&&(e=n.id,n.options.cache=!1,n.options.async=!1,n.options.worker=!1,t=new(t=new Function(n.register.substring(n.register.indexOf("{")+1,n.register.lastIndexOf("}")))())(n.options))}}function w(n,r,a,o){n=t("flexsearch","id"+n,S,(function(e){(e=e.data)&&e.result&&o(e.id,e.content,e.result,e.limit,e.where,e.cursor,e.suggest)}),r);var i=e.toString();return a.id=r,n.postMessage({register:i,options:a,id:r}),n}var T,k={encode:"icase",g:"forward",split:/\W+/,cache:!1,async:!1,i:!1,G:!1,a:!1,c:9,threshold:0,depth:0},C={memory:{encode:"extra",g:"strict",threshold:0,c:1},speed:{encode:"icase",g:"strict",threshold:1,c:3,depth:2},match:{encode:"extra",g:"full",threshold:1,c:3},score:{encode:"extra",g:"strict",threshold:1,c:9,depth:4},balance:{encode:"balance",g:"strict",threshold:0,c:3,depth:3},fast:{encode:"icase",g:"strict",threshold:8,c:9,depth:1}},x=[],A=0,D={},P={};n.create=function(e,t){return new n(e,t)},n.registerMatcher=function(e){for(var t in e)e.hasOwnProperty(t)&&x.push(s(t),e[t]);return this},n.registerEncoder=function(e,t){return U[e]=t.bind(U),this},n.registerLanguage=function(e,t){return D[e]=t.filter,P[e]=t.stemmer,this},n.encode=function(e,t){return U[e](t)},n.prototype.init=function(e,t){if(this.h=[],t){var a=t.preset;e=t}else e||(e=k),a=e.preset;if(t={},v(e)?((t=C[e])||console.warn("Preset not found: "+e),e={}):a&&((t=C[a])||console.warn("Preset not found: "+a)),a=e.worker)if("undefined"==typeof Worker)e.worker=!1,this.b=null;else{var o=parseInt(a,10)||4;this.w=-1,this.D=0,this.A=[],this.H=null,this.b=Array(o);for(var i=0;i<o;i++)this.b[i]=w(this.id,i,e,r.bind(this))}if(this.g=e.tokenize||t.g||this.g||k.g,this.split=E(a=e.split)?this.split||k.split:v(a)?s(a):a,this.G=e.rtl||this.G||k.G,this.async="undefined"==typeof Promise||E(a=e.async)?this.async||k.async:a,this.i=E(a=e.worker)?this.i||k.i:a,this.threshold=E(a=e.threshold)?t.threshold||this.threshold||k.threshold:a,this.c=E(a=e.resolution)?a=t.c||this.c||k.c:a,a<=this.threshold&&(this.c=this.threshold+1),this.depth="strict"!==this.g||E(a=e.depth)?t.depth||this.depth||k.depth:a,this.j=(a=E(a=e.encode)?t.encode||k.encode:a)&&U[a]&&U[a].bind(U)||(y(a)?a:this.j||!1),(a=e.matcher)&&this.addMatcher(a),a=(t=e.lang)||e.filter){if(v(a)&&(a=D[a]),b(a)){o=this.j,i=I();for(var c=0;c<a.length;c++){var l=o?o(a[c]):a[c];i[l]=1}a=i}this.filter=a}if(a=t||e.stemmer){for(var u in t=v(a)?P[a]:a,o=this.j,i=[],t)t.hasOwnProperty(u)&&(c=o?o(u):u,i.push(s(c+"($|\\W)"),o?o(t[u]):t[u]));this.stemmer=i}if(this.a=i=(a=e.doc)?function e(t){var n,r=I();for(n in t)if(t.hasOwnProperty(n)){var a=t[n];b(a)?r[n]=a.slice(0):O(a)?r[n]=e(a):r[n]=a}return r}(a):this.a||k.a,this.s=_(this.c-(this.threshold||0)),this.o=I(),this.f=I(),i){if(this.v=I(),e.doc=null,u=i.index={},t=i.keys=[],o=i.field,c=i.tag,l=i.store,b(i.id)||(i.id=i.id.split(":")),l){var d=I();if(v(l))d[l]=1;else if(b(l))for(var p=0;p<l.length;p++)d[l[p]]=1;else O(l)&&(d=l);i.store=d}if(c){if(this.B=I(),l=I(),o)if(v(o))l[o]=e;else if(b(o))for(d=0;d<o.length;d++)l[o[d]]=e;else O(o)&&(l=o);for(b(c)||(i.tag=c=[c]),o=0;o<c.length;o++)this.B[c[o]]=I();this.I=c,o=l}if(o){if(!b(o))if(O(o)){var f=o;i.field=o=Object.keys(o)}else i.field=o=[o];for(i=0;i<o.length;i++)b(c=o[i])||(f&&(e=f[c]),t[i]=c,o[i]=c.split(":")),u[c]=new n(e)}e.doc=a}return this.m=!0,this.u=!!(this.cache=a=E(a=e.cache)?this.cache||k.cache:a)&&new F(a),this},n.prototype.encode=function(e){return e&&(x.length&&(e=c(e,x)),this.h.length&&(e=c(e,this.h)),this.j&&(e=this.j(e)),this.stemmer&&(e=c(e,this.stemmer))),e},n.prototype.addMatcher=function(e){var t,n=this.h;for(t in e)e.hasOwnProperty(t)&&n.push(s(t),e[t]);return this},n.prototype.add=function(e,t,n,r,o){if(this.a&&O(e))return this.l("add",e,t);if(t&&v(t)&&(e||0===e)){var i="@"+e;if(this.f[i]&&!r)return this.update(e,t);if(this.i)return++this.w>=this.b.length&&(this.w=0),this.b[this.w].postMessage({add:!0,id:e,content:t}),this.f[i]=""+this.w,n&&n(),this;if(!o){if(this.async&&"function"!=typeof importScripts){var s=this;return i=new Promise((function(n){setTimeout((function(){s.add(e,t,null,r,!0),s=null,n()}))})),n?(i.then(n),this):i}if(n)return this.add(e,t,null,r,!0),n(),this}if(!(t=this.encode(t)).length)return this;o=y(n=this.g)?n(t):t.split(this.split),this.filter&&(o=a(o,this.filter));var c=I();c._ctx=I();for(var u=o.length,d=this.threshold,p=this.depth,f=this.c,m=this.s,h=this.G,g=0;g<u;g++){var b=o[g];if(b){var E=b.length,S=(h?g+1:u-g)/u,w="";switch(n){case"reverse":case"both":for(var T=E;--T;)l(m,c,w=b[T]+w,e,h?1:(E-T)/E,S,d,f-1);w="";case"forward":for(T=0;T<E;T++)l(m,c,w+=b[T],e,h?(T+1)/E:1,S,d,f-1);break;case"full":for(T=0;T<E;T++)for(var k=(h?T+1:E-T)/E,C=E;C>T;C--)l(m,c,w=b.substring(T,C),e,k,S,d,f-1);break;default:if(E=l(m,c,b,e,1,S,d,f-1),p&&1<u&&E>=d)for(E=c._ctx[b]||(c._ctx[b]=I()),b=this.o[b]||(this.o[b]=_(f-(d||0))),0>(S=g-p)&&(S=0),(w=g+p+1)>u&&(w=u);S<w;S++)S!==g&&l(b,E,o[S],e,0,f-(S<g?g-S:S-g),d,f-1)}}}this.f[i]=1,this.m=!1}return this},n.prototype.l=function(e,t,n){if(b(t)){var r=t.length;if(r--){for(var a=0;a<r;a++)this.l(e,t[a]);return this.l(e,t[r],n)}}else{var o,i=this.a.index,s=this.a.keys,c=this.a.tag;a=this.a.store;var l=this.a.id;r=t;for(var u=0;u<l.length;u++)r=r[l[u]];if("remove"===e&&(delete this.v[r],l=s.length,l--)){for(t=0;t<l;t++)i[s[t]].remove(r);return i[s[l]].remove(r,n)}if(c){for(o=0;o<c.length;o++){var d=c[o],p=t;for(l=d.split(":"),u=0;u<l.length;u++)p=p[l[u]];p="@"+p}o=(o=this.B[d])[p]||(o[p]=[])}for(c=0,d=(l=this.a.field).length;c<d;c++){u=l[c],p=t;for(var f=0;f<u.length;f++)p=p[u[f]];u=i[s[c]],f="add"===e?u.add:u.update,c===d-1?f.call(u,r,p,n):f.call(u,r,p)}if(a){for(n=Object.keys(a),e=I(),i=0;i<n.length;i++)if(a[s=n[i]])for(s=s.split(":"),c=l=void 0,d=0;d<s.length;d++)l=(l||t)[p=s[d]],c=(c||e)[p]=l;t=e}o&&(o[o.length]=t),this.v[r]=t}return this},n.prototype.update=function(e,t,n){return this.a&&O(e)?this.l("update",e,t):(this.f["@"+e]&&v(t)&&(this.remove(e),this.add(e,t,n,!0)),this)},n.prototype.remove=function(e,t,n){if(this.a&&O(e))return this.l("remove",e,t);var r="@"+e;if(this.f[r]){if(this.i)return this.b[this.f[r]].postMessage({remove:!0,id:e}),delete this.f[r],t&&t(),this;if(!n){if(this.async&&"function"!=typeof importScripts){var a=this;return r=new Promise((function(t){setTimeout((function(){a.remove(e,null,!0),a=null,t()}))})),t?(r.then(t),this):r}if(t)return this.remove(e,null,!0),t(),this}for(t=0;t<this.c-(this.threshold||0);t++)u(this.s[t],e);this.depth&&u(this.o,e),delete this.f[r],this.m=!1}return this},n.prototype.search=function(e,t,n,r){if(O(t)){if(b(t))for(var i=0;i<t.length;i++)t[i].query=e;else t.query=e;e=t,t=1e3}else t&&y(t)?(n=t,t=1e3):t||0===t||(t=1e3);if(!this.i){var s=[],c=e;if(O(e)&&!b(e)){n||(n=e.callback)&&(c.callback=null);var l=e.sort,u=e.page;t=e.limit,F=e.threshold;var d=e.suggest;e=e.query}if(this.a){F=this.a.index;var f,m,h=c.where,E=c.bool||"or",_=c.field,S=E;if(_)b(_)||(_=[_]);else if(b(c)){var w=c;_=[],S=[];for(var T=0;T<c.length;T++)i=(r=c[T]).bool||E,_[T]=r.field,S[T]=i,"not"===i?f=!0:"and"===i&&(m=!0)}else _=this.a.keys;for(E=_.length,T=0;T<E;T++)w&&(c=w[T]),u&&!v(c)&&(c.page=null,c.limit=0),s[T]=F[_[T]].search(c,0);if(n)return n(o.call(this,e,S,s,l,t,d,h,u,m,f));if(this.async){var k=this;return new Promise((function(n){Promise.all(s).then((function(r){n(o.call(k,e,S,r,l,t,d,h,u,m,f))}))}))}return o.call(this,e,S,s,l,t,d,h,u,m,f)}if(F||(F=this.threshold||0),!r){if(this.async&&"function"!=typeof importScripts){var C=this;return F=new Promise((function(e){setTimeout((function(){e(C.search(c,t,null,!0)),C=null}))})),n?(F.then(n),this):F}if(n)return n(this.search(c,t,null,!0)),this}if(!e||!v(e))return s;if(c=e,this.cache)if(this.m){if(n=this.u.get(e))return n}else this.u.clear(),this.m=!0;if(!(c=this.encode(c)).length)return s;n=y(n=this.g)?n(c):c.split(this.split),this.filter&&(n=a(n,this.filter)),w=n.length,r=!0,i=[];var x=I(),A=0;if(1<w&&(this.depth&&"strict"===this.g?E=!0:n.sort(p)),!E||(T=this.o))for(var D=this.c;A<w;A++){var P=n[A];if(P){if(E){if(!_)if(T[P])_=P,x[P]=1;else if(!d)return s;if(d&&A===w-1&&!i.length)E=!1,x[P=_||P]=0;else if(!_)continue}if(!x[P]){var j=[],M=!1,L=0,R=E?T[_]:this.s;if(R)for(var N=void 0,U=0;U<D-F;U++)(N=R[U]&&R[U][P])&&(j[L++]=N,M=!0);if(M)_=P,i[i.length]=1<L?j.concat.apply([],j):j[0];else if(!d){r=!1;break}x[P]=1}}}else r=!1;return r&&(s=g(i,t,u,d)),this.cache&&this.u.set(e,s),s}this.H=n,this.D=0,this.A=[];for(var F=0;F<this.i;F++)this.b[F].postMessage({search:!0,limit:t,content:e})},n.prototype.find=function(e,t){return this.where(e,t,1)[0]||null},n.prototype.where=function(e,t,n,r){var a,o=this.v,i=[],s=0;if(O(e)){n||(n=t);var c=Object.keys(e),l=c.length,u=!1;if(1===l&&"id"===c[0])return[o[e.id]];if((a=this.I)&&!r)for(var d=0;d<a.length;d++){var p=a[d],f=e[p];if(!E(f)){var m=this.B[p]["@"+f];if(0==--l)return m;c.splice(c.indexOf(p),1),delete e[p];break}}for(a=Array(l),d=0;d<l;d++)a[d]=c[d].split(":")}else{if(y(e)){for(n=(t=r||Object.keys(o)).length,c=0;c<n;c++)e(l=o[t[c]])&&(i[s++]=l);return i}if(E(t))return[o[e]];if("id"===e)return[o[t]];c=[e],l=1,a=[e.split(":")],u=!0}for(d=(r=m||r||Object.keys(o)).length,p=0;p<d;p++){f=m?r[p]:o[r[p]];for(var h=!0,g=0;g<l;g++){u||(t=e[c[g]]);var v=a[g],b=v.length,_=f;if(1<b)for(var I=0;I<b;I++)_=_[v[I]];else _=_[v[0]];if(_!==t){h=!1;break}}if(h&&(i[s++]=f,n&&s===n))break}return i},n.prototype.info=function(){if(!this.i)return{id:this.id,items:this.length,cache:!(!this.cache||!this.cache.C)&&this.cache.C.length,matcher:x.length+(this.h?this.h.length:0),worker:this.i,threshold:this.threshold,depth:this.depth,resolution:this.c,contextual:this.depth&&"strict"===this.g};for(var e=0;e<this.i;e++)this.b[e].postMessage({info:!0,id:this.id})},n.prototype.clear=function(){return this.destroy().init()},n.prototype.destroy=function(){if(this.cache&&(this.u.clear(),this.u=null),this.s=this.o=this.f=null,this.a){for(var e=this.a.keys,t=0;t<e.length;t++)this.a.index[e[t]].destroy();this.a=this.v=null}return this},n.prototype.export=function(e){var t=!e||E(e.serialize)||e.serialize;if(this.a){var n=!e||E(e.doc)||e.doc,r=!e||E(e.index)||e.index;e=[];var a=0;if(r)for(r=this.a.keys;a<r.length;a++){var o=this.a.index[r[a]];e[a]=[o.s,o.o,Object.keys(o.f)]}n&&(e[a]=this.v)}else e=[this.s,this.o,Object.keys(this.f)];return t&&(e=JSON.stringify(e)),e},n.prototype.import=function(e,t){(!t||E(t.serialize)||t.serialize)&&(e=JSON.parse(e));var n=I();if(this.a){var r=!t||E(t.doc)||t.doc,a=0;if(!t||E(t.index)||t.index){for(var o=(t=this.a.keys).length,i=e[0][2];a<i.length;a++)n[i[a]]=1;for(a=0;a<o;a++){i=this.a.index[t[a]];var s=e[a];s&&(i.s=s[0],i.o=s[1],i.f=n)}}r&&(this.v=O(r)?r:e[a])}else{for(r=e[2],a=0;a<r.length;a++)n[r[a]]=1;this.s=e[0],this.o=e[1],this.f=n}};var j,M,L,R,N=(M=s("\\s+"),L=s("[^a-z0-9 ]"),R=[s("[-/]")," ",L,"",M," "],function(e){return d(c(e.toLowerCase(),R))}),U={icase:function(e){return e.toLowerCase()},simple:function(){var e=s("\\s+"),t=s("[^a-z0-9 ]"),n=s("[-/]"),r=[s("[àáâãäå]"),"a",s("[èéêë]"),"e",s("[ìíîï]"),"i",s("[òóôõöő]"),"o",s("[ùúûüű]"),"u",s("[ýŷÿ]"),"y",s("ñ"),"n",s("[çc]"),"k",s("ß"),"s",s(" & ")," and ",n," ",t,"",e," "];return function(e){return" "===(e=c(e.toLowerCase(),r))?"":e}}(),advanced:function(){var e=s("ae"),t=s("ai"),n=s("ay"),r=s("ey"),a=s("oe"),o=s("ue"),i=s("ie"),l=s("sz"),u=s("zs"),p=s("ck"),f=s("cc"),m=[e,"a",t,"ei",n,"ei",r,"ei",a,"o",o,"u",i,"i",l,"s",u,"s",s("sh"),"s",p,"k",f,"k",s("th"),"t",s("dt"),"t",s("ph"),"f",s("pf"),"f",s("ou"),"o",s("uo"),"u"];return function(e,t){return e?(2<(e=this.simple(e)).length&&(e=c(e,m)),t||1<e.length&&(e=d(e)),e):e}}(),extra:(j=[s("p"),"b",s("z"),"s",s("[cgq]"),"k",s("n"),"m",s("d"),"t",s("[vw]"),"f",s("[aeiouy]"),""],function(e){if(!e)return e;if(1<(e=this.advanced(e,!0)).length){e=e.split(" ");for(var t=0;t<e.length;t++){var n=e[t];1<n.length&&(e[t]=n[0]+c(n.substring(1),j))}e=d(e=e.join(" "))}return e}),balance:N},F=function(){function e(e){this.clear(),this.J=!0!==e&&e}return e.prototype.clear=function(){this.cache=I(),this.count=I(),this.index=I(),this.C=[]},e.prototype.set=function(e,t){if(this.J&&E(this.cache[e])){var n=this.C.length;if(n===this.J){n--;var r=this.C[n];delete this.cache[r],delete this.count[r],delete this.index[r]}this.index[e]=n,this.C[n]=e,this.count[e]=-1,this.cache[e]=t,this.get(e)}else this.cache[e]=t},e.prototype.get=function(e){var t=this.cache[e];if(this.J&&t){var n=++this.count[e],r=this.index,a=r[e];if(0<a){for(var o=this.C,i=a;this.count[o[--a]]<=n&&-1!==a;);if(++a!==i){for(n=i;n>a;n--)i=o[n-1],o[n]=i,r[i]=n;o[a]=e,r[e]=a}}}return t},e}();return n}(function(){var e={},t="undefined"!=typeof Blob&&"undefined"!=typeof URL&&URL.createObjectURL;return function(n,r,a,o,i){return a=t?URL.createObjectURL(new Blob(["("+a.toString()+")()"],{type:"text/javascript"})):n+".es5.js",e[n+="-"+r]||(e[n]=[]),e[n][i]=new Worker(a),e[n][i].onmessage=o,console.log("Register Worker: "+n+"@"+i),e[n][i]}}()),this)}).call(this,n(46))},function(e,t,n){var r=n(65);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.default=void 0;var a=r(n(15)),o=r(n(18)),i=r(n(0)),s=r(n(1)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(119));const l=["as","className","children","emphasis","size","text"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){function t(t){const n=t||{},{as:r,className:s,children:u,emphasis:d,size:p,text:f}=n,m=(0,o.default)(n,l);return i.default.createElement(e,(0,a.default)({className:(0,c.default)({as:r,className:s,emphasis:d,size:p})},m),f||u)}return t.propTypes={as:s.default.oneOf(c.asOptions),children:s.default.node,className:s.default.string,emphasis:s.default.oneOf(c.emphasisOptions),size:s.default.number,text:s.default.string},t}const p=new Proxy((function(){}),{get:function(e,t){return String(t).startsWith("_")||void 0!==e[t]||(e[t]=d(t)),Reflect.get(...arguments)}});t.text=p;var f=p;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={CRITICAL:"Critical",SUCCESS:"Success",WARNING:"Warning",INFO:"Info",HIGHLIGHT:"Highlight",NEUTRAL:"Neutral",INTERNAL:"Internal",PASSIVE:"Passive",PREMIUM:"Premium"}},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(67));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){e.exports=n.p+"5f494d47c0b66dc65c8fd6fe67dc1ff7.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DB_VERSION=t.INDEXES=t.STORES=void 0;t.STORES={ASSET:{key:"id",name:"asset"},CONTAINER_LAST_SYNC:{key:"containerKey",name:"container_last_sync"},CONTAINER_MANIFEST:{key:"containerKey",name:"container_manifest"},SEARCH_INDEX:{key:"searchIndexKey",name:"search_index_key"}};t.INDEXES={CONTAINER_KEY:{name:"container_key",key:"containerKey"}};t.DB_VERSION=4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={CRITICAL:"Critical",SUCCESS:"Success",WARNING:"Warning",INFO:"Info",HIGHLIGHT:"Highlight",NEUTRAL:"Neutral",INTERNAL:"Internal",PASSIVE:"Passive",PREMIUM:"Premium"}},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(71));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.default=void 0;var a=r(n(15)),o=r(n(18)),i=r(n(0)),s=r(n(1)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(138));const l=["as","className","children","emphasis","size","text"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){function t(t){const n=t||{},{as:r,className:s,children:u,emphasis:d,size:p,text:f}=n,m=(0,o.default)(n,l);return i.default.createElement(e,(0,a.default)({className:(0,c.default)({as:r,className:s,emphasis:d,size:p})},m),f||u)}return t.propTypes={as:s.default.oneOf(c.asOptions),children:s.default.node,className:s.default.string,emphasis:s.default.oneOf(c.emphasisOptions),size:s.default.number,text:s.default.string},t}const p=new Proxy((function(){}),{get:function(e,t){return String(t).startsWith("_")||void 0!==e[t]||(e[t]=d(t)),Reflect.get(...arguments)}});t.text=p;var f=p;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={CRITICAL:"Critical",SUCCESS:"Success",WARNING:"Warning",INFO:"Info",HIGHLIGHT:"Highlight",NEUTRAL:"Neutral",INTERNAL:"Internal",PASSIVE:"Passive",PREMIUM:"Premium"}},function(e,t,n){"use strict";(function(e){var r=n(0);function a(t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var r,a,o="undefined"!=typeof document&&document.attachEvent;if(!o){var i=(a=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)},function(e){return a(e)}),s=(r=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout,function(e){return r(e)}),c=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},l=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;c(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=i((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},u=!1,d="",p="animationstart",f="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(u=!0),!1===u)for(var g=0;g<f.length;g++)if(void 0!==h.style[f[g]+"AnimationName"]){d="-"+f[g].toLowerCase()+"-",p=m[g],u=!0;break}var v="resizeanim",b="@"+d+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",y=d+"animation: 1ms "+v+"; "}return{addResizeListener:function(e,r){if(o)e.attachEvent("onresize",r);else{if(!e.__resizeTriggers__){var a=e.ownerDocument,i=n.getComputedStyle(e);i&&"static"==i.position&&(e.style.position="relative"),function(e){if(!e.getElementById("detectElementResize")){var n=(b||"")+".resize-triggers { "+(y||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],a=e.createElement("style");a.id="detectElementResize",a.type="text/css",null!=t&&a.setAttribute("nonce",t),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(e.createTextNode(n)),r.appendChild(a)}}(a),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=a.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),c(e),e.addEventListener("scroll",l,!0),p&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==v&&c(e)},e.__resizeTriggers__.addEventListener(p,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(o)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(p,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(e){function t(){var e,n,r;o(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,a=e.onResize;if(r._parentNode){var o=r._parentNode.offsetHeight||0,i=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},c=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,p=o-u-d,f=i-c-l;(!t&&r.state.height!==p||!n&&r.state.width!==f)&&(r.setState({height:o-u-d,width:i-c-l}),a({height:o,width:i}))}},r._setRef=function(e){r._autoSizer=e},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=a(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.disableHeight,o=e.disableWidth,i=e.style,c=this.state,l=c.height,u=c.width,d={overflow:"visible"},p={},f=!1;return a||(0===l&&(f=!0),d.height=0,p.height=l),o||(0===u&&(f=!0),d.width=0,p.width=u),Object(r.createElement)("div",{className:n,ref:this._setRef,style:s({},d,i)},!f&&t(p))}}]),t}(r.PureComponent);l.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=l}).call(this,n(46))},function(e,t,n){"use strict";const r=n(21);e.exports=r("chevron-up","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("editor-larger","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("alert","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("settings","false")},function(e,t){e.exports=_},function(e,t,n){"use strict";const r=n(21);e.exports=r("thumbs-up","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("thumbs-down","false")},function(e,t){e.exports=I},function(e,t,n){"use strict";const r=n(21);e.exports=r("facebook","false")},function(e,t){e.exports=S},function(e,t,n){"use strict";const r=n(21);e.exports=r("search","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("speedometer","false")},function(e,t,n){e.exports=n.p+"8d3d967a13724bd34a81c9eefd76f5d4.png"},function(e,t,n){e.exports=n.p+"6a612d47f77018f2717b455d19577875.png"},function(e,t,n){e.exports=n.p+"207bb3a54357c8aa15a196cb9baddb36.png"},function(e,t,n){e.exports=n.p+"aaafeb93299007d835ce8973e294276c.svg"},function(e,t,n){"use strict";const r=n(21);e.exports=r("unlink","false")},function(e,t,n){"use strict";const r=n(21);e.exports=r("wand","false")},function(e,t,n){e.exports=n.p+"8d2803b34909167e438f23fda48d93a5.png"},function(e,t,n){e.exports=n.p+"8a46fc2b438a8ca406cf6ace390dc846.png"},function(e,t){e.exports=w},function(e,t,n){"use strict";const r=n(21);e.exports=r("ok","false")},function(e,t,n){e.exports=n.p+"5bca3700858a77556cc1df0fe503ac9b.png"},function(e,t){e.exports=T},function(e,t,n){e.exports=n.p+"9d69b44acea05827c5ebbe397b152961.png"},function(e,t,n){"use strict";const r=n(21);e.exports=r("apps2","false")},function(e,t,n){e.exports=n.p+"348f96f594219b8ef38f1e0a18520246.png"},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(3)),o=r(n(15)),i=r(n(18)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(0)),c=r(n(1)),l=r(n(8)),u=r(n(130)),d=r(n(131)),p=r(n(135)),f=n(137),m=r(n(73));const h=["className","children","label","helpMessage","errorMessage","open"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const y=s.default.forwardRef((function(e,t){const n=e||{},{className:r,children:a,label:c,helpMessage:g,errorMessage:v,open:b=!0}=n,y=(0,i.default)(n,h),{id:O,invalid:E,disabled:_,required:I}=y||{},S=g&&O+"-help",w=v&&O+"-error",T=(0,s.useRef)(null),[k,C]=(0,s.useState)("bottom-start"),x=b&&a,A=e.labelExperimentalFloat||!1;return s.default.createElement("div",{className:(0,l.default)("ux-text-input-shell",r)},!A&&(0,f.ensureLabelComponent)(c,{htmlFor:O,required:I}),s.default.createElement(u.default,{disabled:_,invalid:E,ref:T,flyoutPlacement:x?k:null},s.default.createElement(d.default,(0,o.default)({},y,{"aria-describedby":[S,w].filter(Boolean).join(" "),label:A&&c,ref:t})),x&&s.default.createElement(p.default,{anchorRef:T,placement:"bottom-start",onPlacement:C,stretch:!0},a)),g&&s.default.createElement(m.default.p,{text:g,as:"caption",id:S,emphasis:"passive"}),v&&s.default.createElement(m.default.p,{text:v,as:"caption",id:w,emphasis:"critical",role:"alert"}))}));y.propTypes=b(b({},d.default.propTypes),{},{label:c.default.node.isRequired,helpMessage:c.default.string,errorMessage:c.default.string}),y.displayName="TextInput";var O=y;t.default=O},function(e,t,n){var r=n(7),a=n(57),o=n(141),i=n(142);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},s(t)}e.exports=s},function(e,t,n){(function(n){var r;!function(n,a){e.exports=function(n){"use strict";var a,o=(n=n||{}).Base64,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),c=String.fromCharCode,l=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(u,l)},p=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?"=":i.charAt(n>>>6&63),t>=1?"=":i.charAt(63&n)].join("")},f=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,p)},m=function(e){return f(d(String(e)))},h=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?h(m(e)):m(e)};n.Uint8Array&&(a=function(e,t){for(var n="",r=0,a=e.length;r<a;r+=3){var o=e[r],s=e[r+1],c=e[r+2],l=o<<16|s<<8|c;n+=i.charAt(l>>>18)+i.charAt(l>>>12&63)+(void 0!==s?i.charAt(l>>>6&63):"=")+(void 0!==c?i.charAt(63&l):"=")}return t?h(n):n});var v,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},O=function(e){return e.replace(b,y)},E=function(e){var t=e.length,n=t%4,r=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),a=[c(r>>>16),c(r>>>8&255),c(255&r)];return a.length-=[0,0,2,1][n],a.join("")},_=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,E)},I=function(e){return _(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},w=function(e){return function(e){return O(_(e))}(S(e))};n.Uint8Array&&(v=function(e){return Uint8Array.from(I(S(e)),(function(e){return e.charCodeAt(0)}))});var T=function(){var e=n.Base64;return n.Base64=o,e};if(n.Base64={VERSION:"2.6.4",atob:I,btoa:f,fromBase64:w,toBase64:g,utob:d,encode:g,encodeURI:function(e){return g(e,!0)},btou:O,decode:w,noConflict:T,fromUint8Array:a,toUint8Array:v},"function"==typeof Object.defineProperty){var k=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",k((function(){return w(this)}))),Object.defineProperty(String.prototype,"toBase64",k((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",k((function(){return g(this,!0)})))}}n.Meteor&&(Base64=n.Base64);e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r);return{Base64:n.Base64}}(n)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:this)}).call(this,n(46))},function(e,t,n){"use strict";(function(t){var r=n(144),a=n(145),o=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,i=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(s,"")}var l=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function d(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},a={},i=typeof(e=e||r);if("blob:"===e.protocol)a=new f(unescape(e.pathname),{});else if("string"===i)for(n in a=new f(e,{}),u)delete a[n];else if("object"===i){for(n in e)n in u||(a[n]=e[n]);void 0===a.slashes&&(a.slashes=o.test(e.href))}return a}function p(e){e=c(e);var t=i.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&t[2].length>=2),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function f(e,t,n){if(e=c(e),!(this instanceof f))return new f(e,t,n);var o,i,s,u,m,h,g=l.slice(),v=typeof t,b=this,y=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=a.parse),t=d(t),o=!(i=p(e||"")).protocol&&!i.slashes,b.slashes=i.slashes||o&&t.slashes,b.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(g[3]=[/(.*)/,"pathname"]);y<g.length;y++)"function"!=typeof(u=g[y])?(s=u[0],h=u[1],s!=s?b[h]=e:"string"==typeof s?~(m=e.indexOf(s))&&("number"==typeof u[2]?(b[h]=e.slice(0,m),e=e.slice(m+u[2])):(b[h]=e.slice(m),e=e.slice(0,m))):(m=s.exec(e))&&(b[h]=m[1],e=e.slice(0,m.index)),b[h]=b[h]||o&&u[3]&&t[h]||"",u[4]&&(b[h]=b[h].toLowerCase())):e=u(e);n&&(b.query=n(b.query)),o&&t.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==t.pathname)&&(b.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],o=!1,i=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),i++):i&&(0===r&&(o=!0),n.splice(r,1),i--);return o&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}(b.pathname,t.pathname)),"/"!==b.pathname.charAt(0)&&b.hostname&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(u=b.auth.split(":"),b.username=u[0]||"",b.password=u[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}f.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||a.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";o[e]=t.charAt(0)!==i?i+t:t}else o[e]=t;break;default:o[e]=t}for(var s=0;s<l.length;s++){var c=l[s];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=a.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},f.extractProtocol=p,f.location=d,f.trimLeft=c,f.qs=a,e.exports=f}).call(this,n(46))},function(e,t){e.exports=k},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),s=0;s<o.length;s++){var c=o[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),o=0;o<r.length;o++){var i=r[o],s=e[i];(a?-1!==t.indexOf(i):t(i,s,e))&&(n[i]=s)}return n}},function(e,t){var n,r,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.svgosm=t.default=t.SVGOSM=void 0;var a=r(n(3)),o=r(n(18));const i=["viewBox","title","desc","shapes"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l="undefined"!=typeof document?document.body||document.documentElement:null;class u{constructor(e,t=l){this.id=e,this.tracker={},this.mounted=[],this.root=t}mount(e){const t=document.createElement("div");t.style="display:none",t.id=this.id;const n=document.createElementNS(u.xmlns,"svg");t.appendChild(n),e.appendChild(t),this.mounted.push({svg:n,root:e,container:t}),Object.keys(this.tracker).forEach(e=>{n.innerHTML+=this.tracker[e].sym})}extract(e){if(!e)return;let t;return this.root&&(this.mount(this.root),this.root=null),this.mounted.some((function({container:n}){const r=window.getComputedStyle(n,":before"),a=e.startsWith("--")?e:"--"+e,o=r.getPropertyValue(a);let i=r.getPropertyValue("content");if(3===i.length&&(i=i.charAt(1)),i)if(i.includes("svg"))t=i;else if(1===i.length&&!/[a-z\d]/i.test(i))return!!t;return o&&o.includes("svg")&&(t=o),!!t})),t?this.parse(t):void 0}parse(e){if(!~e.indexOf("svg"))return{};const t=(e=e.replace(/%23/g,"#").replace(/\\"/g,'"')).indexOf(">"),n=e.indexOf("</svg>"),r=/viewBox=.*?([\d\s.]+)/.exec(e.substr(0,t));return r?{shapes:e.slice(t+1,n),viewBox:r[1]}:{}}get(e,t){const n=this.tracker[e];return n||!t?n:(this.set(e,t(e)),this.tracker[e])}sym(e,t={}){let{viewBox:n,title:r,desc:a,shapes:s}=t,l=(0,o.default)(t,i);if(!s)return!1;const u=`${this.id}-${e}`,d=`<symbol id="${u}" viewBox="${n}">${r?`<title id="${u}-title">${r}</title>`:""}${a?`<desc id="${u}-desc">${a}</desc>`:""}${s}</symbol>`;return this.tracker[e]=c(c({},l),{},{link:`#${this.id}-${e}`,viewBox:n,sym:d}),d}set(e,t){const n=this.sym(e,t);return!!n&&(this.root&&(this.mount(this.root),this.root=null),this.mounted.forEach(({svg:e})=>{e.innerHTML+=n}),!0)}}t.SVGOSM=t.default=u,u.xmlns="http://www.w3.org/2000/svg";const d=new u("svg-container");t.svgosm=d},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.ensureLabelComponent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?"object"==typeof e&&e.type===l?e:a.default.createElement(l,t,e):null};var a=r(n(0)),o=r(n(1)),i=r(n(8)),s=r(n(66)),c=r(n(68));const l=a.default.forwardRef((function(e,t){const{children:n,className:r,float:o,htmlFor:l,id:u,internal:d,required:p}=e;return a.default.createElement("label",{className:(0,i.default)("ux-label",r,{[(0,c.default)({as:"label"})]:!d,"ux-label--internal":d,"ux-label--floating":o&&d}),htmlFor:l,id:u,ref:t},n,p&&a.default.createElement(s.default.span,{"aria-hidden":!0,className:"ux-label-required",emphasis:"object"==typeof p&&p.emphasis||"critical",text:"object"==typeof p&&p.text||"*"}))}));l.propTypes={children:o.default.node.isRequired,className:o.default.string,float:o.default.bool,htmlFor:o.default.string.isRequired,id:o.default.string,internal:o.default.bool,required:o.default.oneOfType([o.default.bool,o.default.shape({emphasis:o.default.string,text:o.default.node})])},l.displayName="Label";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(67));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){var r=n(65);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),i=new I(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return w()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,i),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function p(){}function f(){}var m={};m[a]=function(){return this};var h=Object.getPrototypeOf,g=h&&h(h(S([])));g&&g!==t&&n.call(g,a)&&(m=g);var v=f.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(a,o){function i(){return new t((function(r,i){!function r(a,o,i,s){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return p.prototype=v.constructor=f,f.constructor=p,p.displayName=s(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new y(c(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),s(v,i,"Generator"),v[a]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";(function(e){!function(e){var t,n,r,a,o;if(r=e.IDBObjectStore||e.webkitIDBObjectStore||e.mozIDBObjectStore||e.msIDBObjectStore,n=e.IDBIndex||e.webkitIDBIndex||e.mozIDBIndex||e.msIDBIndex,void 0!==r&&void 0!==n){var i=!1;"undefined"!=typeof WorkerGlobalScope&&(navigator.userAgent.indexOf("Safari/602")>=0||navigator.userAgent.indexOf("Safari/603")>=0)&&(i=!0),(i||void 0===r.prototype.getAll||void 0===n.prototype.getAll||void 0===r.prototype.getAllKeys||void 0===n.prototype.getAllKeys)&&(a=function(){this.result=null,this.error=null,this.source=null,this.transaction=null,this.readyState="pending",this.onsuccess=null,this.onerror=null,this.toString=function(){return"[object IDBRequest]"}},t=function(e){this.type=e,this.target=null,this.currentTarget=null,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.eventPhase=this.NONE,this.stopPropagation=function(){console.log("stopPropagation not implemented in IndexedDB-getAll-shim")},this.stopImmediatePropagation=function(){console.log("stopImmediatePropagation not implemented in IndexedDB-getAll-shim")},this.bubbles=!1,this.cancelable=!1,this.preventDefault=function(){console.log("preventDefault not implemented in IndexedDB-getAll-shim")},this.defaultPrevented=!1,this.isTrusted=!1,this.timestamp=Date.now()},o=function(e,n){return function(r,o){var i,s,c;return r=void 0!==r?r:null,s=new a,c=[],(i=this.openCursor(r)).onsuccess=function(r){var a,i,l;(a=r.target.result)&&(l="value"===n?a.value:"index"===e?a.primaryKey:a.key,c.push(l),void 0===o||c.length<o)?a.continue():"function"==typeof s.onsuccess&&((i=new t("success")).target={readyState:"done",result:c},s.result=c,s.onsuccess(i))},i.onerror=function(e){console.log("IndexedDB-getAll-shim error when getting data:",e.target.error),"function"==typeof s.onerror&&s.onerror(e)},s}},(i||void 0===r.prototype.getAll)&&(r.prototype.getAll=o("objectStore","value")),(i||void 0===n.prototype.getAll)&&(n.prototype.getAll=o("index","value")),(i||void 0===r.prototype.getAllKeys)&&(r.prototype.getAllKeys=o("objectStore","key")),(i||void 0===n.prototype.getAllKeys)&&(n.prototype.getAllKeys=o("index","key")))}}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:void 0!==e?e:Function("return this;")())}).call(this,n(46))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t){return h((function(n,r){m().then((function(a){var o=a.transaction(e).objectStore(e).get(t);o.onsuccess=function(e){n(e.target.result)},o.onerror=r})).catch(r)}))},t.set=function(e,t){return h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite").objectStore(e).put(t);o.onsuccess=function(){n()},o.onerror=r})).catch(r)}))},t.getList=function(e){var t=e.objectStoreName,n=e.indexName,r=e.query;return h((function(e,a){m().then((function(o){var i=n?o.transaction(t).objectStore(t).index(n).getAll(IDBKeyRange.only(r)):o.transaction(t).objectStore(t).getAll();i.onsuccess=function(t){e(t.target.result)},i.onerror=a})).catch(a)}))},t.setList=function(e,t){return t&&t.length?h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite");t.forEach((function(t){o.objectStore(e).put(t)})),o.oncomplete=function(){n()},o.onerror=r})).catch(r)})):Promise.resolve()},t.removeList=function(e,t){return t&&t.length?h((function(n,r){m().then((function(a){var o=a.transaction([e],"readwrite");t.forEach((function(t){o.objectStore(e).delete(t)})),o.oncomplete=function(){n()},o.onerror=r})).catch(n)})):Promise.resolve()},t.clear=function(e){return h((function(t,n){m().then((function(n){n.transaction([e],"readwrite").objectStore(e).clear().onsuccess=function(){t()}})).catch(n)}))},t.getDbName=f;var r=n(70),a=i(n(126)),o=i(n(127));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.STORES.ASSET,c=r.STORES.CONTAINER_LAST_SYNC,l=r.STORES.CONTAINER_MANIFEST,u=r.STORES.SEARCH_INDEX,d=r.INDEXES.CONTAINER_KEY,p=null;function f(){if(!(0,o.default)())return"bb-image-manager";var e=(0,a.default)("rootDomain");if(!e)throw new Error("missing rootDomain query string");return"bb-image-manager-".concat(e).toLocaleLowerCase()}function m(){if(!window.indexedDB)return Promise.reject(new Error("The browser does not support indexedDB"));if(p)return Promise.resolve(p);return h((function(e,t){var n=window.indexedDB.open(f(),r.DB_VERSION);n.onupgradeneeded=function(e){p=e.target.result;for(var t=[],n=0;n<p.objectStoreNames.length;n++)t.push(p.objectStoreNames[n]);for(var r=0;r<t.length;r++)p.deleteObjectStore(t[r]);p.createObjectStore(s.name,{keyPath:s.key,autoIncrement:!0}).createIndex(d.name,d.key,{unique:!1}),p.createObjectStore(c.name,{keyPath:c.key}),p.createObjectStore(l.name,{keyPath:l.key}),p.createObjectStore(u.name,{keyPath:u.key})},n.onsuccess=function(){p=n.result,e(p)},n.onerror=function(e){p=null;var r=n.error||new Error("cannot get local storage DB");Object.assign(r,{meta:{request:n,event:e}}),t(r)}}))}function h(e){return new Promise(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return null;var t=window.location.href;if(!t)return null;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){try{return window.self!==window.top&&void 0===window.bb}catch(e){return!0}};t.default=r},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(15)),o=r(n(18)),i=r(n(0)),s=r(n(1)),c=r(n(8));const l=["children","className","disabled","invalid","flyoutPlacement","stretch"],u=i.default.forwardRef((function(e,t){const{children:n,className:r,disabled:s,invalid:u,flyoutPlacement:d,stretch:p=!0}=e,f=(0,o.default)(e,l);return delete f.style,i.default.createElement("div",(0,a.default)({className:(0,c.default)("ux-field-frame",r,{"ux-field-frame--invalid":u,"ux-field-frame--stretch":p}),disabled:s,"data-flyout":d,ref:t},f),n)}));u.propTypes={children:s.default.node,className:s.default.string,disabled:s.default.bool,invalid:s.default.bool,flyoutPlacement:s.default.string,stretch:s.default.bool};var d=u;t.default=d},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(15)),o=r(n(18)),i=f(n(0)),s=r(n(1)),c=r(n(8)),l=f(n(132)),u=r(n(72));const d=["className","disabled","id","invalid","label","multiline","onBlur","onChange","onFocus","placeholder","resize","required","size","suggestion","type","value"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const m=i.default.forwardRef((function(e,t){const{className:n,disabled:r,id:s,invalid:p,label:f,multiline:m,onBlur:h,onChange:g=Function.prototype,onFocus:v,placeholder:b,resize:y,required:O,size:E,suggestion:_,type:I="text",value:S}=e,w=(0,o.default)(e,d);delete w.style;const[T,k]=(0,i.useState)(!1),C=(0,i.useCallback)(e=>{k(!0),"function"==typeof v&&v(e)},[k,v]),x=(0,i.useCallback)(e=>{k(!1),"function"==typeof h&&h(e)},[k,h]),A=(0,i.useCallback)(e=>{g(e.target.value,{event:e})},[g]),D=m?"textarea":"input";return i.default.createElement("div",(0,a.default)({className:(0,c.default)("ux-text-entry-shell",n,(0,u.default)({as:"input",emphasis:p&&"critical"}))},function(e){const{multiline:t,label:n,size:r,resize:a}=e,o=t?"\n  ":"#",i=n?"":"#";let s,c=Array(r||1).fill(o).map((e,t)=>0===t?i:e).join("");return n&&!t&&(c=null),t&&(s="string"==typeof a?{resize:a}:{resize:a?"both":"none"}),{"data-size":c,style:s}}({multiline:m,label:f,size:E,resize:y})),_&&i.default.createElement("span",{className:"ux-text-entry-suggestion"},_),!b&&(0,l.ensureLabelComponent)(f,{float:Boolean(S)||T,internal:!0,required:O,htmlFor:s}),i.default.createElement(D,(0,a.default)({ref:t,className:"ux-text-entry-field",disabled:r,id:s,placeholder:b,"aria-invalid":p,"aria-required":Boolean(O),type:I,value:S,onChange:A,onFocus:C,onBlur:x,size:E},w)))}));m.propTypes={className:s.default.string,disabled:s.default.bool,id:s.default.string.isRequired,invalid:s.default.bool,label:s.default.node,multiline:s.default.bool,onBlur:s.default.func,onChange:s.default.func,onFocus:s.default.func,placeholder:s.default.string,resize:s.default.oneOfType([s.default.bool,s.default.oneOf(["horizontal","vertical"])]),required:l.default.propTypes.required,size:s.default.number,suggestion:s.default.string,type:s.default.oneOf(["text","email","password","url","tel","number","search"]),value:s.default.node},m.displayName="TextEntry";var h=m;t.default=h},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.ensureLabelComponent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?"object"==typeof e&&e.type===l?e:a.default.createElement(l,t,e):null};var a=r(n(0)),o=r(n(1)),i=r(n(8)),s=r(n(133)),c=r(n(72));const l=a.default.forwardRef((function(e,t){const{children:n,className:r,float:o,htmlFor:l,id:u,internal:d,required:p}=e;return a.default.createElement("label",{className:(0,i.default)("ux-label",r,{[(0,c.default)({as:"label"})]:!d,"ux-label--internal":d,"ux-label--floating":o&&d}),htmlFor:l,id:u,ref:t},n,p&&a.default.createElement(s.default.span,{"aria-hidden":!0,className:"ux-label-required",emphasis:"object"==typeof p&&p.emphasis||"critical",text:"object"==typeof p&&p.text||"*"}))}));l.propTypes={children:o.default.node.isRequired,className:o.default.string,float:o.default.bool,htmlFor:o.default.string.isRequired,id:o.default.string,internal:o.default.bool,required:o.default.oneOfType([o.default.bool,o.default.shape({emphasis:o.default.string,text:o.default.node})])},l.displayName="Label";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.text=t.default=void 0;var a=r(n(15)),o=r(n(18)),i=r(n(0)),s=r(n(1)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(134));const l=["as","className","children","emphasis","size","text"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){function t(t){const n=t||{},{as:r,className:s,children:u,emphasis:d,size:p,text:f}=n,m=(0,o.default)(n,l);return i.default.createElement(e,(0,a.default)({className:(0,c.default)({as:r,className:s,emphasis:d,size:p})},m),f||u)}return t.propTypes={as:s.default.oneOf(c.asOptions),children:s.default.node,className:s.default.string,emphasis:s.default.oneOf(c.emphasisOptions),size:s.default.number,text:s.default.string},t}const p=new Proxy((function(){}),{get:function(e,t){return String(t).startsWith("_")||void 0!==e[t]||(e[t]=d(t)),Reflect.get(...arguments)}});t.text=p;var f=p;t.default=f},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(71));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UX_FLYOUT_PLACEMENTS=void 0;var a=r(n(15)),o=r(n(3)),i=r(n(18)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(0)),c=r(n(58)),l=r(n(1)),u=r(n(8)),d=n(147),p=n(136);const f=["middlewareData","reference","floating","refs"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"];t.UX_FLYOUT_PLACEMENTS=v;function b(e){let{arrowRef:t}=e;return[(0,d.shift)(),(0,d.flip)(),(0,d.hide)(),(0,d.arrow)({element:t,padding:4})]}const y=s.default.forwardRef((e,t)=>{const{x:n,y:r}=e.arrow||{};return s.default.createElement("div",{className:"ux-flyout-arrow",ref:t,style:{top:r,left:n}})});function O(e){var t,n;const{anchorRef:r,arrow:o,children:l,className:m,id:h,placement:v,strategy:O,portalElem:E,role:_,onClose:I=Function.prototype,onPlacement:S=Function.prototype,stretch:w}=e,T=(0,s.useRef)(null),k=(0,p.getArrowSize)(o),C=(0,d.useFloating)({whileElementsMounted:function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.autoUpdate)(...t,{animationFrame:!0})}catch(e){return Function.prototype}},placement:v,strategy:O,middleware:b({arrowRef:T})}),{middlewareData:x,reference:A,floating:D,refs:P}=C,j=(0,i.default)(C,f);if((0,s.useLayoutEffect)(()=>{var e;null!=r&&null!==(e=r.current)&&void 0!==e&&e.getBoundingClientRect&&A(r.current)},[A,r,l]),(0,s.useEffect)(()=>{var e;if(null!=r&&null!==(e=r.current)&&void 0!==e&&e.getBoundingClientRect&&P.floating.current)return(0,p.outsideListeners)([r.current,P.floating.current],I)},[r,P.floating,I]),(0,s.useLayoutEffect)(()=>{S(j.placement)},[j.placement,S]),!r||!l)return null;const M=w?null===(t=P.reference)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.offsetWidth:null,L=s.default.createElement("div",(0,a.default)({className:(0,u.default)("ux-flyout",m),id:h,role:_,ref:D,style:(0,p.getFlyoutStyle)(g({arrowSize:k,minWidth:M},j))},(0,p.getFlyoutAttributes)(g(g({},x),j))),l,o&&s.default.createElement(y,(0,a.default)({ref:T},x)));return E?c.default.createPortal(L,E):L}y.propTypes={arrow:l.default.shape({x:l.default.number,y:l.default.number})},O.propTypes={anchorRef:l.default.oneOfType([l.default.func,l.default.shape({current:l.default.object})]),arrow:l.default.oneOfType([l.default.bool,l.default.string]),children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node]),id:l.default.string,placement:l.default.oneOf(v),strategy:l.default.oneOf(["absolute","fixed"]),role:l.default.string,onClose:l.default.func,onPlacement:l.default.func,stretch:l.default.bool,className:l.default.string,portalElem:l.default.object},O.displayName="Flyout";var E=O;t.default=E},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.getArrowSize=function(e){switch(typeof e){case"boolean":return e?"1rem":0;case"number":return e+"px";default:return e}},t.getFlyoutAttributes=function(e){let{hide:t,placement:n}=e;const{escaped:r,referenceHidden:a}=t||{};return{"data-placement":n,"data-escaped":r,"data-refhidden":a}},t.getFlyoutStyle=function(e){let{x:t,y:n,strategy:r,arrowSize:c}=e,l=(0,o.default)(e,i);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({position:r,top:n,left:t,"--ux-flyout-arrow-size":c||0},l)},t.outsideListeners=function(e,t){function n(n){(function(e,t){return!e.composedPath().filter(e=>t.includes(e)).length})(n,e)&&t(n)}function r(e){"Escape"===e.key&&t(e)}"function"==typeof t&&(document.addEventListener("click",n),document.addEventListener("focus",n,!0),document.addEventListener("keydown",r));return()=>{document.removeEventListener("click",n),document.removeEventListener("focus",n,!0),document.removeEventListener("keydown",r)}};var a=r(n(3)),o=r(n(18));const i=["x","y","strategy","arrowSize"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.ensureLabelComponent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?"object"==typeof e&&e.type===l?e:a.default.createElement(l,t,e):null};var a=r(n(0)),o=r(n(1)),i=r(n(8)),s=r(n(73)),c=r(n(139));const l=a.default.forwardRef((function(e,t){const{children:n,className:r,float:o,htmlFor:l,id:u,internal:d,required:p}=e;return a.default.createElement("label",{className:(0,i.default)("ux-label",r,{[(0,c.default)({as:"label"})]:!d,"ux-label--internal":d,"ux-label--floating":o&&d}),htmlFor:l,id:u,ref:t},n,p&&a.default.createElement(s.default.span,{"aria-hidden":!0,className:"ux-label-required",emphasis:"object"==typeof p&&p.emphasis||"critical",text:"object"==typeof p&&p.text||"*"}))}));l.propTypes={children:o.default.node.isRequired,className:o.default.string,float:o.default.bool,htmlFor:o.default.string.isRequired,id:o.default.string,internal:o.default.bool,required:o.default.oneOfType([o.default.bool,o.default.shape({emphasis:o.default.string,text:o.default.node})])},l.displayName="Label";var u=l;t.default=u},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(74));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){"use strict";var r=n(23);Object.defineProperty(t,"__esModule",{value:!0}),t.asOptions=void 0,t.default=function(e){const{as:t,className:n,emphasis:r,size:o}=e||{};return(0,a.default)("ux-text",n,{["ux-text-size"+o]:"number"==typeof o&&o>=-2&&o<6,["ux-text-"+t]:t&&i.includes(t),["ux-text-feedback-"+r]:r&&s.includes(r)})},t.emphasisOptions=void 0;var a=r(n(8)),o=r(n(74));const i=["title","heading","paragraph","action","input","label","caption"];t.asOptions=i;const s=Object.values(o.default).map(e=>e.toLowerCase());t.emphasisOptions=s},function(e,t,n){},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(57),a=n(143);function o(t,n,i){return a()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function a(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,o=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=encodeURIComponent(a),n=encodeURIComponent(n),null===a||null===n)continue;o.push(a+"="+n)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=a(t[1]),i=a(t[2]);null===o||null===i||o in r||(r[o]=i)}return r}},function(e,t,n){"use strict";n.r(t),n.d(t,"MediaManager",(function(){return OC})),n.d(t,"socialAuthCallbackHtml",(function(){return _C}));var r={};n.r(r),n.d(r,"openModal",(function(){return Cr})),n.d(r,"openVideoSelectorModal",(function(){return xr})),n.d(r,"apiStatusChange",(function(){return Ar})),n.d(r,"stockImagesSearch",(function(){return Dr})),n.d(r,"stockImagesReset",(function(){return Pr})),n.d(r,"stockImagesSearchNextPage",(function(){return jr})),n.d(r,"stockVideosSearch",(function(){return Mr})),n.d(r,"stockVideosReset",(function(){return Lr})),n.d(r,"imagesStage",(function(){return Rr})),n.d(r,"imagesUpload",(function(){return Nr})),n.d(r,"imagesLoad",(function(){return Ur})),n.d(r,"resetRecentImages",(function(){return Fr})),n.d(r,"filesUpload",(function(){return Vr})),n.d(r,"videoUpload",(function(){return Br})),n.d(r,"videosLoad",(function(){return Gr})),n.d(r,"videosSearch",(function(){return zr})),n.d(r,"videosLoadMore",(function(){return Hr})),n.d(r,"videosEdit",(function(){return Kr})),n.d(r,"videoRefresh",(function(){return Wr})),n.d(r,"resetRecentVideos",(function(){return qr})),n.d(r,"getVimeoUser",(function(){return Yr})),n.d(r,"getVimeoLink",(function(){return Xr})),n.d(r,"showVimeoModal",(function(){return Qr})),n.d(r,"hideVimeoModal",(function(){return $r})),n.d(r,"filesDelete",(function(){return Zr})),n.d(r,"imagesSort",(function(){return Jr})),n.d(r,"imageProgress",(function(){return ea})),n.d(r,"videoProgress",(function(){return ta})),n.d(r,"videoUploadComplete",(function(){return na})),n.d(r,"videoDelete",(function(){return ra})),n.d(r,"startVideoRefresh",(function(){return aa})),n.d(r,"endVideoRefresh",(function(){return oa})),n.d(r,"imageUploadFail",(function(){return ia})),n.d(r,"modalHide",(function(){return sa})),n.d(r,"stockImagesPopulate",(function(){return ca})),n.d(r,"stockVideosPopulate",(function(){return la})),n.d(r,"insertItems",(function(){return ua})),n.d(r,"loadSiteImages",(function(){return da})),n.d(r,"copyInsertImages",(function(){return pa})),n.d(r,"loadFirstGCSiteImages",(function(){return fa})),n.d(r,"track",(function(){return ma})),n.d(r,"getSocialAccessToken",(function(){return ha})),n.d(r,"populateSocialAccessToken",(function(){return ga})),n.d(r,"populateSocialAuthUrl",(function(){return va})),n.d(r,"switchSocialProvider",(function(){return ba})),n.d(r,"loadIGPosts",(function(){return ya})),n.d(r,"startIGLoading",(function(){return Oa})),n.d(r,"endIGLoading",(function(){return Ea})),n.d(r,"switchFBPage",(function(){return _a})),n.d(r,"switchFBAlbum",(function(){return Ia})),n.d(r,"loadFBAlbums",(function(){return Sa})),n.d(r,"loadFBPhotos",(function(){return wa})),n.d(r,"startFBLoading",(function(){return Ta})),n.d(r,"endFBLoading",(function(){return ka})),n.d(r,"getPlanFeatures",(function(){return Ca})),n.d(r,"itemClicked",(function(){return xa})),n.d(r,"clearAllSelection",(function(){return Aa})),n.d(r,"itemShiftClicked",(function(){return Da})),n.d(r,"rangeSelect",(function(){return Pa})),n.d(r,"multiSelect",(function(){return ja})),n.d(r,"trackPerfBegin",(function(){return Ma})),n.d(r,"trackPerfEnd",(function(){return La})),n.d(r,"perfLoadVenture",(function(){return Ra})),n.d(r,"perfLoadVentureEnd",(function(){return Na})),n.d(r,"trackPerfEndDone",(function(){return Ua})),n.d(r,"imagesUploaded",(function(){return Fa})),n.d(r,"imagesDeleted",(function(){return Va})),n.d(r,"metadataUpdated",(function(){return Ba})),n.d(r,"selectedImageMetadataUpdated",(function(){return Ga})),n.d(r,"populateContainerManifest",(function(){return za})),n.d(r,"getNextPageDimensions",(function(){return Ha})),n.d(r,"onDimensionsRetrieved",(function(){return Ka})),n.d(r,"doneLoadingDimensions",(function(){return Wa})),n.d(r,"searchAssets",(function(){return qa})),n.d(r,"searchAssetsDone",(function(){return Ya})),n.d(r,"clearSearchResults",(function(){return Xa})),n.d(r,"updateCoverImage",(function(){return Qa})),n.d(r,"toggleFiv",(function(){return $a})),n.d(r,"logInfo",(function(){return Za})),n.d(r,"logWarning",(function(){return Ja})),n.d(r,"logError",(function(){return eo})),n.d(r,"debug",(function(){return to})),n.d(r,"loadViewableSitesNextPage",(function(){return no})),n.d(r,"rejectFiles",(function(){return ro})),n.d(r,"openUploadNotification",(function(){return ao})),n.d(r,"closeUploadNotification",(function(){return oo})),n.d(r,"setCurrentCollectionView",(function(){return io})),n.d(r,"insertProducts",(function(){return so})),n.d(r,"getNextPageVideos",(function(){return co})),n.d(r,"fetchNextMixedAssetPage",(function(){return lo})),n.d(r,"setFlyoutVisible",(function(){return uo})),n.d(r,"setAssetContainerId",(function(){return po})),n.d(r,"stageVideo",(function(){return fo})),n.d(r,"reconnectVimeoUser",(function(){return mo})),n.d(r,"loadOtherMedia",(function(){return ho})),n.d(r,"initSPAQ",(function(){return go})),n.d(r,"logSPAQ",(function(){return vo})),n.d(r,"logSPAQDone",(function(){return bo})),n.d(r,"traceAuditEventStart",(function(){return yo})),n.d(r,"traceAuditEventEnd",(function(){return Oo})),n.d(r,"trackUsage",(function(){return Eo}));var a=n(15),o=n.n(a),i=n(20),s=n.n(i),c=n(0),l=n.n(c),u=n(1),d=n.n(u),p=n(6),f=n(17),m=n(3),h=n.n(m),g=n(9),v=n.n(g),b=n(10),y=n.n(b),O=n(13),E=n.n(O),_=n(11),I=n.n(_),S=n(12),w=n.n(S),T=n(7),k=n.n(T),C=n(51),x=n.n(C),A=n(33),D=n.n(A),P=n(5),j=n(24),M=n.n(j),L=n(14),R=n.n(L),N=n(48),U=n(59),F=n.n(U),V=n(60);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var G={width:180,height:220};function z(e,t){var n,r,a,o,i=function(e){return{width:e.width-65,height:e.height-88}}(e),s=(o=G,n={width:(a=t).width+o.width,height:a.height+o.height},r=i,Math.min(r.width/n.width,r.height/n.height)),c=Math.floor(s*t.height),l=Math.floor(s*t.width);return{height:c,width:l,left:Math.floor(.5*(e.width-l)),top:Math.floor(.5*(e.height-c))+44,scale:Math.floor(100*s)/100}}var H;!function(e){e.white="#FFFFFF",e.gray10="#F3F3F3",e.gray20="#DCDCDC",e.gray100="#171717"}(H||(H={}));var K={bottom:0,height:"100vh",left:0,position:"fixed",right:0,top:0,width:"100%"},W={alignItems:"center",backgroundColor:H.white,display:"flex",justifyContent:"center",zIndex:1201},q={display:"flex",flexDirection:"column",height:"100vh",left:0,overflow:"hidden",position:"absolute",top:0,width:"100%"},Y={alignItems:"center",backgroundColor:H.gray100,display:"flex",height:"64px",paddingLeft:"9px"},X={color:H.white,cursor:"pointer",textDecoration:"none",transform:"rotate(90deg)"},Q={backgroundColor:H.gray10,display:"flex",position:"relative"},$={alignItems:"center",display:"flex",height:"calc(100vh - 64px)",justifyContent:"center",width:"calc(100vw - 72px)"},Z={alignItems:"center",backgroundColor:H.white,borderRight:"1px solid "+H.gray20,boxShadow:"1px 5px 8px 0px rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",width:"72px"},J={alignItems:"center",backgroundColor:H.white,borderLeft:"1px solid "+H.gray20,boxShadow:"-1px 5px 8px 0px rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",position:"absolute",right:0,top:0,width:"192px",zIndex:1203},ee={left:"-19px",position:"absolute",top:"calc(50% - 36px)"},te={alignItems:"center",display:"flex"},ne={backgroundColor:H.gray20,borderRadius:"2px",height:"12px",width:"28px"},re={backgroundColor:H.gray20,borderRadius:"2px",height:"16px",width:"16px"},ae={alignItems:"center",backgroundColor:H.white,borderRadius:"20px",bottom:"24px",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",display:"flex",height:"40px",justifyContent:"space-around",left:"50%",position:"absolute",transform:"translateX(-50%)",width:"130px",zIndex:1203},oe={backgroundColor:H.gray10,borderRadius:"12px",height:"24px",width:"24px"},ie={alignItems:"center",animationDuration:"2s",animationFillMode:"forwards",animationIterationCount:"infinite",animationName:"shimmer",animationTimingFunction:"linear",backgroundColor:H.gray10,backgroundImage:"linear-gradient(to right, #f3f3f3 0%, #e7e7e7 20%, #f3f3f3 40%, #f3f3f3 100%)",backgroundRepeat:"no-repeat",display:"flex",height:"2048px",justifyContent:"center",width:"2048px"},se={boxShadow:"0 3px 5px 0 rgba(72, 66, 67, 0.08)"},ce=function(){return Object(c.useEffect)((function(){!function(e){var t=document.createElement("style");document.head.appendChild(t);var n=t.sheet;n&&n.insertRule(e,n.cssRules.length)}("@keyframes shimmer { 0% { background-position: -1024px 0; } 100% { background-position: 1024px 0; }}")}),[]),l.a.createElement("div",{style:B({},q)},l.a.createElement("div",{style:B({},Y)},l.a.createElement("div",{onClick:function(){return history.back()},style:B({},X)},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},l.a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M16.024 17.104l4.127-3.811a1.148 1.148 0 0 1 1.532 0 .947.947 0 0 1 0 1.414l-4.888 4.514a1.148 1.148 0 0 1-1.527.004l-4.946-4.514a.947.947 0 0 1-.01-1.414 1.148 1.148 0 0 1 1.532-.008l4.18 3.815z"})))),l.a.createElement("div",{style:B({},Q)},l.a.createElement("div",{style:B({},Z)},l.a.createElement("div",{style:B({},re,{height:"24px",marginBottom:"8px",width:"24px"})}),l.a.createElement("div",{style:B({},ne,{height:"12px",marginBottom:"24px",width:"36px"})}),l.a.createElement("div",{style:B({},re,{height:"24px",marginBottom:"8px",width:"24px"})}),l.a.createElement("div",{style:B({},ne,{height:"12px",marginBottom:"24px",width:"36px"})}),l.a.createElement("div",{style:B({},re,{height:"24px",marginBottom:"8px",width:"24px"})}),l.a.createElement("div",{style:B({},ne,{height:"12px",marginBottom:"24px",width:"36px"})}),l.a.createElement("div",{style:B({},re,{height:"24px",marginBottom:"8px",width:"24px"})}),l.a.createElement("div",{style:B({},ne,{height:"12px",marginBottom:"24px",width:"36px"})})),l.a.createElement("div",{style:B({},$)}),l.a.createElement("div",{style:B({},J)},l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},te,{marginBottom:"24px"})},l.a.createElement("div",{style:B({},ne,{marginRight:"8px",width:"96px"})}),l.a.createElement("div",{style:B({},re,{height:"32px",width:"32px"})})),l.a.createElement("div",{style:B({},ee)},l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"90",viewBox:"0 0 20 90"},l.a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M0 0l11.188 6.08c5.152 2.8 8.36 8.195 8.36 14.058v25.023l.324 23.892c.08 5.787-2.973 11.165-7.983 14.065L0 90V0z",transform:"translate(9.936767, 45.000000) rotate(180.000000) translate(-9.936767, -45.000000)"})))),l.a.createElement("div",{style:B({},ae)},l.a.createElement("div",{style:B({},oe)}),l.a.createElement("div",{style:B({},te)},l.a.createElement("div",{style:B({},ne,{marginRight:"4px"})}),l.a.createElement("div",{style:B({},re)})),l.a.createElement("div",{style:B({},oe)}))))},le=function(e){var t=e.id,n=e.projectSize,r=e.thumbnailUrl,a=Object(c.useMemo)((function(){if(t)return z({width:window.innerWidth,height:window.innerHeight},n||{width:0,height:0})}),[t]);return t?l.a.createElement("div",{style:B({opacity:e.open?"1":"0",transform:e.open?"scale(1)":"scale(0)",transition:e.open?"opacity 0s linear, transform .2s linear":"opacity 0.2s linear 0s, transform 0s linear 0s"},W,K)},l.a.createElement(ce,null),e.open&&l.a.createElement("div",{style:{marginTop:"44px",zIndex:1202}},l.a.createElement(N.Spinner,{size:"lg"})),l.a.createElement("div",{style:B({},se,a,{position:"absolute"})},l.a.createElement("img",{width:"100%",height:"auto",src:r,alt:""}))):null},ue="over.inline_editor",de={NAVIGATION_START:"navigationStart",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading"},pe={DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED:"domContentLoaded",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"},fe=B({},de,pe);var me=function(e){var t=e.projectSize,n=Object(c.useMemo)((function(){return z({width:window.innerWidth,height:window.innerHeight},t||{height:2048,width:2048})}),[]);return l.a.createElement("div",{style:B({},K,W,{backgroundColor:H.white})},l.a.createElement(ce,null),l.a.createElement("div",{style:{marginTop:"44px",zIndex:1202}},l.a.createElement("div",{style:B({},se,ie,{height:n.height,width:n.width})},l.a.createElement(N.Spinner,{size:"lg"}))))};function he(){var e=new URL(window.location.toString());e.searchParams.delete("sessionId"),window.history.pushState({},document.title,e.toString());var t=new Event("pushstate");window.dispatchEvent(t)}function ge(){var e=localStorage.getItem("owcLiveVersion");return e||F.a.parse(window.location.search).owcLiveVersion}function ve(){return"local"===ge()}function be(){var e,t=(e=window.location.hostname).substring(e.lastIndexOf(".",e.lastIndexOf(".")-1)+1).toLowerCase();if(ve())return"https://overlocal.test-godaddy.com:1235";var n=ge();if(n)return"https://"+n;switch(t){case"godaddy.com":case"secureserver.net":return"https://studio.godaddy.com";case"test-godaddy.com":case"test-secureserver.net":return"https://studio.test-godaddy.com";default:return"https://studio.dev-godaddy.com"}}var ye,Oe=function(){try{var e="studio-bundle-bootstrap";return document.getElementById(e)?Promise.resolve():Promise.resolve(function(e,t){var n=document.createElement("script");n.setAttribute("id",t),n.setAttribute("crossorigin","true");var r=new Promise((function(e,t){n.onload=function(){n.onload=null,n.onerror=null,e()},n.onerror=function(e){n.onload=null,n.onerror=null,t(e)}}));return n.src=e,document.body.appendChild(n),r}(be()+"/bundle-bootstrap.js?ts="+Date.now(),e)).then((function(){}))}catch(e){return Promise.reject(e)}};function Ee(e){return e?B({},e,{url:e.url?(t=e.url,0===t.indexOf("https")?t:"https:"+t):void 0}):void 0;var t}function _e(){if(window.navigator.userAgent.indexOf("GoDaddyPolaris")>-1)return!1;var e=!V.isMobile&&!V.isTablet,t=function(){if(void 0===HTMLCanvasElement.prototype.toBlob)return!1;try{var e=document.createElement("canvas");return void 0!==(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}}(),n=!!window.localStorage;return e&&t&&n}function Ie(e){var t=e.templateId,n=e.brandbookItem,r=e.websiteId,a=Object(c.useState)(!1),o=a[0],i=a[1];return Object(c.useEffect)((function(){o&&(t?window.location.href=function(e,t){return be()+"/app/editor/template/"+e+"?website="+t}(t,r):n&&(window.location.href=function(e,t){var n,r,a,o,i,s=(null===(n=e.sources)||void 0===n||null===(r=n.over)||void 0===r?void 0:r.projectId)||(null===(a=e.sources)||void 0===a||null===(o=a.over)||void 0===o||null===(i=o.metadata)||void 0===i?void 0:i.projectId);return s?be()+"/app/editor/"+s+"?website="+t+"&projectId="+s:be()+"/app/editor/brandbook?url="+e.url+"&height="+e.dimensions.height+"&width="+e.dimensions.width+"&website="+t}(n,r)))}),[o]),Object(c.useEffect)((function(){(t||n)&&(_e()||i(!0))}),[t,r,n]),o}function Se(e,t){var n=Object(c.useState)(!1),r=n[0],a=n[1],o=Object(c.useState)(e),i=o[0],s=o[1];return Object(c.useEffect)((function(){e&&!t?function(){try{return a(!0),Promise.resolve(fetch(("https://studio.godaddy.com"===be()?"https://asset.api.godaddy.com":"https://studio.test-godaddy.com"===be()||ve()?"https://asset.api.test-godaddy.com":"https://asset.api.dev-godaddy.com")+"/v1/asset?assetUrl="+(null==e?void 0:e.url),{credentials:"include",headers:{accept:"application/json"}})).then((function(e){var t=!1;function n(n){return t?n:e.json()}var r=function(){if(!e.ok)return Promise.resolve(e.text()).then((function(n){console.error(e.status+" error looking up asset URL: "+n),t=!0}))}();return r&&r.then?r.then(n):n(r)}))}catch(e){return Promise.reject(e)}}().then((function(t){var n,r,a;s(B({},e,{sources:{over:{metadata:{projectId:null==t||null===(n=t.metadata)||void 0===n||null===(r=n.sources)||void 0===r||null===(a=r.over)||void 0===a?void 0:a.projectId}}}}))})).finally((function(){a(!1)})):s(e)}),[null==e?void 0:e.url,t]),{isLookingUpAssetUrl:r,updatedWebsiteBuilderPayload:i}}var we=function(){function e(e){if("undefined"!=typeof window&&window.performance&&window.performance[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=window.performance)[e].apply(t,r)}}function t(e,t){return[ue,e,t].join("-")}function n(t){var n=e("getEntriesByName",t);if(n&&!(n.length<1))return n[0]}function r(e,r,a){var o=function(e){var r={};return Object.values(fe).forEach((function(a){r[a]=n(t(e,a))})),r}(e);function i(e,t){return o[e]&&o[e].startTime||t}var s={};Object.values(de).forEach((function(e){s[e]=i(e,r)}));var c={};return Object.values(pe).forEach((function(e){c[e]=i(e,a)})),B({page:"/beacon/"+ue+"/"+e},s,c)}function a(r){!function(r,a){var o=t(r,a);n(o)||e("mark",o)}(r,"start")}function o(a){if(a){var o=n(t(a,"start"));if(o){var i=t(a,"end");e("mark",i);var s,c,l=e("getEntriesByName",i)[0];s=r(a,o.startTime,l.startTime),c=["cmdLog","pageperf",s],window._trfq=window._trfq||[],window._trfq.push(c),function(n){n&&(Object.values(fe).forEach((function(r){return e("clearMarks",t(n,r))})),e("clearMarks",t(n,"start")),e("clearMarks",t(n,"end")))}(a)}}}return{markLaunchStart:function(){a("launch")},markLaunchEnd:function(){o("launch")},markBundleRequestStart:function(){a("bundle-request")},markBundleRequestEnd:function(){o("bundle-request")}}}(),Te=function(e){var t,n,r=Object(c.useState)(!1),a=r[0],o=r[1],i=Object(c.useState)(void 0!==(null===(t=window.over)||void 0===t?void 0:t.editor)),s=i[0],u=i[1],d=e.onCancel,p=e.open,f=e.onProjectSynced,m=e.template,h=e.brandbookItem,g=e.websiteBuilderPayload,v=e.websiteId,b=e.ventureId,y=e.tracker,O=e.showTextWarning,E=e.disableWamUpgrade,_=e.featureOverrides,I=function(){var e=Object(c.useState)(void 0),t=e[0],n=e[1],r=Object(c.useState)(void 0),a=r[0],o=r[1],i=Object(c.useState)(window.location.search),s=i[0],l=i[1];Object(c.useEffect)((function(){function e(){l(window.location.search)}return window.addEventListener("popstate",e,!1),window.addEventListener("pushstate",e,!1),function(){window.removeEventListener("popstate",e),window.removeEventListener("pushstate",e)}}),[]);var u=F.a.parse(s).sessionId;return Object(c.useEffect)((function(){o(t),n(u)}),[u]),{sessionId:t,previousSessionId:a}}(),S=I.sessionId,w=I.previousSessionId,T=function(e,t){var n=Object(c.useState)(!1),r=n[0],a=n[1],o=Object(c.useState)(!1),i=o[0],s=o[1];function l(){r||i||(a(!0),t.markBundleRequestStart(),Oe().then((function(){s(!0),t.markBundleRequestEnd()})).catch((function(e){console.error(e),a(!1)})))}return Object(c.useEffect)((function(){window.overConfig={isModal:!0,modalBase:be()},ye||(ye=setTimeout((function(){l()}),4e3)),e&&ye&&(window.clearTimeout(ye),l())}),[e]),i}(S,we),k=Ee(h),C=Ee(g),x=Ie({brandbookItem:k,templateId:null==m?void 0:m.id,websiteId:v}),D=Se(C,x),P=D.isLookingUpAssetUrl,j=D.updatedWebsiteBuilderPayload,M=p||!!S,L=m||k||j,R=Object(c.useCallback)((function(){he(),e.onCancel&&e.onCancel()}),[S,e.onCancel]),N=Object(c.useCallback)((function(e){he(),f(e)}),[S,f]);Object(c.useEffect)((function(){x||((L||S)&&o(!0),(null!=L&&L.id||p)&&function(){var e=new URL(window.location.toString());e.searchParams.set("sessionId",Object(A.v4)()),window.history.pushState({},document.title,e.toString());var t=new Event("pushstate");window.dispatchEvent(t)}())}),[null==L?void 0:L.id]),Object(c.useEffect)((function(){!S&&w&&d()}),[S,w]),Object(c.useEffect)((function(){o(!!(S||null!=L&&L.id))}),[S,null==L?void 0:L.id]),Object(c.useEffect)((function(){window.addEventListener("studio:editor.ready",U)}),[]);var U=function e(){u(!0),window.removeEventListener("studio:editor.ready",e)},V=null===(n=window.over)||void 0===n?void 0:n.editor;return l.a.createElement("div",null,m&&l.a.createElement(le,{id:m.id,projectSize:m.schemaPageSize,thumbnailUrl:m.thumbnails[0].servingUrl,open:a}),k&&l.a.createElement(le,{id:k.id,projectSize:k.dimensions,thumbnailUrl:k.thumbnailUrl,open:a}),a&&!L&&l.a.createElement(me,null),j&&j.thumbnailUrl&&l.a.createElement(le,{id:j.id,projectSize:j.size,thumbnailUrl:j.thumbnailUrl,open:a}),j&&!j.thumbnailUrl&&a&&l.a.createElement(me,{projectSize:null==g?void 0:g.size}),T&&V&&s&&(L||M)&&!P&&l.a.createElement("div",{id:"over-app-root"},l.a.createElement("div",{id:"over-portal"}),l.a.createElement("div",{id:"over-root",style:B({},K,{zIndex:1200,display:M?"block":"none"})},l.a.createElement(V,{templateId:null==m?void 0:m.id,brandbookItem:k,websiteBuilderPayload:j,open:M,onCancel:R,onProjectLoaded:function(){we.markLaunchEnd(),o(!1)},onProjectSynced:N,websiteId:v,ventureId:b,tracker:y,showTextWarning:O,sessionId:S,disableWamUpgrade:E,featureOverrides:_}))))},ke=n(27),Ce=n.n(ke),xe="gc",Ae="v7",De="ols",Pe="logo",je="header",Me="facebook",Le="instagram",Re="vimeo",Ne="wordpress",Ue="over",Fe="wsc",Ve="vnext-dashboard",Be=[xe,"venture",Ae,Ne],Ge=[xe,"venture",Ae,Me,Le,Ne],ze=[].concat(Ge,[Re]),He=[Me,Le],Ke={thumbnailSize:d.a.oneOfType([d.a.number,d.a.shape({width:d.a.number.isRequired,height:d.a.number.isRequired})]),minDimensions:d.a.shape({width:d.a.number,height:d.a.number}),preloadParams:d.a.string},We={trackEvent:d.a.func,postLog:d.a.func,selectItem:d.a.func,intl:d.a.object.isRequired,selectedItems:d.a.array,statusMessage:d.a.element},qe={config:d.a.object},Ye=d.a.oneOf([xe,De,Pe,je,Re,"documents"]),Xe={id:d.a.string,altText:d.a.string,references:d.a.arrayOf(d.a.string),dify:d.a.object,originalFilename:d.a.string,filename:d.a.string,basePath:d.a.string,dimensions:d.a.shape({width:d.a.number.isRequired,height:d.a.number.isRequired}),size:d.a.number,updatedAt:d.a.string,createdAt:d.a.string,imageUrl:d.a.string.isRequired,mediaType:d.a.string.isRequired,sourceType:d.a.oneOf([Ye,d.a.arrayOf(Ye)])},Qe="INDEX",$e="MY_UPLOADS",Ze="OLS_UPLOADS",Je="PHOTOSHOOT",et="MY_SITES",tt="LOGO_UPLOADS",nt="COVER_UPLOADS",rt="DOCUMENTS_UPLOADS",at="OVER_UPLOADS",ot="WSC_UPLOADS",it="IMAGE",st="VIDEO",ct="PDF",lt="WORD",ut="EXCEL",dt="PRODUCT",pt=[it,st,ct,lt,ut],ft="NEWEST",mt="/",ht="ols",gt="logo",vt="downloads",bt=n(34),yt=n.n(bt),Ot=new Set(["jpg","jpeg","png","gif","webp","svg","tif","tiff"]);function Et(e){var t=e.contentType,n=e.filename;if(!t&&(-1===n.indexOf("/")||n.split("/").shift()===ht)){var r=function(e){return(-1!==e.indexOf(".")&&e.split(".").pop()||"").toLowerCase()}(n);return r&&!Ot.has(r)?"UNKNOWN":it}return/^image/i.test(t)?it:/pdf$/i.test(t)?ct:["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(t)?lt:/^video/i.test(t)?st:["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t)?ut:"UNKNOWN"}function _t(e){return!Array.isArray(e)||(Object(P.isEmpty)(e)||e.every((function(e){return e.mediaType===it})))}function It(e){return Array.isArray(e)?!Object(P.isEmpty)(e)&&e.every((function(e){return e.mediaType===st})):!!e&&e.mediaType===st}function St(e,t){return Array.isArray(e)&&1===e.length&&e[0]===t}function wt(e){return Array.isArray(e)&&e.length>1&&e.includes(st)}function Tt(e){return Object(P.isEmpty)(e)?"image/*":e.map((function(e){switch(e){case it:return"image/*";case ct:return"application/pdf";case st:return"video/*";case lt:return".doc,.docx";case ut:return"text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";default:return""}})).filter((function(e){return""!==e})).join(",")}var kt=function(e){return e.ImageManager};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xt=function(e,t){var n=t.config,r=n.mediaTypes,a=n.featureFlags;return!r||!!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t={},h()(t,$e,n.enableVimeo?[st,it,ct]:[it,ct]),h()(t,Je,[it]),h()(t,et,[it]),h()(t,"STOCK_MEDIA",[st,it]),h()(t,"SOCIAL_MEDIA",n.enableSocialMediaCollection?[it]:[]),h()(t,Ze,[it]),h()(t,tt,[it]),h()(t,at,n.enableOverCollection?[it]:[]),h()(t,rt,[ct]),h()(t,nt,[it]),h()(t,"VIDEO_UPLOADS",[st]),h()(t,"IMAGE_UPLOADS",[it]),h()(t,ot,[it,ct,lt]),t);return r[e]}(e,a).filter((function(e){return-1!==r.indexOf(e)})).length},At=function(e){var t=e.config.mediaTypes,n=e.appOptions,r=n.appName,a=n.placement;if(St(t,ct))return[rt];if(St(t,dt))return["PRODUCTS"];if(r===Ve&&"LOGO"===a)return[tt];var o=[];(function(e){return xt($e,e)})(e)&&o.push($e),function(e){var t=e.config.mediaTypes;return t&&t.includes(it)}(e)&&o.push("IMAGE_UPLOADS"),function(e){var t=e.config.removeSources,n=e.otherSites.hasOthersites;return-1===t.indexOf(et)&&(n&&xt(et,e))}(e)&&o.push(et),function(e){return-1===e.config.removeSources.indexOf("STOCK_MEDIA")&&xt("STOCK_MEDIA",e)}(e)&&o.push("STOCK_MEDIA"),function(e){return-1===e.config.removeSources.indexOf("SOCIAL_MEDIA")&&xt("SOCIAL_MEDIA",e)}(e)&&o.push("SOCIAL_MEDIA"),function(e){var t=e.config.mediaTypes;return t&&t.length>1&&t.includes(st)}(e)&&o.push("VIDEO_UPLOADS");var i=[Ze,tt,nt,rt,at,ot,Je].filter((function(t){return xt(t,e)}));return o.concat(i)},Dt=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeCollections:At(kt(e))},kt(e).collections)},Pt=n(35),jt=n.n(Pt),Mt=jt()(["IM_API_STATUS_CHANGE","IM_CONFIG_LOAD","IM_IMAGE_PROGRESS","IM_IMAGES_STAGE","IM_IMAGES_UPLOAD","IM_IMAGES_UPLOADED","IM_IMAGES_LOAD","IM_FILES_DELETE","IM_FILES_UPLOAD","IM_IMAGES_DELETED","IM_IMAGES_COPY_INSERT","IM_IMAGES_SORT","IM_IMAGE_UPLOAD_FAIL","IM_OPEN_MODAL","IM_STOCK_IMAGES_POPULATE","IM_STOCK_IMAGES_SEARCH","IM_STOCK_IMAGES_RESET","IM_STOCK_IMAGES_NEXTPAGE","IM_STOCK_VIDEOS_POPULATE","IM_STOCK_VIDEOS_SEARCH","IM_STOCK_VIDEOS_RESET","IM_VIDEOS_UPLOAD","IM_VIDEOS_DELETE","IM_VIDEOS_LOAD","IM_VIDEOS_LOAD_MORE","IM_VIDEOS_EDIT","IM_VIDEO_REFRESH","IM_VIDEOS_SEARCH","IM_VIDEOS_GET_USER","IM_VIDEO_PROGRESS","IM_VIDEO_STAGE","IM_VIDEO_UPLOAD_COMPLETE","IM_VIDEOS_REFRESH_START","IM_VIDEOS_REFRESH_END","IM_MODAL_HIDE","IM_SWITCH_TAB","IM_INSERT_ITEMS","IM_PRE_INSERT_ITEMS","IM_SITE_IMAGES_LOAD","IM_VIEWABLE_SITES_NEXTPAGE","IM_GC_FIRST_SITE_IMAGES_LOAD","IM_TRACK","IM_SOCIAL_ACCESS_TOKEN_GET","IM_SOCIAL_ACCESS_TOKEN_POPULATE","IM_SOCIAL_AUTH_URL_POPULATE","IM_SOCIAL_FB_PAGES_LOAD","IM_SOCIAL_FB_ALBUMS_LOAD","IM_SOCIAL_FB_PHOTOS_LOAD","IM_SOCIAL_FB_PAGE_SWITCH","IM_SOCIAL_FB_ALBUM_SWITCH","IM_SOCIAL_FB_LOAD_START","IM_SOCIAL_FB_LOAD_END","IM_SOCIAL_IG_LOAD_END","IM_SOCIAL_IG_LOAD_START","IM_SOCIAL_SWITCH_PROVIDER","IM_SOCIAL_IG_POST_LOAD","IM_PLAN_FEATURES_GET","IM_PERF_TRACK_BEGIN","IM_PERF_TRACK_END","IM_PERF_TRACK_END_DONE","IM_PERF_LOAD_VENTURE","IM_PERF_LOAD_VENTURE_END","IM_UPLOADED_IMAGES_POPULATE","IM_IMAGE_METADATA_UPDATE","IM_IMAGE_METADATA_UPDATED","IM_IMAGE_SELECTED_METADATA_UPDATED","IM_CONTAINER_MANIFEST_POPULATE","IM_PAGE_DIMENSIONS_GET","IM_DIMENSIONS_BATCH_RETRIEVED","IM_DONE_LOADING_DIMENSIONS","IM_ASSET_SEARCH","IM_ASSET_SEARCH_DONE","IM_UPDATE_COVER_IMAGE","IM_TOGGLE_FIV","IM_LOGGER_INFO","IM_LOGGER_WARN","IM_LOGGER_ERROR","IM_DEBUG","IM_SELECTION_MULTI_SELECT","IM_SELECTION_ITEM_CLICKED","IM_SELECTION_ITEM_SHIFT_CLICKED","IM_SELECTION_RANGE_SELECT","IM_SELECTION_CLEAR_ALL","IM_VIMEO_GET_LINK","IM_VIMEO_SHOW_MODAL","IM_VIMEO_HIDE_MODAL","IM_DRAG_DROP_FILES_REJECTED","IM_OPEN_UPLOAD_NOTIFICATION","IM_CLOSE_UPLOAD_NOTIFICATION","IM_COLLECTION_VIEW_SET_CURRENT","IM_INSERT_PRODUCTS","IM_VIDEOS_TRIGGER_LOAD_MORE","IM_MIXED_ASSET_NEXT_PAGE","IM_SET_VIDEO_FLYOUT","IM_ASSET_CONTAINER_ID_SET","IM_VIDEOS_USER_RECONNECT","IM_IMAGES_RESET_RECENT","IM_VIDEOS_RESET_RECENT","IM_OPEN_VIDEO_SELECTOR_MODAL","IM_LOAD_OTHER_MEDIA","IM_SPAQ_INIT","IM_SPAQ_LOG","IM_SPAQ_LOG_DONE","IM_TRACE_AUDIT_EVENT_START","IM_TRACE_AUDIT_EVENT_END","IM_TRACK_USAGE"]),Lt=Mt.IM_API_STATUS_CHANGE,Rt=Mt.IM_ASSET_SEARCH,Nt=Mt.IM_ASSET_SEARCH_DONE,Ut=Mt.IM_CONTAINER_MANIFEST_POPULATE,Ft=Mt.IM_DIMENSIONS_BATCH_RETRIEVED,Vt=Mt.IM_DONE_LOADING_DIMENSIONS,Bt=Mt.IM_GC_FIRST_SITE_IMAGES_LOAD,Gt=Mt.IM_IMAGE_METADATA_UPDATED,zt=Mt.IM_IMAGE_SELECTED_METADATA_UPDATED,Ht=Mt.IM_IMAGE_PROGRESS,Kt=Mt.IM_IMAGE_UPLOAD_FAIL,Wt=Mt.IM_IMAGES_COPY_INSERT,qt=Mt.IM_IMAGES_RESET_RECENT,Yt=Mt.IM_IMAGES_LOAD,Xt=Mt.IM_FILES_DELETE,Qt=Mt.IM_FILES_UPLOAD,$t=Mt.IM_IMAGES_DELETED,Zt=Mt.IM_IMAGES_UPLOAD,Jt=Mt.IM_VIDEOS_UPLOAD,en=Mt.IM_VIDEO_STAGE,tn=Mt.IM_VIDEOS_DELETE,nn=Mt.IM_VIDEOS_LOAD,rn=Mt.IM_VIDEOS_LOAD_MORE,an=Mt.IM_VIDEOS_TRIGGER_LOAD_MORE,on=Mt.IM_VIDEOS_EDIT,sn=Mt.IM_VIDEO_REFRESH,cn=Mt.IM_VIDEOS_GET_USER,ln=Mt.IM_VIDEO_PROGRESS,un=Mt.IM_VIDEO_UPLOAD_COMPLETE,dn=Mt.IM_VIDEOS_REFRESH_START,pn=Mt.IM_VIDEOS_REFRESH_END,fn=Mt.IM_VIDEOS_SEARCH,mn=Mt.IM_VIDEOS_USER_RECONNECT,hn=Mt.IM_VIDEOS_RESET_RECENT,gn=Mt.IM_IMAGES_UPLOADED,vn=Mt.IM_IMAGES_SORT,bn=Mt.IM_IMAGES_STAGE,yn=Mt.IM_PRE_INSERT_ITEMS,On=Mt.IM_INSERT_PRODUCTS,En=Mt.IM_LOGGER_INFO,_n=Mt.IM_LOGGER_WARN,In=Mt.IM_LOGGER_ERROR,Sn=Mt.IM_DEBUG,wn=Mt.IM_MODAL_HIDE,Tn=Mt.IM_OPEN_MODAL,kn=Mt.IM_PAGE_DIMENSIONS_GET,Cn=Mt.IM_PERF_TRACK_BEGIN,xn=Mt.IM_PERF_TRACK_END,An=Mt.IM_PERF_TRACK_END_DONE,Dn=Mt.IM_PERF_LOAD_VENTURE,Pn=Mt.IM_PERF_LOAD_VENTURE_END,jn=Mt.IM_PLAN_FEATURES_GET,Mn=Mt.IM_SITE_IMAGES_LOAD,Ln=Mt.IM_SOCIAL_ACCESS_TOKEN_GET,Rn=Mt.IM_SOCIAL_ACCESS_TOKEN_POPULATE,Nn=Mt.IM_SOCIAL_AUTH_URL_POPULATE,Un=Mt.IM_SOCIAL_FB_ALBUM_SWITCH,Fn=Mt.IM_SOCIAL_FB_ALBUMS_LOAD,Vn=Mt.IM_SOCIAL_FB_LOAD_END,Bn=Mt.IM_SOCIAL_FB_LOAD_START,Gn=Mt.IM_SOCIAL_FB_PAGE_SWITCH,zn=Mt.IM_SOCIAL_FB_PHOTOS_LOAD,Hn=Mt.IM_SOCIAL_IG_LOAD_END,Kn=Mt.IM_SOCIAL_IG_LOAD_START,Wn=Mt.IM_SOCIAL_SWITCH_PROVIDER,qn=Mt.IM_SOCIAL_IG_POST_LOAD,Yn=Mt.IM_STOCK_IMAGES_NEXTPAGE,Xn=Mt.IM_STOCK_IMAGES_POPULATE,Qn=Mt.IM_STOCK_IMAGES_SEARCH,$n=Mt.IM_STOCK_IMAGES_RESET,Zn=Mt.IM_STOCK_VIDEOS_POPULATE,Jn=Mt.IM_STOCK_VIDEOS_SEARCH,er=Mt.IM_STOCK_VIDEOS_RESET,tr=Mt.IM_TOGGLE_FIV,nr=Mt.IM_TRACK,rr=Mt.IM_UPDATE_COVER_IMAGE,ar=Mt.IM_VIEWABLE_SITES_NEXTPAGE,or=Mt.IM_SELECTION_MULTI_SELECT,ir=Mt.IM_SELECTION_ITEM_SHIFT_CLICKED,sr=Mt.IM_SELECTION_CLEAR_ALL,cr=Mt.IM_SELECTION_ITEM_CLICKED,lr=Mt.IM_SELECTION_RANGE_SELECT,ur=Mt.IM_VIMEO_GET_LINK,dr=Mt.IM_VIMEO_SHOW_MODAL,pr=Mt.IM_VIMEO_HIDE_MODAL,fr=Mt.IM_DRAG_DROP_FILES_REJECTED,mr=Mt.IM_OPEN_UPLOAD_NOTIFICATION,hr=Mt.IM_CLOSE_UPLOAD_NOTIFICATION,gr=Mt.IM_COLLECTION_VIEW_SET_CURRENT,vr=Mt.IM_MIXED_ASSET_NEXT_PAGE,br=Mt.IM_SET_VIDEO_FLYOUT,yr=Mt.IM_ASSET_CONTAINER_ID_SET,Or=Mt.IM_OPEN_VIDEO_SELECTOR_MODAL,Er=Mt.IM_LOAD_OTHER_MEDIA,_r=Mt.IM_SPAQ_INIT,Ir=Mt.IM_SPAQ_LOG,Sr=Mt.IM_SPAQ_LOG_DONE,wr=Mt.IM_TRACE_AUDIT_EVENT_START,Tr=Mt.IM_TRACE_AUDIT_EVENT_END,kr=Mt.IM_TRACK_USAGE,Cr=function(e){return{type:Tn,payload:e}},xr=function(e){return{type:Or,payload:e}},Ar=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{type:Lt,payload:{key:e,status:t,payload:n,requestArgs:r}}},Dr=function(e){return{type:Qn,payload:{query:e}}},Pr=function(){return{type:$n}},jr=function(e){return{type:Yn,payload:{nextPageUrl:e}}},Mr=function(e){return{type:Jn,payload:{query:e}}},Lr=function(){return{type:er}},Rr=function(e){return{type:bn,payload:e}},Nr=function(e){return{type:Zt,payload:e}},Ur=function(){return{type:Yt}},Fr=function(){return{type:qt}},Vr=function(e){return{type:Qt,payload:e}},Br=function(e){return{type:Jt,payload:e}},Gr=function(){return{type:nn}},zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;return{type:fn,payload:{search:t}}},Hr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=e.pageSize,r=e.search;return{type:rn,payload:{page:t,pageSize:n,search:r}}},Kr=function(e){return{type:on,payload:e}},Wr=function(e){return{type:sn,payload:e}},qr=function(){return{type:hn}},Yr=function(){return{type:cn}},Xr=function(e){var t=e.redirectAction,n=e.videoId;return{type:ur,payload:{redirectAction:t,videoId:n}}},Qr=function(e){return{type:dr,payload:e}},$r=function(){return{type:pr}},Zr=function(e){return{type:Xt,payload:e}},Jr=function(e){return{type:vn,payload:e}},ea=function(e){return{type:Ht,payload:e}},ta=function(e){return{type:ln,payload:e}},na=function(e){return{type:un,payload:e}},ra=function(e){return{type:tn,payload:e}},aa=function(){return{type:dn}},oa=function(){return{type:pn}},ia=function(e){return{type:Kt,payload:e}},sa=function(){return{type:wn}},ca=function(e){return{type:Xn,payload:e}},la=function(e){return{type:Zn,payload:e}},ua=function(e){var t=e.selectedItems,n=e.placement,r=e.fromPostLogo;return{type:yn,payload:{selectedItems:t,placement:n,fromPostLogo:void 0!==r&&r}}},da=function(e){return{type:Mn,payload:e}},pa=function(e){return{type:Wt,payload:e}},fa=function(){return{type:Bt}},ma=function(e){return{type:nr,payload:e}},ha=function(e){return{type:Ln,socialProvider:e}},ga=function(e){var t=e.socialProvider,n=e.accessToken;return{type:Rn,payload:{socialProvider:t,accessToken:n}}},va=function(e){var t=e.socialProvider,n=e.authUrl;return{type:Nn,payload:{socialProvider:t,authUrl:n}}},ba=function(e){return{type:Wn,payload:{socialProvider:e}}},ya=function(){return{type:qn}},Oa=function(){return{type:Kn}},Ea=function(){return{type:Hn}},_a=function(e){return{type:Gn,payload:e}},Ia=function(e){return{type:Un,payload:e}},Sa=function(e){return{type:Fn,payload:e}},wa=function(e){return{type:zn,payload:e}},Ta=function(){return{type:Bn}},ka=function(){return{type:Vn}},Ca=function(){return{type:jn}},xa=function(e){return{type:cr,payload:e}},Aa=function(){return{type:sr}},Da=function(e){var t=e.dataSource,n=e.item,r=e.selectionLimit,a=e.enableDelete;return{type:ir,payload:{item:n,dataSource:t,selectionLimit:r,enableDelete:a}}},Pa=function(e){var t=e.items,n=e.selectionLimit,r=e.allowUnlimitedSelect;return{type:lr,payload:{items:t,selectionLimit:n,allowUnlimitedSelect:r}}},ja=function(e){return{type:or,payload:e}},Ma=function(e,t){return{type:Cn,payload:{eventName:e,meta:t}}},La=function(e,t){return{type:xn,payload:{eventName:e,meta:t}}},Ra=function(){return{type:Dn}},Na=function(){return{type:Pn}},Ua=function(){return{type:An}},Fa=function(e){return{type:gn,payload:e}},Va=function(e){return{type:$t,payload:e}},Ba=function(e){return{type:Gt,payload:e}},Ga=function(e){return{type:zt,payload:e}},za=function(e){return{type:Ut,payload:e}},Ha=function(e){return{type:kn,payload:e}},Ka=function(e){return{type:Ft,payload:e}},Wa=function(){return{type:Vt}},qa=function(e){return{type:Rt,payload:e}},Ya=function(e){return{type:Nt,payload:e}},Xa=function(){return qa({searchText:""})},Qa=function(e){return{type:rr,payload:e}},$a=function(e){return{type:tr,payload:e}},Za=function(e){var t=e.message,n=e.meta;return{type:En,payload:{message:t,meta:n}}},Ja=function(e){var t=e.error,n=e.message,r=e.meta;return{type:_n,payload:{error:t,message:n,meta:r}}},eo=function(e){var t=e.error,n=e.message,r=e.meta;return{type:In,payload:{error:t,message:n,meta:r}}},to=function(e){return{type:Sn,payload:e}},no=function(){return{type:ar}},ro=function(e){return{type:fr,payload:e}},ao=function(){return{type:mr}},oo=function(){return{type:hr}},io=function(e){return{type:gr,payload:e}},so=function(e){return{type:On,products:e}},co=function(){return{type:an}},lo=function(e){return{type:vr,payload:{pageId:e}}},uo=function(e){return{type:br,payload:e}},po=function(e){return{type:yr,payload:{assetContainerId:e}}},fo=function(e){return{type:en,payload:e}},mo=function(){return{type:mn}},ho=function(){return{type:Er}},go=function(e){return{type:_r,payload:e}},vo=function(){return{type:Ir}},bo=function(){return{type:Sr}},yo=function(e){return{type:wr,payload:e}},Oo=function(e){return{type:Tr,payload:e}},Eo=function(){return{type:kr}},_o=n(18),Io=n.n(_o),So=n(38),wo=n.n(So),To=n(49),ko=n.n(To),Co=n(25),xo=n.n(Co),Ao=n(36),Do=n.n(Ao),Po=n(50),jo=n.n(Po),Mo=n(28),Lo=n.n(Mo),Ro=n(52),No=n.n(Ro),Uo=n(32),Fo=n.n(Uo),Vo=n(30),Bo=n.n(Vo),Go=n(53),zo=n.n(Go),Ho=n(16),Ko=n.n(Ho),Wo=n(29),qo=n.n(Wo),Yo=n(39),Xo=n.n(Yo),Qo=n(8),$o=n.n(Qo),Zo=n(54),Jo=n.n(Zo),ei=n(75),ti=n(76),ni=n.n(ti);function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var ai=function(e){I()(n,e);var t=ri(n);function n(){var e;return v()(this,n),(e=t.apply(this,arguments)).state={hasScrolled:!1},e.scrollableParent=null,e.containerRef=e.containerRef.bind(E()(e)),e.handleScroll=e.handleScroll.bind(E()(e)),e.throttledScrollHandler=Object(P.throttle)(e.handleScroll,100),e}return y()(n,[{key:"parentContainer",value:function(){return this.props.enableFullScroll?window:document.querySelector("div.image-modal div.modal.fade.show div.modal-body")}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.throttledSetHeight);var e=this.parentContainer();e&&e.addEventListener("scroll",this.throttledScrollHandler,{passive:!0})}},{key:"componentWillUnmount",value:function(){var e=this.parentContainer();e&&e.removeEventListener("scroll",this.throttledScrollHandler,{passive:!0}),window.removeEventListener("resize",this.throttledSetHeight)}},{key:"containerRef",value:function(e){e?(this.scrollableParent=e,this.scrollableParent.addEventListener("scroll",this.throttledScrollHandler,{passive:!0})):this.scrollableParent&&(this.scrollableParent.removeEventListener("scroll",this.throttledScrollHandler,{passive:!0}),this.scrollableParent=null)}},{key:"handleScroll",value:function(){var e=this.props,t=e.onScrollEnd,n=e.hasGalleryOverlay,r=e.enableFullScroll;if(!n&&(r||this.scrollableParent)){var a=r?this.scrollableParent.getBoundingClientRect().top<150:this.parentContainer().scrollTop>300;this.setState({hasScrolled:a}),this.isScrollCloseToEnd()&&t&&t()}}},{key:"isScrollCloseToEnd",value:function(){var e,t,n=this.props,r=n.scrollEndTriggerDistance,a=n.enableFullScroll,o=this.scrollableParent;if(!a&&!o)return!1;if(o){var i=o.getBoundingClientRect();e=i.top,t=i.height}var s=document,c=s.documentElement,l=s.documentElement.clientHeight;return(a?window.scrollY:Math.abs(e))+l>=(a?c.scrollHeight:t)-r}},{key:"renderBackToTopButton",value:function(){var e=this,t=this.state.hasScrolled,n=this.props.onBackToTopButtonClick;return l.a.createElement("div",{className:$o()("scrolltop-container header-position",{"has-scrolled":t})},l.a.createElement("div",{className:"scrolltop-button primary",onClick:function(){n?n():e.parentContainer().scrollTo({top:0,left:0,behavior:"smooth"})}},l.a.createElement("span",{className:"icon-chevron-up"},l.a.createElement(ni.a,{height:14,width:14})),l.a.createElement(p.FormattedMessage,{id:"BACK_TO_TOP"})))}},{key:"render",value:function(){var e=this.props,t=e.hideBackToTop,n=e.className,r=e.dataAid,a=e.children,o=e.style;return l.a.createElement("ul",{ref:this.containerRef,className:n,"data-aid":r,style:o},!t&&this.renderBackToTopButton(),l.a.Children.toArray(a))}}]),n}(c.Component);ai.propTypes={onScrollEnd:d.a.func,scrollEndTriggerDistance:d.a.number,children:d.a.array,totalCount:d.a.number,containerElementType:d.a.string,className:d.a.string,style:d.a.object,dataAid:d.a.string,enableFullScroll:d.a.bool,hasGalleryOverlay:d.a.bool,hideBackToTop:d.a.bool},ai.defaultProps={scrollEndTriggerDistance:50};var oi=ai,ii=n(77),si=n.n(ii),ci=n(26),li=n.n(ci),ui=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=navigator.userAgent,n=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1;if(e){var r=!!window.MSInputMethodContext&&!!document.documentMode||/Edge/.test(t);return r}return n};function di(e){var t=e.url,n=e.width,r=e.height;if(!n&&!r)return t;var a=[];return n&&a.push("w:".concat(n)),r&&a.push("h:".concat(r)),"".concat(t,"/:/rs=").concat(a.join(","),",m")}function pi(e){return di({url:e,height:175})}var fi=function(e){return!e||-1!==e.indexOf("default_")},mi="full-image-view-insert",hi="full-image-view-update-cover-image",gi="full-image-view-close",vi="full-image-view-delete",bi="connect_fb_button",yi="asset_thumbnail",Oi="view_image_icon",Ei="upload-collection",_i="ols-collection",Ii="over-collection",Si="cover-collection",wi="logo-collection",Ti="photoshoot-collection",ki="wsc-collection",Ci="documents-collection",xi="facebook-collection",Ai="instagram-collection",Di="other-sites-collection",Pi="videos-collection",ji="vimeo-connect-modal",Mi="vimeo_edit_cta_linkbutton",Li="vimeo_edit_cta_icon",Ri="vimeo_learn_more_button",Ni="add_description_button",Ui="over_edit_cta",Fi="video_selector_save_url",Vi="video_selector_cta";function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:992,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return!!t||!(!window||!window.matchMedia)&&!window.matchMedia("(min-width: ".concat(e,"px)")).matches}function Gi(e){var t=e.styles,n=e.hasIrregularDims,r=e.src,a=e.dataAid,i=e.draggable,s=e.onThumbnailClick,c=e.isSelected,u=e.renderDarkOverlay,d=e.isImage,p={src:r,draggable:i};return n?l.a.createElement("div",{onClick:s,style:t,"data-aid":a,className:$o()("irregular-container",{"primary-border":c})},u&&l.a.createElement("div",{className:"asset-overlay no-gradient"}),l.a.createElement("img",o()({className:$o()({"active-selector-item":c,"checkered-background":d})},p,{alt:""}))):l.a.createElement("div",{className:"thumbnail-img-container",onClick:s,"data-aid":a},u&&l.a.createElement("div",{className:"asset-overlay no-gradient"}),l.a.createElement("img",o()({key:Date.now(),role:"presentation",style:t,className:$o()("img-container",{"active-selector-item primary-border":c,"checkered-background":d})},p,{alt:""})))}Gi.propTypes={styles:d.a.object,hasIrregularDims:d.a.bool,imgProps:d.a.object,onThumbnailClick:d.a.func,isSelected:d.a.bool,isImage:d.a.bool,src:d.a.string,draggable:d.a.bool,dataAid:d.a.string};var zi=Gi;function Hi(e){var t=e.id,n=e.src,r=e.productName,a=e.productPrice,o=e.salePrice,i=e.onThumbnailClick,s=e.isSelected;return l.a.createElement("div",{className:$o()("product-card-container",{"selected-product primary-border":s}),onClick:i},l.a.createElement("div",{className:$o()("product-selected-indicator primary-background",{"is-active":s})},l.a.createElement(li.a,{fill:"white"})),l.a.createElement("div",{className:"product-image-container"},l.a.createElement("img",{className:"product-image",alt:t,src:n})),l.a.createElement("div",{className:"product-info-container"},l.a.createElement("div",{className:"product-name"},r),l.a.createElement("div",{className:"product-price primary"},o?l.a.createElement(l.a.Fragment,null,l.a.createElement("strike",{className:"gray-light"},a)," ",o):a)))}Hi.propTypes={id:d.a.string,src:d.a.string.isRequired,productName:d.a.string.isRequired,productPrice:d.a.string.isRequired,onThumbnailClick:d.a.func,isSelected:d.a.bool};var Ki=Hi,Wi=n(78),qi=n.n(Wi);function Yi(e){var t=e.label,n=e.icon,r=e.dark,a=e.alignLeft,o=n;return l.a.createElement("div",{className:$o()("media-label-container",{"align-left":a})},l.a.createElement("div",{className:$o()("media-type-label",{dark:r})},t),n&&!a&&l.a.createElement(o,{height:20,width:20,fill:r?"black":"white"}))}Yi.propTypes={label:d.a.string.isRequired,icon:d.a.elementType,dark:d.a.bool},Yi.defaultProps={dark:!1};var Xi=Yi,Qi="embed",$i="modal";function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Ji=function(e){I()(n,e);var t=Zi(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e,t=this.props,n=t.mediaType,r=t.filename,a=t.hideMediaTypeLabel,o=t.renderMode,i=t.isProcessedVideo,s=t.isErroredVideo,c=n===st,u=c?Fo.a:Bo.a,d=c&&!Bi(768)||!c;return e=i&&!Bi(768)?l.a.createElement("div",{className:"ready-tag primary"},l.a.createElement("span",null,l.a.createElement(li.a,{height:14,width:14,fill:"currentColor"})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:"READY_TO_USE"}))):s?l.a.createElement("div",{className:"error-message"},l.a.createElement("div",null,l.a.createElement(qi.a,{className:"text-error"}),l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}))),!Bi(768)&&l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"REMOVE_AND_RETRY_VIDEO"}))):c?l.a.createElement("div",null,l.a.createElement("div",{className:"processing-spinner"},l.a.createElement(M.a,{size:"xs",inline:!0}),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:"PROCESSING"}))),l.a.createElement("div",{className:"transcoding-overlay"},l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"VIDEO_NOT_READY"})),!Bi(768)&&l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"WAIT_FOR_VIDEO"})))):null,l.a.createElement("div",{className:$o()("asset-loading",{"video-placeholder":c,"product-background":o===Qi})},!a&&!c&&l.a.createElement(Xi,{label:n,dark:!0}),!s&&l.a.createElement("div",{className:"loading-message"},d&&l.a.createElement("span",{className:"asset-icon"},l.a.createElement(u,{fill:"#000"})),l.a.createElement("p",null,r)),e)}}]),n}(l.a.Component);Ji.propTypes={mediaType:d.a.string.isRequired,filename:d.a.string.isRequired,hideMediaTypeLabel:d.a.bool,isProcessedVideo:d.a.bool,isErroredVideo:d.a.bool},Ji.defaultProps={hideMediaTypeLabel:!1};var es=Ji,ts="info",ns="warn",rs="error";function as(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var os=function(e){I()(n,e);var t=as(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.pdf=null,r.canvas=l.a.createRef(),r.state={currentPageIndex:1,isLoading:!0,pdfWidth:0,pdfHeight:0},r}return y()(n,[{key:"componentDidMount",value:function(){this.renderPdf()}},{key:"componentDidUpdate",value:function(e){e.url!==this.props.url&&(this.pdf=null,this.renderPdf())}},{key:"getPdf",value:function(){var e=this,t=this.props.url;return this.pdf?Promise.resolve(this.pdf):function(e){return yt.a.get(e,{responseType:"arraybuffer"}).then((function(e){return e.data})).catch((function(){return null}))}(t).then((function(t){return window.pdfjsLib.getDocument({data:t}).promise.then((function(t){return e.pdf=t,t}))}))}},{key:"getFullScreenDefaultScale",value:function(){var e=this.state,t=e.pdfWidth,n=e.pdfHeight;return Math.min(.8*window.innerWidth/t,.7*(window.innerHeight-80)/n)}},{key:"renderPdf",value:function(){var e=this;if(window.pdfjsLib){var t=this.state.currentPageIndex,n=this.props,r=n.onLoad,a=n.style,o=n.postLog,i=n.url;this.getPdf().then((function(n){r&&r(),n.getPage(t).then((function(t){var n=t.getViewport({scale:1}),r=n.width,o=n.height;e.setState({pdfWidth:r,pdfHeight:o,isLoading:!1},(function(){var n=a&&a.height?a.height/o:e.getFullScreenDefaultScale(),r=t.getViewport({scale:n}),i=e.canvas.current,s=i.getContext("2d");i.height=r.height,i.width=r.width;var c={canvasContext:s,viewport:r};t.render(c)}))}))})).catch((function(e){o&&o({level:ns,message:"Failed to load or render a pdf",meta:{url:i},error:e})}))}else this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.isSelected,a=e.onClick,o=e.filename,i=e.showLabelOverlay,s=e.renderMode,c=e.alignLeft,u=this.state.isLoading,d=u?"none":"block";return l.a.createElement("div",{style:t,className:$o()("pdf-viewer",n,{"active-selector-item primary-border":r}),onClick:a},u&&l.a.createElement(es,{mediaType:ct,filename:o,renderMode:s}),l.a.createElement("div",{style:{display:d}},i&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"asset-overlay"}),l.a.createElement(Xi,{label:ct,icon:Bo.a,alignLeft:c})),l.a.createElement("canvas",{ref:this.canvas})))}}]),n}(l.a.Component),is=os;function ss(e){var t=e.docType,n=e.isSelected,r=e.className,a=e.filename,o=e.style;return l.a.createElement("div",{style:o,className:$o()("pdf-viewer",r,{"primary-border":n})},l.a.createElement(es,{filename:a,hideMediaTypeLabel:!0}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"asset-overlay"}),l.a.createElement(Xi,{label:t,icon:Bo.a})))}os.defaultProps={showLabelOverlay:!0},os.propTypes={onLoad:d.a.func,url:d.a.string,style:d.a.object,showLabelOverlay:d.a.bool,className:d.a.string,onClick:d.a.func,isSelected:d.a.bool,filename:d.a.string,postLog:d.a.func},ss.propTypes={docType:d.a.string.isRequired,filename:d.a.string.isRequired,className:d.a.string,isSelected:d.a.bool,style:d.a.object};var cs=ss,ls=n(55),us=n.n(ls),ds=n(79),ps=n.n(ds);function fs(e){var t=e.type,n=e.connected,r=e.trackEvent,a=e.openEditLink,o=e.showVimeoModal,i=function(){n?a():o();var e="IM_TRACK_VIMEO_EDIT_CTA_".concat(t,"_CLICK").toUpperCase();r(e)};return"link"===t?l.a.createElement("span",{className:"primary vimeo-cta-link-button",onClick:i,"data-aid":Mi},l.a.createElement(p.FormattedMessage,{id:"VIDEO_SETTINGS"}),l.a.createElement(us.a,{width:18,height:18,fill:"currentColor"})):l.a.createElement("span",{className:"settings-icon product-dark-border",onClick:i,"data-aid":Li},l.a.createElement(ps.a,{fill:"currentColor"}))}fs.propTypes={type:d.a.oneOf(["icon","link"]),trackEvent:d.a.func,connected:d.a.bool,showVimeoModal:d.a.func,openEditLink:d.a.func};var ms=fs,hs=n(19),gs=n.n(hs);function vs(e,t){return e===t}function bs(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}function ys(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}var Os=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=0,i=r.pop(),s=ys(r),c=e.apply(void 0,[function(){return o++,i.apply(null,arguments)}].concat(n)),l=e((function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return c.apply(null,e)}));return l.resultFunc=i,l.dependencies=s,l.recomputations=function(){return o},l.resetRecomputations=function(){return o=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vs,n=null,r=null;return function(){return bs(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Is(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _s(_s(_s({},Object(P.pick)(t,["intl","enableDelete","selectionLimit","preloadParams","minDimensions"])),n),{},{item:e})}function Ss(e){return e.basePath===ht}function ws(e){if(e){var t=[],n=[],r=[];return e.forEach((function(e){"UNKNOWN"===e.mediaType?r.push(e):(function(e){return e.basePath!==ht||e.sources&&e.sources.ols}(e)&&n.push(e),Ss(e)&&t.push(e))})),{gcImages:n,olsImages:t,notSupported:r}}}var Ts=function(e){return!!Array.isArray(e)&&(Object(P.isEmpty)(e)||e.every((function(e){return Object.prototype.hasOwnProperty.call(e,"id")})))},ks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=kt(e),r=n.search,a=void 0===r?{}:r,o=a.searchResults,i=[],s=Object(P.get)(kt(e),t,[]),c=t.join(".");if(o&&o[c]&&o[c].size){var l=o[c];i=(Array.isArray(s)?s:Object.values(s)).filter((function(e){return l.has(e.id)}))}return{searchResultDocuments:i}},Cs=function(e,t,n){var r=Array.isArray(e)?e:Object(P.toArray)(e);return gs()(r.sort((function(e,r){return a=r,o=t===ft,i=new Date(n(e)),s=new Date(n(a)),o?s-i:i-s;var a,o,i,s})))};function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ds=function(e){return kt(e).planFeatures},Ps=function(e){return kt(e).appContext},js=function(e){var t=kt(e).config,n=void 0===t?{}:t,r=(Ds(e)||{}).planFeatures,a=n.websiteId,o=n.accountId,i=n.ventureId,s=n.websiteType,c=r&&"disabled"===r.website,l=i||a||o;return Object.assign(n,{isWebsitelessContainer:!a,containerId:l,inWebsiteContext:Boolean(a&&"external"!==s&&!c)})},Ms=function(e){return kt(e).appOptions},Ls=function(e){return kt(e).images},Rs=function(e){return kt(e).videos},Ns=function(e){return kt(e).products},Us=function(e){return kt(e).onboarding},Fs=function(e){return kt(e).collections},Vs=function(e){var t=function(e){return kt(e).stockImages}(e);return{stockImages:t.stock,stockTotalCount:t.stockTotalCount,isLoadingNextStock:t.isLoadingNextStock,isSearching:t.isSearching,stockNextPageUrl:t.stockNextPageUrl,stockImageQuery:t.stockImageQuery,pathToDataSource:[t.key,"stock"]}},Bs=function(e){var t=Ls(e),n=t.uploaded,r=t.uploadedImagesFetched,a=t.recentUploadedImages,o=t.stagingCount,i=t.staged,s=t.key,c=t.hasExistingSelection,l=t.isSavingMetadata,u=t.showSlowUploadNotification,d=t.isLoadingUploadedImages,p=t.deletedAllUploaded,f=[s,"uploaded"],m=function(e){var t=e.state,n=e.dataSource,r=void 0===n?[]:n,a=e.pathToDataSource,o=void 0===a?[]:a,i=kt(t).search,s=void 0===i?{}:i,c=s.searchText,l=void 0===c?"":c,u=s.pendingSearchText;if(!l)return{imagesAfterSearch:r,pendingSearchText:u,searchText:l};var d=ks(t,o).searchResultDocuments;return{imagesAfterSearch:void 0===d?[]:d,pendingSearchText:u,searchText:l}}({state:e,pathToDataSource:f,dataSource:n}),h=m.imagesAfterSearch,g=m.searchText,v=m.pendingSearchText,b=h;return{previewUploadedImages:h.slice(0,15),uploadedImages:b,uploadedImagesFetched:r,recentUploadedImages:a,stagingCount:o,staged:i,pathToDataSource:f,hasExistingSelection:!!c,shouldShowMetadata:Ts(n),hasUploaded:n&&n.length>0,searchText:g,pendingSearchText:v,isSavingMetadata:l,showSlowUploadNotification:u,isLoadingUploadedImages:d,deletedAllUploaded:p}},Gs=function(e){var t=Ls(e),n=t.olsImages,r=t.key,a=t.hasExistingSelection,o=kt(e).search,i=(o=void 0===o?{}:o).searchText,s=void 0===i?"":i,c=n&&n.length>0,l=[r,"olsImages"];if(!s)return{olsImages:n,pathToDataSource:l,hasExistingSelection:!!a,shouldShowMetadata:Ts(n),hasOLS:c};var u=ks(e,l).searchResultDocuments,d=void 0===u?[]:u,p=ks(e,[r,"uploaded"]).searchResultDocuments,f=void 0===p?[]:p;return{olsImages:gs()(new Set([].concat(gs()(d),gs()(f)).filter(Ss))),pathToDataSource:l,hasExistingSelection:!!a,shouldShowMetadata:Ts(n),hasOLS:c}},zs=function(e){return Bs(e).uploadedImages.filter((function(e){return[ct,lt,ut].includes(e.mediaType)}))},Hs=function(e,t,n){var r,a=function(e){if(e.references)return e.references.includes(t)},o=[];n.includes(it)&&(r=function(e){var t=Bs(e).uploadedImages,n=Gs(e).olsImages;return t.concat(n)}(e).filter(a)),n.some((function(e){return[ct,lt].includes(e)}))&&(o=zs(e).filter(a));var i=r.concat(o);return gs()(new Set(i))},Ks=function(e,t){return Hs(e,t,[it])},Ws=function(e){return Bs(e).uploadedImages.filter((function(e){return e.mediaType===it}))},qs=function(e){var t=Rs(e),n=t.vimeoUser,r=t.vimeoCreateCount,a=t.vimeoDraftCount,o=t.totalVideosInAccount,i=t.editVideoId,s=t.uploadedVideos,c=t.reconnectRequired;if(!n)return{};var l=n.uploadQuota,u=l&&l.periodic.free,d=l&&l.lifetime.free,p=s.filter((function(e){return e.isVimeoCreate})).length;return As(As({},n),{},{periodicFree:u,lifetimeFree:d,totalVideosInAccount:o,vimeoCreateCount:r,vimeoDraftCount:a,currentCreateCount:p,editVideoId:i,reconnectRequired:c})},Ys=function(e){var t=js(e).timeToStopRefreshingVideo,n=Rs(e).uploadedVideos,r=new Date;return n.filter((function(e){var n=e.status,a=e.transcode,o=(a=void 0===a?{}:a).status,i=e.imageUrl,s=void 0===i?"":i,c=e.modified_time;return"uploading_error"!==n&&"refresh_error"!==n&&("complete"!==o||!c||!!fi(s)&&r-new Date(c)<t)}))};function Xs(e){var t=e.status,n=e.imageUrl;return"available"===t&&!fi(void 0===n?"":n)}var Qs=Os(Rs,(function(e){var t=e.uploadedVideos,n=void 0===t?[]:t,r=e.uploadedVideosFetched,a=e.totalVideosLoaded,o=e.totalVideosInAccount,i=e.isLoadingMoreVideos,s=e.currentVideoFileUpload,c=e.uploadLink,l=e.key,u=e.videoUploadProgress,d=e.uploadedVideosSearchQuery,p=e.isRefreshingVideos,f=e.vimeoModalType,m=e.flyoutIsOpen,h=e.isVimeoLoading,g=e.vimeoCreateCount,v=e.vimeoDraftCount,b=[l,"uploadedVideos"],y=n.find(Xs),O=y?[y]:[];return{uploadedVideos:n,uploadLink:c,uploadedVideosFetched:r,hasUploaded:n.length>0,collectionPreviewVideos:O,totalVideosLoaded:a,totalVideosInAccount:o,isLoadingMoreVideos:i,pathToDataSource:b,currentVideoFileUpload:s,videoUploadProgress:u,uploadedVideosSearchQuery:d,isRefreshingVideos:p,shouldShowMetadata:!0,vimeoModalType:f,flyoutIsOpen:m,isVimeoLoading:h,vimeoCreateCount:g,vimeoDraftCount:v}})),$s=function(e){return Bs(e).uploadedImages.filter((function(e){var t=e.sources,n=void 0===t?{}:t;return Object.prototype.hasOwnProperty.call(n,Ue)}))},Zs=Os(Bs,Qs,(function(e,t){var n=t.uploadedVideos,r=void 0===n?[]:n,a=t.uploadedVideosFetched,o=t.totalVideosInAccount,i=t.isVimeoLoading,s=e.uploadedImages,c=void 0===s?[]:s,l=e.uploadedImagesFetched;return{uploadedAssetsTotal:c.length+o,isVimeoLoading:i,uploadedAssets:Cs([].concat(gs()(c),gs()(r)),ft,(function(e){var t=e.createdAt;return e.modified_time||t})),uploadedAssetsFetched:l&&a}})),Js=function(e){var t=Rs(e),n=t.stockVideos,r=t.stockVideosQuery,a=void 0===r?"":r,o=t.isSearching,i=void 0!==o&&o,s=t.key;return{stockVideos:n,stockVideosTotalCount:n?n.length:0,stockVideosQuery:a,isSearching:i,pathToDataSource:[s,"stockVideos"]}},ec=function(e){return kt(e).cache},tc=function(e){var t,n,r=kt(e),a=r.otherSites,o=r.otherSites,i=o.key,s=o.hasPhotoshoot,c=o.websites,l=o.selectedWebsiteId,u=o.currentMaxWebsiteViewableIndex,d=c&&c.filter((function(e){return Be.includes(e.type)}));d&&d.length&&(n=d.find((function(e){return e.id===l}))||d.find((function(e){return e.type===xe}))||d.find((function(e){return"venture"===e.type}))||d[0],t=[i,"websites",c.findIndex((function(e){return e.id===n.id})),"images"]);var p=d.slice(0,u+1);return As(As({},a),{},{websites:d,viewableWebsites:p,selectedWebsiteId:n&&n.id,selectedSiteType:n&&n.type,selectedWebsite:n,hasPhotoshoot:s,pathToDataSource:t})},nc=function(e){var t=kt(e).socialMedia,n=t.key,r=t[Me],a=r.selectedPageId,o=r.selectedAlbumId,i=t.selectedProvider===Me?[n,Me,"pages",a,"albums",o,"photos"]:[n,Le,"posts"];return As(As({},t),{},{pathToDataSource:i})},rc=function(e){var t=kt(e).otherSites;if(t){var n,r,a,o=t.websites,i=t.key;return o&&(a=o.findIndex((function(e){return"photoshoot"===e.type})),r=(n=o[a])&&[i,"websites",a,"images"]),{photoshoot:n,pathToDataSource:r,photoshootIndex:a}}},ac=function(e){var t=kt(e).selection,n=t.anchor,r=t.fivIndex,a=t.selectedItemsById,o=void 0===a?new Map:a,i=Array.from(o.values()),s=-1!==i.findIndex((function(e){return!e.permission||!e.permission.delete})),c=-1!==i.findIndex((function(e){return!e.permission||!e.permission.download}));return{anchor:n,fivIndex:r,selectedItems:Array.from(o.values()),selectedItemsById:o,selectedDeleteDisabled:s,selectedDownloadDisabled:c}},oc=Os(Ls,Rs,(function(e,t){var n=e.stagingCount,r=e.recentlyStagedCount,a=void 0===r?0:r,o=e.staged,i=void 0===o?{}:o,s=e.recentUploadedImages,c=void 0===s?[]:s,l=t.currentVideoFileUpload,u=t.recentlyUploadedVideos,d=void 0===u?[]:u,p=Object.keys(i);return p.length>0?{stagingCount:n,filename:i[p[0]].filename,uploadProgress:e.uploadProgress}:l?{stagingCount:1,filename:l.name,uploadProgress:t.videoUploadProgress}:{stagingCount:0,recentlyStagedImagesCount:a,recentlyStagedVideosCount:d.length,imageUploadSuccess:c.length>0&&-1===e.uploadProgress,videoUploadSuccess:0===t.videoUploadProgress&&!l&&d.length>0}})),ic=function(e){var t,n=kt(e),r=n.images,a=r.recentUploadedImages,o=r.uploadedImagesFetched,i=r.uploadedOrder,s=n.stockImages,c=s.stock,l=s.stockTotalCount,u=s.stockNextPageUrl,d=n.videos,p=d.uploadedVideosFetched,f=d.isVimeoLoading,m=d.stockVideos,h=n.products.productsFetched,g=n.planFeatures,v=n.socialMedia,b=js(e),y=Bs(e),O=y.previewUploadedImages,E=y.searchText,_=y.pendingSearchText,I=y.shouldShowMetadata,S=y.stagingCount,w=y.staged,T=y.showSlowUploadNotification,k=y.isLoadingUploadedImages,C=y.deletedAllUploaded,x=Ws(e),A=Gs(e),D=A.olsImages,j=A.hasOLS,M=b.businessCategory,L=b.market,R=b.inWebsiteContext,N=b.selectedMediaType,U=ac(e),F=U.fivIndex,V=U.selectedItems,B=U.selectedItemsById,G=U.selectedDeleteDisabled,z=U.selectedDownloadDisabled,H=rc(e).photoshootIndex,K=Vs(e).isLoadingNextStock,W=Ks(e,Pe),q=Hs(e,Fe,[it,ct,lt]),Y=Ks(e,je),X=Ks(e,"photoshoot"),Q=Qs(e),$=Q.uploadedVideos,Z=Q.totalVideosInAccount,J=Q.currentVideoFileUpload,ee=Q.flyoutIsOpen,te=Q.collectionPreviewVideos,ne=zs(e),re=qs(e);switch(N){case dt:t=h;break;case st:t=p;break;default:t=o}return{config:b,recentUploadedImages:a,photoshootImages:X,logoImages:W,wscAssets:q,headerImages:Y,documents:ne,uploadedVideos:$,totalVideosInAccount:Z,searchText:E,pendingSearchText:_,uploadedImages:x,previewUploadedImages:O,stagingCount:S,staged:w,vimeoUser:re,currentVideoFileUpload:J,collectionPreviewVideos:te,isUploadingVideos:null!==J,hasUploaded:N===st?Q.hasUploaded:y.hasUploaded,stockImages:c,stockVideos:m,olsImages:D,hasOLS:j,businessCategory:M,market:L,stockTotalCount:l,stockNextPageUrl:u,isLoadingNextStock:K,otherSites:Object(P.omit)(tc(e),"pathToDataSource"),socialMedia:v,planFeatures:g,uploadedAssetsFetched:t,selectedItems:V,selectedItemsById:B,selectedMediaType:N,uploadedOrder:i,photoshoot:Object(P.get)(rc(e).photoshoot,"images"),photoshootIndex:H,fivIndex:F,inWebsiteContext:R,selectedDeleteDisabled:G,selectedDownloadDisabled:z,flyoutIsOpen:ee,isVimeoLoading:f,shouldShowUploadedMetadata:I,mediaTypes:b.mediaTypes,overImages:$s(e),showSlowUploadNotification:T,mixedAssetData:Zs(e),isLoadingUploadedImages:k,deletedAllUploaded:C}},sc=function(e){return kt(e).assetDimensions},cc=function(e){return kt(e).perfBeacon},lc=function(e){return kt(e).venture},uc=jt()(["VIMEO_CONVERT","VIMEO_CONVERT_CREATE","VIMEO_CREATE","VIMEO_EDIT","VIMEO_UPGRADE"]),dc=uc.VIMEO_EDIT,pc=uc.VIMEO_CREATE,fc=uc.VIMEO_CONVERT,mc=uc.VIMEO_CONVERT_CREATE,hc=uc.VIMEO_UPGRADE;var gc=function(e,t){var n=t.videoId;return{openConvertLink:function(t){e(Xr({redirectAction:fc,videoId:t}))},openConvertCreateLink:function(){e(Xr({redirectAction:mc}))},openEditLink:function(){e(Xr({redirectAction:dc,videoId:n}))},openCreateLink:function(){e(Xr({redirectAction:pc}))},openUpgradeLink:function(){e(Xr({redirectAction:hc}))}}},vc="none",bc=Object(f.connect)((function(e){return{connected:Boolean(qs(e).convertedOn)}}),(function(e,t){return{openEditLink:function(){gc(e,t).openEditLink()},showVimeoModal:function(){e(Qr({modalType:"connect",videoId:t.videoUrlHash?t.videoId+"/"+t.videoUrlHash:t.videoId}))}}}))(ms),yc=n(61),Oc=n.n(yc);function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ic=Ui;function Sc(e){var t=e.editItem,n=e.trackEvent,r=e.openOverCanvas,a=e.isFullCta,o=e.selectionCount,i=o>1||0===o,s=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=_c(_c({},t),{},{thumbnailUrl:t.imageUrl});r(a),n("IM_TRACK_OVER_EDIT_CTA_CLICK"),e&&n("IM_TRACK_OVER_THUMBNAIL_EDIT_CTA_CLICK")};return a?l.a.createElement(Ko.a,{"data-click-eid":"image_modal_edit_click","data-aid":Ic,design:"secondary",className:"btn-secondary-pastel",onClick:s.bind(this,!1),text:l.a.createElement(p.FormattedMessage,{id:"EDIT"}),icon:l.a.createElement(Oc.a,null),disabled:i}):l.a.createElement("span",{className:"settings-icon product-dark-border",onClick:s.bind(this,!0)},l.a.createElement(Oc.a,{fill:"currentColor"}))}Sc.propTypes={trackEvent:d.a.func,editItem:d.a.object,openOverCanvas:d.a.func,isFullCta:d.a.bool,selectionCount:d.a.number},Sc.defaultProps={isFullCta:!1,disabled:!1};var wc=Sc;function Tc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var xc=function(e){I()(n,e);var t=Cc(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).state={gifEnabled:!1},r.onThumbnailClick=r.onThumbnailClick.bind(E()(r)),r.onView=r.onView.bind(E()(r)),r}return y()(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.enableEditWithOver,a=n.isSelected,o=n.imageUrl,i=n.status,s=this.state.gifEnabled;return a!==e.isSelected||o!==e.imageUrl||s!==t.gifEnabled||r!==e.enableEditWithOver||i!==e.status||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(e.width===t.width&&e.height===t.height&&e.newWidth===t.newWidth&&e.newHeight===t.newHeight)}(this.props.dimensions,e.dimensions)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isSelected&&this.state.gifEnabled&&this.toggleGIF(!1)}},{key:"toggleGIF",value:function(e){var t=this.props,n=t.mediaType,r=t.thumbnailUrl;n===st&&r&&this.setState({gifEnabled:e})}},{key:"getThumbnailUrl",value:function(){var e=this.props,t=e.url,n=e.thumbnailUrl;return e.sourceType!==xe||this.state.gifEnabled?n||t:pi(t)}},{key:"onThumbnailClick",value:function(e){var t=this.props,n=t.id,r=t.preloadParams,a=t.onThumbnailClick,o=t.onThumbnailShiftClick,i=t.originalAsset;(e&&e.shiftKey?o:a)(kc(kc({},i),{},{id:n,preloadParams:r,thumbnailUrl:this.getThumbnailUrl()}))}},{key:"onView",value:function(e){this.props.onView(this.props.index,e)}},{key:"renderPdf",value:function(e){var t=this.props,n=t.filename,r=t.url,a=t.isSelected,o=t.postLog,i=t.galleryOverlay,s=t.renderMode,c=t.shouldShowFilenames;return l.a.createElement(is,{style:e,url:r,filename:n,isSelected:a,onClick:this.onThumbnailClick,postLog:o,showLabelOverlay:!i,renderMode:s,alignLeft:c})}},{key:"renderImage",value:function(e){var t=this.props,n=t.hasIrregularDims,r=t.isSelected,a=t.renderDarkOverlay,o=t.mediaType;return l.a.createElement(zi,{hasIrregularDims:n,onThumbnailClick:this.onThumbnailClick,src:this.getThumbnailUrl(),dataAid:yi,draggable:!1,isSelected:r,styles:e,renderDarkOverlay:a,isImage:o===it})}},{key:"renderProduct",value:function(){var e=this.props,t=e.id,n=e.imageUrl,r=e.name,a=e.price,o=e.isSelected,i=e.salePrice;return l.a.createElement(Ki,{id:t,src:n,productName:r,productPrice:a,salePrice:i,isSelected:o,onThumbnailClick:this.onThumbnailClick})}},{key:"renderDoc",value:function(e,t){var n=this.props,r=n.isSelected,a=n.filename;return l.a.createElement(cs,{docType:e,style:t,isSelected:r,filename:a})}},{key:"renderVideoOverlay",value:function(){var e=this.props,t=e.duration,n=e.url,r=e.shouldShowFilenames,a=fi(n);if(t){var o=0,i=0;t&&t>-1&&(o=Math.floor(t/60),i=t%60);var s=o.toString().padStart(1,"0")+":"+i.toString().padStart(2,"0");return l.a.createElement(l.a.Fragment,null,!a&&l.a.createElement("div",{className:"asset-overlay",onClick:this.onThumbnailClick}),l.a.createElement(Xi,{label:s,icon:a&&!Bi(768)?null:Fo.a,dark:a,alignLeft:r}))}}},{key:"renderThumbnail",value:function(e,t,n){var r=this.props,a=r.url,o=r.originalFilename,i=r.isSelected,s=r.renderMode;switch(e){case ct:return this.renderPdf(t);case lt:return this.renderDoc(lt,t);case st:return l.a.createElement(l.a.Fragment,null,fi(a)?l.a.createElement("div",{className:$o()("video-placeholder-container",{"primary-border":i}),onClick:this.onThumbnailClick},l.a.createElement(es,{filename:o,mediaType:st,renderMode:s,isProcessedVideo:!0})):this.renderImage(t),n&&this.renderVideoOverlay());case ut:return this.renderDoc(ut,t);case dt:return this.renderProduct();default:return this.renderImage(t)}}},{key:"render",value:function(){var e=this.props,t=e.canSelect,n=e.isSelected,r=e.index,a=e.onView,o=e.dimensions,i=e.galleryOverlay,s=e.mediaType,c=e.thumbnailSettings,u=e.enableEditWithOver,d=e.trackEvent,p=e.status,f=e.sourceType,m=e.originalFilename,h=e.originalAsset,g=e.openOverCanvas,v=e.renderMode,b=e.filename,y=e.shouldShowFilenames,O=e.permission,E=f===Re&&"uploading_error"===p,_=f===Re&&"available"!==p&&!E,I=!i&&s!==dt,S=u&&(void 0===O?{}:O).edit&&"function"==typeof g,w={};o&&(w={width:o.newWidth-4,height:o.newHeight-4,backgroundColor:"#fff"});var T=l.a.createElement(l.a.Fragment,null,s===st&&c&&l.a.createElement(bc,{type:"icon",trackEvent:d,videoId:this.props.id,videoUrlHash:this.props.urlHash}),s===it&&S&&l.a.createElement(wc,{editItem:h,trackEvent:d,openOverCanvas:g}),l.a.createElement("span",{onClick:this.onView,"data-aid":Oi,className:"zoom-icon"},l.a.createElement(si.a,{fill:"currentColor"})));return l.a.createElement("li",{"data-click-eid":"select_button_click",key:r,className:$o()("modal-image-selector-item-container",{"ie-fix":ui(),"image-is-selected":n}),onMouseEnter:this.toggleGIF.bind(this,!n),onMouseLeave:this.toggleGIF.bind(this,!1),style:w},i,(E||_)&&l.a.createElement("div",{className:$o()("video-placeholder-container",{"primary-border":n}),onClick:this.onThumbnailClick},l.a.createElement(es,{filename:m,mediaType:st,isProcessedVideo:!1,isErroredVideo:E,renderMode:v})),l.a.createElement("div",{className:"thumbnail-click-container"},this.renderThumbnail(s,w,I),a&&I&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"fiv-click-container"},l.a.createElement("div",{className:"click-overlay",onClick:this.onView}),l.a.createElement("div",{className:"view-image"},!y&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:this.onThumbnailClick,className:"view-image-background"}),l.a.createElement("span",{className:"icon-container"},T)))),y&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"view-image-alt"},l.a.createElement("span",{className:"icon-container-alt"},T)),!(E||_)&&l.a.createElement("div",{className:"filename-container"},l.a.createElement("p",null,b||m))))),t&&I&&l.a.createElement("div",{className:"select-container",onClick:this.onThumbnailClick},l.a.createElement("div",{className:$o()({"image-multiple-select":!n},{"image-multiple-check primary-background":n})},n&&l.a.createElement(li.a,{fill:"white"}))))}}]),n}(c.Component);xc.propTypes={id:d.a.string,imageUrl:d.a.string,url:d.a.string,dimensions:d.a.object,isSelected:d.a.bool,index:d.a.number,onThumbnailClick:d.a.func,onThumbnailShiftClick:d.a.func,onView:d.a.func,thumbnailUrl:d.a.string,mediaType:d.a.oneOf([it,st,dt]),sourceType:d.a.oneOf(ze),config:d.a.object,galleryOverlay:d.a.object,postLog:d.a.func,preloadParams:d.a.string,canSelect:d.a.bool,hasIrregularDims:d.a.bool,filename:d.a.string,permission:d.a.object,originalAsset:d.a.object,trackEvent:d.a.func,enableEditWithOver:d.a.bool,shouldShowFilenames:d.a.bool},xc.defaultProps={canSelect:!0,sourceType:xe};var Ac=xc,Dc=n(80),Pc=n.n(Dc),jc=n(40),Mc=n.n(jc),Lc=function(e){var t=navigator.userAgent,n=/iPad|iPhone|iPod/i.test(t)&&!window.MSStream,r=window.devicePixelRatio||1,a=n&&window.screen.width*r==1125&&window.screen.height*r==2436,o=n&&window.screen.width*r==828&&window.screen.height*r==1792,i=n&&window.screen.width*r==1242&&window.screen.height*r==2688;return(a||o||i)&&(e+=" iphone-x"),e};function Rc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Nc=function(e){I()(n,e);var t=Rc(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.statusMessage,n=e.count,r=e.type,a=e.bright,i=e.excludeClasses,s=e.typeSuffix;if(t)return t;var c=r.toUpperCase()+s,u={other:l.a.createElement(p.FormattedMessage,{id:c+"_OTHER",values:{count:n}}),zero:l.a.createElement(p.FormattedMessage,{id:c+"_ZERO",values:{count:n}}),one:l.a.createElement(p.FormattedMessage,{id:c+"_ONE",values:{count:n}}),two:l.a.createElement(p.FormattedMessage,{id:c+"_TWO",values:{count:n}}),few:l.a.createElement(p.FormattedMessage,{id:c+"_FEW",values:{count:n}}),many:l.a.createElement(p.FormattedMessage,{id:c+"_MANY",values:{count:n}})},d=l.a.createElement(p.FormattedPlural,o()({value:n},u));return i?d:l.a.createElement("div",{className:$o()("found-images-count",{"text-muted":!a})},d)}}]),n}(c.Component),Uc="_FILE",Fc="_VIDEOS";Nc.propTypes={count:d.a.number.isRequired,type:d.a.string.isRequired,statusMessage:d.a.element,bright:d.a.bool,excludeClasses:d.a.bool,typeSuffix:d.a.string},Nc.defaultProps={typeSuffix:""};var Vc=Nc;function Bc(e){var t=e.imageUrl,n=e.minDimensions;return new Promise((function(e){var r=n||{},a=r.width,o=r.height,i=new Image;i.onload=function(){e({dimensions:{width:i.width,height:i.height},valid:(!a||i.width>=a)&&(!o||i.height>=o)})},i.src=t}))}function Gc(e,t){if(e){var n,r=e.width,a=e.height;return n=r&&a?"SIZE_WARNING_MESSAGE":r?"SIZE_WARNING_MESSAGE_WIDTH_ONLY":"SIZE_WARNING_MESSAGE_HEIGHT_ONLY",{title:t.formatMessage({id:"WARNING"}),content:t.formatMessage({id:n},{width:r,height:a})}}}var zc=n(81),Hc=n.n(zc),Kc=n(82),Wc=n.n(Kc),qc=function(e){var t=e.reduce((function(e,t){return e+t.size}),0);if(Number.isNaN(t))return{isValid:!1};var n,r,a;return t>1048576?(n=(t/1048576).toFixed(1),r="IMAGE_SIZE_MB",a="MB"):(n=(t/1024).toFixed(),r="IMAGE_SIZE_KB",a="KB"),{formattedSize:n,intlSize:r,suffix:a,isValid:!0}};function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Xc=function(e){I()(n,e);var t=Yc(n);function n(){var e;v()(this,n),e=t.apply(this,arguments),R()(E()(e));var r=e.props,a=r.altText,o=r.dify,i=void 0===o?{}:o,s=r.updateDelay,c=r.handleOnAltTextChange,l=r.handleOnDIFYChange;return e.state={altText:a,difyApprove:i.approve,difyFeedback:i.feedback,isFocused:!1},e.handleOnAltTextChange=Object(P.debounce)(c,s),e.handleOnDIFYChange=Object(P.debounce)(l,s),e}return y()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.setState({altText:e.altText})}},{key:"onFocus",value:function(e){this.setState({isFocused:e})}},{key:"onAltTextChange",value:function(e){var t=e.target.value;this.setState({altText:t}),this.handleOnAltTextChange(t)}},{key:"onDIFYApproveChange",value:function(e){var t=this.state.difyApprove===e?0:e;this.setState({difyApprove:t}),this.handleOnDIFYChange({dify:{approve:t,feedback:this.state.difyFeedback}})}},{key:"onDIFYFeedbackChange",value:function(e){var t=e.target.value;this.setState({difyFeedback:t}),this.handleOnDIFYChange({dify:{approve:this.state.difyApprove,feedback:t}})}},{key:"renderSavingMessage",value:function(e){var t=e.feedback,n=this.props.isSavingMetadata,r=n?"SAVING":t?"FEEDBACK_SAVED":"CHANGES_SAVED";return l.a.createElement("p",{className:"saving-text text-muted"},n?l.a.createElement(M.a,{inline:!0,size:"sm"}):l.a.createElement("span",{className:"icon icon-checkmark"},l.a.createElement(li.a,{height:16,width:16})),l.a.createElement(p.FormattedMessage,{id:r}))}},{key:"renderFileSizeSection",value:function(){var e=this.props,t=e.size,n=e.mediaType,r=e.dimensions;if(!t&&!r)return null;var a,o=qc([{size:t}]),i=o.isValid,s=o.formattedSize,c=o.intlSize,u=[];return i?(a=n===it?"IMAGE_SIZE":"FILE_SIZE",u.push(l.a.createElement(p.FormattedMessage,{id:c,values:{formattedSize:s}})),r&&u.push(", ")):a="RESOLUTION",u.push(function(e){return e&&e.width&&e.height?"".concat(e.width,"x").concat(e.height):""}(r)),l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:a})),l.a.createElement("p",null,u))}},{key:"render",value:function(){var e=this,t=this.props,n=t.paneIsOpen,r=t.renderMode,a=t.link,o=t.toggleInfoPane,i=t.originalFilename,s=t.createdAt,c=t.intl,u=t.mediaType,d=t.references,f=void 0===d?[]:d,m=t.enableDifyFeedback,h=this.state,g=h.isFocused,v=h.altText,b=h.difyApprove,y=h.difyFeedback,O=c.locale,E=v||"",_=b||0,I=y||"",S=Bi()?$o()("info-wrapper-mobile",{"open-pane":Bi()&&n}):$o()("info-wrapper",{"open-pane":!Bi()&&n}),w=new Date(s),T=i&&i.includes("/")?i.split("/").pop():i,k=r===Qi&&u===st,C=m&&f.includes("photoshoot")&&l.a.createElement("div",{className:"dify-feedback-section product-faint-background"},l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:"PHOTO_FEEDBACK"}),l.a.createElement(Xo.a,{id:"dify-tooltip",title:l.a.createElement(p.FormattedMessage,{id:"WHATS_THIS"}),message:l.a.createElement(p.FormattedMessage,{id:"PHOTO_FEEDBACK_DESCRIPTION"}),"aria-label":"feedback tooltip"})),l.a.createElement("div",{className:"dify-feedback-btn-container"},l.a.createElement("div",{className:$o()("dify-feedback-btn",{active:1===_}),onClick:this.onDIFYApproveChange.bind(this,1)},l.a.createElement(Hc.a,{className:"primary",height:14,width:14})," ",l.a.createElement(p.FormattedMessage,{id:"LIKE"})),l.a.createElement("div",{className:$o()("dify-feedback-btn",{active:-1===_}),onClick:this.onDIFYApproveChange.bind(this,-1)},l.a.createElement(Wc.a,{className:"text-error",height:14,width:14})," ",l.a.createElement(p.FormattedMessage,{id:"DISLIKE"}))),l.a.createElement("textarea",{className:"text-area form-control",onChange:this.onDIFYFeedbackChange,value:I,placeholder:c.formatMessage({id:"ADDITIONAL_FEEDBACK"})}),this.renderSavingMessage({feedback:!0})),x=i&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:"FILENAME"})),l.a.createElement("p",null,T)),A=u!==st;return l.a.createElement("div",{className:S},l.a.createElement("span",{className:"title-container"},l.a.createElement("h3",null,l.a.createElement(p.FormattedMessage,{id:u===it?"PHOTO_DETAILS":"FILE_DETAILS"})),l.a.createElement(Ko.a,{className:"infopane-close-btn",design:"link",size:"small",onClick:o,text:c.formatMessage({id:"HIDE"})})),C,x,l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:"DATE_ADDED"})),l.a.createElement("p",null,w.toLocaleDateString(O,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})),this.renderFileSizeSection(),A&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"textarea-label"},l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:u===it?"ALT_TEXT_TITLE":"ALT_TEXT_TITLE_FILE"})),l.a.createElement("span",{className:$o()("textarea-count",{visible:E.length>0||g,"text-error":E.length>100})},100-E.length)),l.a.createElement("textarea",{placeholder:c.formatMessage({id:u===it?"ALT_TEXT_GUIDANCE":"ALT_TEXT_GUIDANCE_FILE"}),className:"text-area form-control",onChange:this.onAltTextChange,onFocus:function(){return e.onFocus(!0)},onBlur:function(){return e.onFocus(!1)},value:E}),E.length>100?l.a.createElement("p",{className:"text-error"},l.a.createElement(p.FormattedMessage,{id:"EDIT_FIELD_LIMIT_EXCEED"})):this.renderSavingMessage({feedback:!1})),k&&l.a.createElement("div",{className:"video-link"},l.a.createElement("div",null,l.a.createElement("span",{className:"text-muted data-label"},l.a.createElement(p.FormattedMessage,{id:"LINK"}))),l.a.createElement("div",null,l.a.createElement("a",{href:a,target:"_"},a))))}}]),n}(c.Component);Xc.propTypes=Object.assign({locale:d.a.string,paneIsOpen:d.a.bool,toggleInfoPane:d.a.func.isRequired},Xe),Xc.defaultProps={updateDelay:1e3};var Qc=Xc,$c=function(e,t){if(!e)return null;if(!(t=t||Object(P.get)(window,"location.href","")))return null;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Zc=function(e){return e.replace(/:\d+/,"")},Jc=function(e){return Object(P.isEmpty)(e)||0===e.indexOf("https")?e:"https:".concat(e)},el=function(e){e=Zc(e);var t=$c("assetApiShaVersion"),n=t?"".concat(t,"."):"";return"https://".concat(n,"asset.api.").concat(e,"/")},tl=function(e){return"https://sso.".concat(Zc(e),"/v1")},nl=function(e){return"https://websites.api.".concat(Zc(e),"/v2")},rl=function(e){return"https://social.api.".concat(Zc(e))},al=function(e){return"https://social-sdk.api.".concat(Zc(e))},ol=function(e){return e.replace(/^dev-|^test-|:\d+$/g,"")},il={mediaType:null,sourceType:null,title:null,sourceUrl:null,thumbnailUrl:null,ref:null,width:null,height:null,className:null,style:null,dataAid:null,muted:!0,loop:!0,autoPlay:!0,hideControls:!0,onLoad:function(){}};function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ll=function(e,t){var n=cl(cl({},il),e);switch(t){case Re:return function(e){var t="fullscreen",n=e.sourceUrl.match(/(\d+)\/?([a-zA-Z0-9]*)/),r=n&&n[1],a=n&&n[2],i=new URL("https://player.vimeo.com/video/"+r),s=new URLSearchParams(i.search);a&&s.set("h",a),e.autoPlay&&(t+="; autoplay",s.set("autoplay","1"),s.set("autopause","0")),e.loop&&(t+="; loop",s.set("loop","1")),e.muted&&s.set("muted","1"),e.hideControls&&(s.set("controls","0"),s.set("background","1")),i.search=s.toString();var c={src:i.toString(),ref:e.ref,onLoad:e.onLoad||void 0,className:e.className,style:e.style,title:e.title,width:e.width,height:e.height,allow:t,"data-aid":e.dataAid},u=Object(P.omit)(c,P.isNil);return l.a.createElement("iframe",o()({allowFullScreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,frameBorder:"0"},u))}(n);case xe:return function(e){var t={src:e.sourceUrl,poster:e.thumbnailUrl,ref:e.ref,onLoadedData:e.onLoad||void 0,className:e.className,style:e.style,title:e.title,width:e.width,height:e.height,loop:e.loop,muted:e.muted,autoPlay:e.autoPlay,"data-aid":e.dataAid},n=Object(P.omit)(t,P.isNil);return l.a.createElement("video",o()({type:"video/mp4",playsInline:!0},n))}(n);default:return""}};function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pl=function(){function e(t){switch(v()(this,e),this._schema=dl({},il),this._sourceType=t.sourceType,t.mediaType){case st:this._schema=dl(dl({},this._schema),(n=t).sourceType===Re?{mediaType:st,sourceType:Re,title:n.name,sourceUrl:n.link,thumbnailUrl:n.imageUrl,width:n.width,height:n.height}:n.isStockMedia&&n.sourceType===xe?{mediaType:st,sourceType:xe,sourceUrl:Jc(n.videoUrl),thumbnailUrl:Jc(n.imageUrl)}:void 0),this._generateHtml=ll}var n}return y()(e,[{key:"getSchema",value:function(){return this._schema}},{key:"generateHtml",value:function(){return this._generateHtml(this._schema,this._sourceType)}}]),e}();function fl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var ml=function(e){I()(n,e);var t=fl(n);function n(){var e;return v()(this,n),(e=t.apply(this,arguments)).state={selectedIndex:e.props.initialImageIndex,initialImageLoaded:!1,paneIsOpen:e.shouldRenderInfoPane()&&!Bi(),isFocused:!1,coverImageUpdated:!1,hasChangedAltText:!1},R()(E()(e)),e.carousel=l.a.createRef(),e}return y()(n,[{key:"componentDidMount",value:function(){var e=this.props.images,t=this.state.selectedIndex,n=e[t]&&e[t].url;n&&(this.checkImageSize("".concat(n).concat(this.getImageSizingUrlParams())),this.preloadCurrentImage()),document.attachEvent?document.attachEvent("onkeydown",this.onKeyboardPress):window.addEventListener&&window.addEventListener("keydown",this.onKeyboardPress,!0)}},{key:"componentWillUnmount",value:function(){document.detachEvent?document.detachEvent("onkeydown",this.onKeyboardPress):window.removeEventListener&&window.removeEventListener("keydown",this.onKeyboardPress,!0),this.props.onClose()}},{key:"onKeyboardPress",value:function(e){switch(e.key){case"ArrowLeft":this.carousel.current.prevSlide();break;case"ArrowRight":this.carousel.current.nextSlide();break;default:return}}},{key:"handleChange",value:function(e){this.setState({selectedIndex:e,coverImageUpdated:!1,hasChangedAltText:!1});var t=this.props.images,n=t[e]&&t[e].url;n&&(this.checkImageSize("".concat(n).concat(this.getImageSizingUrlParams())),this.preloadCurrentImage())}},{key:"getImageSizingUrlParams",value:function(){return this.props.sourceType===xe?"/:/rs=w:1440,h:1440":""}},{key:"initialImageHasLoaded",value:function(){this.setState({initialImageLoaded:!0})}},{key:"checkImageSize",value:function(e){var t=this,n=this.props,r=n.minDimensions,a=n.intl;r&&Bc({imageUrl:e,minDimensions:r}).then((function(e){var n=e.valid?null:Gc(r,a).content;t.setState({warningMessage:n})}))}},{key:"preloadCurrentImage",value:function(){var e=this.props.preloadParams;e&&((new Image).src="".concat(this.props.images[this.state.selectedIndex].url).concat(e))}},{key:"isVideo",value:function(){var e=this.props.images,t=this.state.selectedIndex;return e[t]&&e[t].mediaType===st}},{key:"shouldRenderDownloadBtn",value:function(){var e=this.props.onDownloadButtonClick;return!this.isVideo()&&!Bi()&&!!e}},{key:"shouldRenderInfoPane",value:function(){return this.props.shouldShowMetadata}},{key:"renderSliderControls",value:function(e){var t=e.nextSlide,n=e.prevSlide;return this.props.images.length>1&&l.a.createElement("div",null,l.a.createElement("span",{className:"carousel-arrow-left",onClick:n},l.a.createElement(Mc.a,{height:18,width:18,fill:"white"})),l.a.createElement("span",{className:"carousel-arrow-right",onClick:t},l.a.createElement(wo.a,{height:18,width:18,fill:"white"})))}},{key:"renderSelectAction",value:function(){var e=this.props,t=e.images,n=e.selectedItemsById,r=this.state.selectedIndex,a=n.has(t[r].id),o=$o()("select-bubble",{"image-multiple-select":!a},{"image-multiple-check primary-background":a});return l.a.createElement("span",{className:"fiv-select-container"},l.a.createElement("div",{className:"select-container"},l.a.createElement("div",{className:o,onClick:this.onSelect},a&&l.a.createElement(li.a,{fill:"white"}))),l.a.createElement("p",null,a?l.a.createElement(p.FormattedMessage,{id:"SELECTED_LABEL"}):l.a.createElement(p.FormattedMessage,{id:"SELECT_LABEL"})))}},{key:"renderCloseButton",value:function(){var e=this.props,t=e.renderMode,n=e.onClose,r=e.intl,a=t===Qi?"CLOSE":"CANCEL";return l.a.createElement(Ko.a,{design:"secondary",className:"btn-secondary-light","data-aid":gi,onClick:n,text:r.formatMessage({id:a})})}},{key:"renderActionButtons",value:function(){var e=this,t=this.props,n=t.images,r=t.onInsertButtonClick,a=t.renderMode,o=t.selectedItems,i=t.onCoverImageUpdate,s=t.trackEvent,c=t.inWebsiteContext,u=t.intl,d=t.insertLabel,p=this.state,f=p.selectedIndex,m=p.coverImageUpdated,h=l.a.createElement(Ko.a,{disabled:!r,design:"primary",className:"btn-light","data-aid":mi,text:d,onClick:function(){r(n[f])}}),g=c&&i&&l.a.createElement(Ko.a,{disabled:m,design:"primary",className:"btn-light","data-aid":hi,text:u.formatMessage({id:"UPDATE_COVER_IMAGE"}),onClick:function(){n[f]&&(e.setState({coverImageUpdated:!0}),i(n[f]),s("IM_TRACK_FULL_IMAGE_VIEW_UPDATE_HEADER"))}});return Bi()&&a===Qi?l.a.createElement("div",{className:$o()("action-buttons",{flex:o.length>0})},o.length>0&&this.renderSelectAction(),g||this.renderCloseButton()):l.a.createElement(qo.a,{className:"action-buttons"},a===$i&&h,a===Qi&&g,this.renderCloseButton())}},{key:"toggleInfoPane",value:function(){var e=!this.state.paneIsOpen;this.setState({paneIsOpen:e}),e&&this.props.trackEvent("IM_TRACK_PHOTO_DETAILS_OPEN")}},{key:"handleDownloadButtonClick",value:function(){var e=this.props,t=e.images;(0,e.onDownloadButtonClick)(t[this.state.selectedIndex])}},{key:"onChange",value:function(e){var t=this.props,n=t.images,r=t.onMetadataUpdate,a=t.trackEvent,o=this.state,i=o.selectedIndex;o.hasChangedAltText||(this.setState({hasChangedAltText:!0}),a("IM_TRACK_FULL_IMAGE_VIEW_ALT_TEXT_CHANGE")),r(n[i],{altText:e.substring(0,100)})}},{key:"onDIFYChange",value:function(e){var t=this.props,n=t.images;(0,t.onMetadataUpdate)(n[this.state.selectedIndex],e)}},{key:"onFocus",value:function(e){this.setState({isFocused:e})}},{key:"renderInfoPane",value:function(){var e=this.props,t=e.images,n=e.intl,r=e.config,a=e.isSavingMetadata,i=e.renderMode,s=this.state,c=s.selectedIndex,u=s.paneIsOpen,d=t[c]||{},p=r.infopaneSettings,f=(p=void 0===p?{}:p).updateDelay,m=r.featureFlags,h=(m=void 0===m?{}:m).enableDifyFeedback;return l.a.createElement(Qc,o()({renderMode:i,paneIsOpen:u,toggleInfoPane:this.toggleInfoPane,handleOnAltTextChange:this.onChange,handleOnDIFYChange:this.onDIFYChange,intl:n,updateDelay:f,isSavingMetadata:a,enableDifyFeedback:h},d))}},{key:"onSelect",value:function(){var e=this.props.images[this.state.selectedIndex],t=e.id,n=e.imageUrl,r=e.index,a=e.isSelected,o=e.preloadParams;this.props.onSelect({id:t,imageUrl:n,preloadParams:o,index:r,isSelected:a,shiftClicked:!1})}},{key:"renderSelectedState",value:function(e){return Bi()?l.a.createElement("span",{className:"fiv-selected-container"},l.a.createElement(Vc,{count:e,type:"selected",bright:!0,typeSuffix:_t(this.props.selectedItems)?"":Uc})):this.renderSelectAction()}},{key:"renderTopBtns",value:function(){var e=this.props,t=e.images,n=e.onDeleteButtonClick,r=this.state.selectedIndex;return l.a.createElement(l.a.Fragment,null,n&&l.a.createElement("span",{className:"delete-btn icon-wrapper","data-aid":vi,onClick:function(){n(t[r])}},l.a.createElement("span",{className:"icon icon-trash"},l.a.createElement(ko.a,{height:22,width:22,fill:"white"}))),this.shouldRenderDownloadBtn()&&l.a.createElement("span",{className:"image-download-btn icon-wrapper",onClick:this.handleDownloadButtonClick},l.a.createElement("span",{className:"icon icon-download"},l.a.createElement(Do.a,{height:22,width:22,fill:"white"}))),this.shouldRenderInfoPane()&&l.a.createElement("span",{className:"info-toggle icon-wrapper",onClick:this.toggleInfoPane},l.a.createElement("span",{className:"icon icon-information"},l.a.createElement(zo.a,{height:22,width:22,fill:"white"}))))}},{key:"formatURL",value:function(e){return e?e.replace(/( )/g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29"):""}},{key:"renderPopup",value:function(){var e=this,t=this.props,n=t.config,r=t.trackEvent,a=this.state.coverImageUpdated,o=n.rootDomain,i=n.accountId,s="https://websites.".concat(o,"/launch?account_uid=").concat(i,"&path=edit"),c=l.a.createElement("a",{href:s,onClick:function(){return r("IM_TRACK_FULL_IMAGE_VIEW_EDIT_CLICK")},className:"primary-light"},l.a.createElement(p.FormattedMessage,{id:"OPEN_EDITOR"}));return l.a.createElement("div",{className:$o()("fiv-popup",{"open-popup":a,"close-popup":!a})},l.a.createElement("p",{className:"fiv-popup-message"},l.a.createElement(p.FormattedMessage,{id:"COVER_IMAGE_UPDATED",values:{openEditor:c}})),l.a.createElement("span",{className:"close-popup-btn",onClick:function(){e.setState({coverImageUpdated:!1})}},l.a.createElement("span",{className:"icon icon-x"},l.a.createElement(Ce.a,null))))}},{key:"getBackgroundStyle",value:function(){var e=this.props.images,t=this.state.selectedIndex;if(!e[t])return{};var n=e[t],r=n.mediaType,a=n.url;if(r!==it)return{};var o=this.getImageSizingUrlParams(),i="".concat(o,"/fx-bl=s:").concat(20);return{backgroundImage:"url('".concat(this.formatURL(a)).concat(ui(!0)?i:o,"')"),filter:"blur(".concat(20,"px) brightness(30%)")}}},{key:"renderImageViewer",value:function(e,t,n,r){return l.a.createElement("img",{alt:"",src:"".concat(e).concat(this.getImageSizingUrlParams()),className:$o()("carousel-image",{"warning-on":t}),onLoad:n===r?this.initialImageHasLoaded:void 0})}},{key:"renderVideoViewer",value:function(e,t,n){var r=new pl(e),a=r.getSchema(),o=e.sourceType===Re&&"uploading_error"===e.status,i=e.sourceType===Re&&"available"!==e.status;return o?l.a.createElement(es,{filename:e.originalFilename,mediaType:st,isErroredVideo:!0}):i?l.a.createElement(es,{filename:e.originalFilename,mediaType:st,videoIsTranscoding:!0}):(e.sourceType===Re?(a.height="60%",a.width="60%",a.style={"pointer-events":"none"}):a.className="carousel-image",a.onLoad=t===n?this.initialImageHasLoaded:void 0,r.generateHtml())}},{key:"renderPDFViewer",value:function(e,t,n,r,a){return l.a.createElement(is,{postLog:t,url:e,onLoad:r===a?this.initialImageHasLoaded:void 0,filename:n[a]&&n[a].filename})}},{key:"renderUnsupportedViewer",value:function(){return this.initialImageHasLoaded(),null}},{key:"renderActionBottom",value:function(e,t,n,r){if(e!==it){var a=e===st&&n===$i?this.renderActionButtons:this.renderCloseButton;return l.a.createElement("div",{className:"action-bottom"},t?a():null)}return l.a.createElement("div",{className:"action-bottom"},r&&l.a.createElement("div",{className:"warnings-container"},l.a.createElement("p",null,l.a.createElement("b",null,l.a.createElement(p.FormattedMessage,{id:"WARNING"}),":"," "),l.a.createElement("span",{className:"warning"},r))),n===Qi&&this.renderPopup(),t?this.renderActionButtons():null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.images,r=t.initialImageIndex,a=t.onClose,o=t.onDeleteButtonClick,i=t.selectedItems,s=t.renderMode,c=t.postLog,u=t.trackEvent,d=this.state,p=d.paneIsOpen,f=d.warningMessage,m=d.initialImageLoaded,h=d.selectedIndex,g=this.shouldRenderInfoPane(),v=this.shouldRenderDownloadBtn(),b=[{component:this.renderSliderControls}],y=i.length,O=s===Qi&&y>0,E=s===$i||s===Qi&&0===y,_=n[h],I=_&&_.id,S=_&&_.urlHash,w=this.isVideo()&&_&&_.sourceType===Re,T=g||o||v||O;return O&&Bi()&&(T=!1),l.a.createElement("div",{className:Lc("img-carousel-wrapper"),"data-aid":"image-fullscreen-mode"},l.a.createElement("div",{className:"img-blur-lightbox",style:this.getBackgroundStyle()}),l.a.createElement("div",{className:$o()("infopane-overlay",{"open-pane":Bi()&&p})}),ui()&&l.a.createElement("div",{className:"blur-overlay"}),l.a.createElement("div",{className:$o()("view-wrapper",{"open-pane":!Bi()&&p})},l.a.createElement("div",{className:"top-btn-container"},O&&this.renderSelectedState(y),w&&!O&&l.a.createElement(bc,{type:"link",trackEvent:u,videoId:I,videoUrlHash:S}),l.a.createElement("span",{className:"info-btns"},E&&this.renderTopBtns(),!Bi()&&O&&l.a.createElement(Vc,{count:y,type:"selected",bright:!0,typeSuffix:_t(this.props.selectedItems)?"":Uc}),T&&l.a.createElement("span",{className:"divider product-background"}),l.a.createElement("span",{className:"lightbox-close-btn icon-wrapper",onClick:a},l.a.createElement("span",{className:"icon icon-x"},l.a.createElement(Ce.a,{height:22,width:22,fill:"white"}))))),l.a.createElement(Pc.a,{slideWidth:"100vw",slideHeight:"100vh",initialSlide:r,transition:"fade",transitionDuration:0,dots:!1,arrows:!1,controls:m?b:void 0,beforeChange:this.handleChange,ref:this.carousel},n.map((function(t,r){var a;return a=t.mediaType===st?e.renderVideoViewer(t,h,r):t.mediaType===ct?e.renderPDFViewer(t.url,c,n,h,r):t.mediaType===it?e.renderImageViewer(t.url,f,h,r):e.renderUnsupportedViewer(),l.a.createElement("div",{className:$o()("img-wrapper",{"open-pane":!Bi()&&p}),key:r},a,e.renderActionBottom(t.mediaType,m,s,f))})))),g&&this.renderInfoPane())}}]),n}(c.PureComponent);ml.defaultProps={sourceType:xe,selectedItems:[],selectedItemsById:new Map},ml.propTypes={images:d.a.array,initialImageIndex:d.a.number,onClose:d.a.func,onInsertButtonClick:d.a.func,onDeleteButtonClick:d.a.func,onMetadataUpdate:d.a.func,onCoverImageUpdate:d.a.func,intl:d.a.object.isRequired,minDimensions:d.a.object,insertLabel:d.a.oneOfType([d.a.string,d.a.object]),preloadParams:d.a.string,sourceType:d.a.oneOf(Ge),config:d.a.object,onDownloadButtonClick:d.a.func,renderMode:d.a.oneOf([Qi,$i]),inWebsiteContext:d.a.bool,selectedItems:d.a.array,selectedItemsById:d.a.any,onSelect:d.a.func,shouldShowMetadata:d.a.bool,trackEvent:d.a.func.isRequired,postLog:d.a.func};var hl=ml;function gl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var vl=function(e){I()(n,e);var t=gl(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props.intl;return l.a.createElement("div",{className:"loading-spinner-container"},l.a.createElement(M.a,{inline:!0,size:"lg",label:e.formatMessage({id:"LOADING"})}))}}]),n}(c.Component);vl.propTypes={intl:d.a.object};var bl=vl;function yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Ol=function(e){I()(r,e);var t=yl(r);function r(e){var n;return v()(this,r),n=t.call(this,e),R()(E()(n)),n}return y()(r,[{key:"showVimeoModal",value:function(){var e=this.props,t=e.trackEvent,n=e.showVimeoModal;t("IM_TRACK_VIMEO_BANNER_CLICK"),n()}},{key:"render",value:function(){var e=this.props,t=e.intl,r=e.vimeoUser,a=r.convertedOn,o=r.currentCreateCount,i=void 0===o?0:o,s=r.totalVideosInAccount,c=void 0===s?0:s,u=Math.max(3-c+i,0);return!a&&c>0&&l.a.createElement("div",{className:"vimeo-card"},l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_TITLE"}),l.a.createElement("img",{src:n(69),width:"50",alt:""})),l.a.createElement("p",null,1===u?l.a.createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_REASON_ONE"}):l.a.createElement(p.FormattedMessage,{id:"DO_MORE_WITH_VIMEO_REASON",values:{freeUploadCount:u}})),l.a.createElement(Ko.a,{className:"btn",design:"primary",size:"small",onClick:this.showVimeoModal,text:t.formatMessage({id:"DO_MORE_WITH_VIMEO_CTA"}),as:"external"}))}}]),r}(c.Component);Ol.propTypes={showVimeoModal:d.a.func,vimeoUser:d.a.object,trackEvent:d.a.func};var El=Ol,_l=Object(f.connect)((function(e){return{vimeoUser:qs(e)}}),(function(e){return{showVimeoModal:function(){e(Qr({modalType:"connect"}))},trackEvent:function(t,n){e(ma({eventName:t,data:n}))}}}))(El),Il="launch",Sl="upload",wl="load_ventures",Tl="secondary",kl="IM_LAUNCH",Cl="LOAD_IMAGES",xl="LOAD_IMAGES_FROM_LS",Al="SYNC_LS",Dl="LOAD_IMAGES_FROM_API",Pl="RENDER_SINGLE_IMAGE";function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Rl=[it,st,ct,lt,ut,dt],Nl=function(e){I()(n,e);var t=Ll(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).state={isFivOpen:!1,rows:[]},R()(E()(r)),r.registerOnloadEventListeners(),r.container=l.a.createRef(),r}return y()(n,[{key:"componentDidMount",value:function(){this.props.mediaType!==dt&&this.calculateLayout()}},{key:"componentDidUpdate",value:function(e){e.clientWidth===this.props.clientWidth&&e.dataSource===this.props.dataSource&&e.localDimensions===this.props.localDimensions||this.props.mediaType===dt||this.calculateLayout()}},{key:"registerOnloadEventListeners",value:function(){var e=this.props,t=e.onTrackPerfLaunchEnd,n=e.shouldTrackPerf,r=e.dataSource,a=e.trackPerfEndLimit,o=e.traceAuditEventStart,i=e.traceAuditEventEnd;if(n)for(var s=0;s<Math.min(r.length,a);s++){var c=r[s];if([it,st].includes(c.mediaType)){var l=new Image;l.onload=function(){i({name:Pl}),t()};var u=c&&(c.url||c.imageUrl);l.src=pi(u),o({name:Pl})}}}},{key:"shouldShowFilenames",value:function(){return!Bi()&&(this.props.isDifyAgent||this.props.isAllowedDelegate)}},{key:"calculateLayout",value:function(){var e=this.props,t=e.dataSource,n=e.enableInlineUpload,r=e.localDimensions,a=[],o=this.props.clientWidth,i=this.props,s=i.galleryOverlay,c=i.numRows,l=o<768?160:175,u=o,d=this.shouldShowFilenames()?.7:.5,p=[],f=[],m=0,h=1,g=0,v=function(e,t){var n=t.width,r=t.height,a=!1;r/n<.5&&(n=300,r=l,a=!0),(r<l||n<200||n/r<d)&&(n=200,r=l,a=!0);var o=l/r*n,i=o*(r/n);m+=o,p.push({newWidth:o,newHeight:i});var h=m>=u,v=s&&h&&g===c-1;return f.push(Ml(Ml({},e),{},{hasIrregularDims:a,renderOverlay:v,originalAsset:e})),h};if(n&&!Bi(768)){v({isUploadButton:!0},{width:200,height:175})}for(var b=0;b<t.length;b++){var y=t[b];if(Rl.includes(y.mediaType)){var O=y.dimensions||r[y.id]||[ct,lt,ut,dt].includes(y.mediaType)&&{width:700,height:842};if(!O)break;if(v(y,O)&&(h=u/m,a.push({thumbnails:f,dimensions:p,resize:h}),p=[],f=[],m=0,h=1,g+=1,s&&g===c))break}}p.length&&a.push({thumbnails:f,dimensions:p,resize:h}),this.setState(Ml(Ml({},this.state),{},{rows:a}))}},{key:"onView",value:function(e,t){var n=this.props,r=n.onFivToggle,a=n.trackEvent;t.stopPropagation(),this.setState(Ml(Ml({},this.state),{},{isFivOpen:!0})),r(e),a("IM_TRACK_FULL_VIEW_OPEN")}},{key:"canViewFullImage",value:function(e){return[it,st,ct,lt,ut].includes(e)}},{key:"closeFiv",value:function(e){var t=this.props,n=t.onFivToggle,r=t.trackEvent;this.setState(Ml(Ml({},this.state),{},{isFivOpen:!1})),n(-1),r(e)}},{key:"renderThumbnailWithProps",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this.props,c=s.sourceType,u=s.onThumbnailClick,d=s.onThumbnailShiftClick,p=s.preloadParams,f=s.config,m=s.trackEvent,h=s.postLog,g=s.galleryOverlay,v=s.selectedItemsById,b=s.enableEditWithOver,y=s.openOverCanvas,O=s.renderMode,E=v.has(e);return l.a.createElement(Ac,o()({id:e,key:e,isSelected:!!E,imageUrl:t,url:t,thumbnailUrl:n,onThumbnailClick:u,onThumbnailShiftClick:d,onView:this.canViewFullImage(r.mediaType)?this.onView:null,sourceType:c,trackEvent:m,config:f,preloadParams:p,postLog:h,hasIrregularDims:a,galleryOverlay:i?g:null,enableEditWithOver:b,openOverCanvas:y,renderDarkOverlay:O===Qi,renderMode:O,shouldShowFilenames:this.shouldShowFilenames()},r))}},{key:"renderVimeoCard",value:function(){return l.a.createElement("li",null,l.a.createElement(_l,{intl:this.props.intl}))}},{key:"renderInlineUpload",value:function(e){var t=this.props,n=t.renderUploader,r=t.uploadCtaId,a={width:e.newWidth-4,height:e.newHeight-4};return l.a.createElement("li",{className:"inline-upload-cta primary-border",style:a},n(),l.a.createElement("div",{className:"add-btn"},l.a.createElement(Jo.a,{fill:"currentColor"})),l.a.createElement("h6",{className:"primary"},l.a.createElement(p.FormattedMessage,{id:r})))}},{key:"renderProductList",value:function(){var e=this,t=this.props,n=t.intl,r=t.dataSource,a=t.onScrollEnd,o=this.props.className?" "+this.props.className:"",i=Lc("enabled-scroll product-grid"+o);return l.a.createElement(oi,{className:i,style:{width:this.props.clientWidth},onScrollEnd:a,hideBackToTop:!0,intl:n},r.map((function(t){var n=t.imageUrl,r=t.mediaType,a=t.id,o=t.name,i=t.price,s=t.salePrice,c=t.url,l={originalAsset:t,name:o,price:i,salePrice:s,mediaType:r};return e.renderThumbnailWithProps(a,n,c,l)})))}},{key:"renderThumbnailList",value:function(){for(var e=this.props,t=e.dataSource,n=e.dataSourceFullLength,r=e.onScrollEnd,a=e.isLoading,o=e.intl,i=e.renderMode,s=e.selectedItems,c=e.isLoadingNext,u=e.canSelect,d=e.galleryOverlay,p=e.collectionKey,f=e.thumbnailSettings,m=e.onBackToTopButtonClick,h=s.length,g=this.props.className?" "+this.props.className:"",v=i===Qi,b=[],y=this.state.rows,O=!Bi(768)&&"MY_UPLOADS"===p&&this.props.mediaType===st||"VIDEO_UPLOADS"===p,E=0,_=0;_<y.length;_++)for(var I=y[_],S=I.thumbnails,w=I.dimensions,T=I.resize,k=0;k<S.length;k++){var C=S[k],x=C.id,A=C.imageUrl,D=C.thumbnail,P=C.hasIrregularDims,j=C.renderOverlay,L=C.isUploadButton,R=Io()(C,["id","imageUrl","thumbnail","hasIrregularDims","renderOverlay","isUploadButton"]);L||(E+=1);var N=w[k],U={newWidth:N.newWidth*T,newHeight:N.newHeight*T},F=Ml(Ml({},R),{},{index:E-1,key:E-1,dimensions:U,canSelect:u,thumbnailSettings:f}),V=L?this.renderInlineUpload(U):this.renderThumbnailWithProps(x,A,D,F,P,j,L);b.push(V)}var B=n||t.length;if(c||b.length<B&&!d){var G=l.a.createElement("li",null,l.a.createElement("div",{className:"thumbnail-spinner-container"},l.a.createElement(M.a,{inline:!0,size:"xs"})));b.push(G)}O&&b.push(this.renderVimeoCard());var z=Lc("justified-container thumbnail-list scrollable enabled-scroll"+g),H=l.a.createElement(oi,{className:$o()(z,{"select-mode":h>0||i===$i,"flex-grow":0===y.length}),dataAid:"thumbnail-list",onScrollEnd:c?null:r,enableFullScroll:v,intl:o,hasGalleryOverlay:!!d,onBackToTopButtonClick:m},b),K=l.a.createElement(bl,{intl:o});return a||0!==y.length?l.a.createElement("div",{className:$o()("thumbnail-scroll-wrapper",{standalone:v})},l.a.createElement("div",{className:"thumbnail-list-wrapper"},a?K:H)):K}},{key:"renderCarousel",value:function(){var e=this,t=this.props,n=t.dataSource,r=t.onInsertButtonClick,a=t.onDeleteButtonClick,o=t.onMetadataUpdate,i=t.trackEvent,s=t.insertLabel,c=t.minDimensions,u=t.intl,d=t.preloadParams,p=t.sourceType,f=t.config,m=t.onDownloadButtonClick,h=t.renderMode,g=t.selectedItems,v=t.onThumbnailClick,b=t.shouldShowMetadata,y=t.onCoverImageUpdate,O=t.fivIndex,E=t.inWebsiteContext,_=t.isSavingMetadata,I=t.postLog,S=t.selectedItemsById,w=O;return this.state.isFivOpen&&w>=0&&n[w]?l.a.createElement(hl,{images:n,initialImageIndex:w,onClose:function(){e.closeFiv("IM_TRACK_FULL_VIEW_CLOSE")},onInsertButtonClick:r?function(e){r(e)}:null,onDeleteButtonClick:a?function(e){a(e),i("IM_TRACK_FULL_VIEW_DELETE_BUTTON_CLICK")}:null,onDownloadButtonClick:m,dots:!1,insertLabel:s,minDimensions:c,intl:u,preloadParams:d,sourceType:p,config:f,renderMode:h,selectedItems:g,selectedItemsById:S,onSelect:v,shouldShowMetadata:b,onMetadataUpdate:o,trackEvent:i,onCoverImageUpdate:y,inWebsiteContext:E,isSavingMetadata:_,postLog:I}):null}},{key:"render",value:function(){return this.props.mediaType===dt?this.renderProductList():l.a.createElement("div",{ref:this.container,style:{width:this.props.clientWidth}},this.renderThumbnailList(),this.renderCarousel())}}]),n}(c.PureComponent);Nl.propTypes=Object.assign({onThumbnailClick:d.a.func.isRequired,onThumbnailShiftClick:d.a.func.isRequired,onScrollEnd:d.a.func,dataSource:d.a.array,mediaType:d.a.oneOf([it,st]),renderMode:d.a.oneOf([Qi,$i]),onInsertButtonClick:d.a.oneOfType([d.a.func,d.a.bool]),onDeleteButtonClick:d.a.oneOfType([d.a.func,d.a.bool]),insertLabel:d.a.string,minDimensions:d.a.object,preloadParams:d.a.string,className:d.a.string,sourceType:d.a.oneOf(ze),trackPerfEndLimit:d.a.number,shouldTrackPerf:d.a.bool,onDownloadButtonClick:d.a.func,onFivToggle:d.a.func,fivIndex:d.a.number,inWebsiteContext:d.a.bool,isLoadingNext:d.a.bool,canSelect:d.a.bool,selectedItemsById:d.a.object,clientWidth:d.a.number,enableInlineUpload:d.a.bool,enableEditWithOver:d.a.bool,localDimensions:d.a.object},Ke,We,qe),Nl.defaultProps={isLoading:!1,sourceType:xe,onScrollEnd:function(){},trackPerfEndLimit:3,onTrackPerfLaunchEnd:function(){},shouldTrackPerf:!1,selectedItems:[],isLoadingNext:!1,canSelect:!0,galleryOverlay:null,selectedItemsById:new Map,enableEditWithOver:!1,localDimensions:{}};var Ul=function(e){return l.a.createElement(ei.a,{disableHeight:!0},(function(t){var n=t.width;return l.a.createElement(Nl,o()({},e,{clientWidth:n}))}))},Fl=function(e){var t,n=kt(e).user,r=void 0===n?{}:n;return{isDifyAgent:!!r.dify,difyCustomerId:null==r||null===(t=r.dify)||void 0===t?void 0:t.customerId,isAllowedDelegate:!!(null==r?void 0:r.isAllowedDelegate)}},Vl={cohortId:"ineligible",data:{}},Bl=function(e){var t=kt(e).config,n=(void 0===t?{}:t).hivemind,r=(n=void 0===n?{}:n).cohorts;return(void 0===r?{}:r)||{}},Gl=function(e,t){return function(e,t){return Bl(e)["".concat(t)]||Vl}(e,t).cohortId},zl="experimental",Hl=function(e){var t=kt(e).config,n=void 0===t?{}:t,r=n.placement,a=n.featureFlags,o=void 0===a?{}:a;return r!==Ue&&(Bi()?!!o.enableMobileEditWithOver:!!o.enableEditWithOver)},Kl=function(e){var t=kt(e).config,n=(void 0===t?{}:t).featureFlags;return!!(void 0===n?{}:n).enableLogoCreate},Wl=function(e){var t=kt(e),n=t.appOptions,r=void 0===n?{}:n,a=t.config,o=(void 0===a?{}:a).featureFlags,i=void 0===o?{}:o,s=r.appName;return!!i.enableOverFlyout&&!i.disableFlyouts&&s!==Ve},ql=function(e){var t=kt(e).config,n=(void 0===t?{}:t).featureFlags,r=void 0===n?{}:n;return!!r.enableVimeoCreateFlyout&&!r.disableFlyouts},Yl=function(e){var t=kt(e).config,n=(void 0===t?{}:t).featureFlags,r=void 0===n?{}:n;return!!r.enableVimeoStandaloneFlyout&&!r.disableFlyouts},Xl=function(e){return Gl(e,"ML_image_create_in_modal")===zl},Ql=function(e){return Gl(e,"ML_remove_insert_bar")===zl},$l=function(e){return Gl(e,"ML_upload_treatments")==="".concat(zl,"_C")},Zl=function(e){var t=kt(e),n=t.appOptions,r=void 0===n?{}:n,a=t.config,o=(void 0===a?{}:a).featureFlags,i=void 0===o?{}:o,s=r.appName;return!!i.enableStudioBgRemovalTooltip&&!i.disableFlyouts&&s===De},Jl=function(e){var t=kt(e).config,n=(void 0===t?{}:t).featureFlags,r=void 0===n?{}:n,a=Object(P.get)(r,"experiments.enableStudioLogoCreate");return"string"==typeof a?Gl(e,a)===zl:!!a},eu=function(e){return Gl(e,"ML_mobile_logo_create_cta")===zl},tu=function(e){var t=kt(e),n=t.appOptions,r=void 0===n?{}:n,a=t.config,o=(void 0===a?{}:a).placement;return r.appName===Ve&&"LOGO"===o},nu=function(e){return Gl(e,"ML_upload_treatments")==="".concat(zl,"_A")},ru=function(e){return Gl(e,"ML_upload_treatments")==="".concat(zl,"_B")},au=function(e){return Gl(e,"ML_studio_resize")===zl||void 0},ou=function(e){return Gl(e,"ML_logo_zero_state")===zl};var iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collectionKey,n=e.renderMode,r=["SOCIAL_MEDIA"],a=n===Qi&&r.includes(t);return!a};function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lu=Object(f.connect)((function(e,t){var n,r=js(e).callbacks,a=void 0===r?{}:r;return Object.assign(cu(cu({canSelect:iu(t)},ac(e)),{},{dataSource:t.dataSource,enableEditWithOver:Hl(e),localDimensions:sc(e),onBackToTopButtonClick:a.onBackToTopButtonClick,planFeatures:Ds(e),isDifyAgent:Fl(e).isDifyAgent,isAllowedDelegate:null===(n=Fl(e))||void 0===n?void 0:n.isAllowedDelegate}),cc(e))}),(function(e,t){return{onThumbnailShiftClick:function(n){var r=t.dataSource;e(Da(cu({item:n,dataSource:r},Is(n,t))))},onThumbnailClick:function(n){e(xa(Is(n,t)))},onFivToggle:function(n){var r=t.pathToDataSource;e($a({index:n,pathToDataSource:r}))}}}))(Ul);function uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var du=function(e){I()(n,e);var t=uu(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"handleChange",value:function(e){var t=Object(P.toArray)(e.target.files);t.length&&(this.props.onUpload(t),this.inputRef.value="")}},{key:"setInputRef",value:function(e){this.inputRef=e}},{key:"clickUpload",value:function(){this.inputRef.click()}},{key:"render",value:function(){var e=this,t=this.props.mediaTypes;return l.a.createElement("input",{className:"upload-image-input",ref:function(t){return e.setInputRef(t)},type:"file",accept:Tt(t),multiple:!St(t,st),onChange:this.handleChange})}}]),n}(c.Component);du.propTypes={onUpload:d.a.func.isRequired,mediaTypes:d.a.arrayOf(d.a.oneOf(pt))},du.defaultProps={mediaTypes:[it]};var pu=du;function fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var mu=function(e){I()(n,e);var t=fu(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.onImagesUpload,n=e.mediaTypes,r=e.enableFloatingUpload,a="UPLOAD_OR_DRAG_FILES",o="ADD_FILES";return St(n,st)?(a="UPLOAD_OR_DRAG_VIDEO",o="ADD_VIDEO"):St(n,it)&&(a="UPLOAD_OR_DRAG",o="ADD_IMAGES"),l.a.createElement("div",{className:Lc("no-images")},l.a.createElement("div",{className:"col-sx-12"},l.a.createElement("span",{className:"icon icon-img"},l.a.createElement(Lo.a,null)),l.a.createElement("h2",{className:"no-images-heading"},l.a.createElement(p.FormattedMessage,{id:o})),l.a.createElement("p",{className:"no-image-subtext gray-light"},Bi()?l.a.createElement(p.FormattedMessage,{id:"UPLOAD_OR_CHOOSE"}):l.a.createElement(p.FormattedMessage,{id:a})),!r&&!Bi()&&l.a.createElement("p",{className:"or-subtext gray-light"},"— ",l.a.createElement(p.FormattedMessage,{id:"OR"})," —"),!r&&l.a.createElement(qo.a,null,l.a.createElement("label",{className:"btn btn-primary btn-primary-dark ux-btn-set-item image-upload-btn","data-click-eid":"no_images_upload_click"},l.a.createElement(p.FormattedMessage,{id:"UPLOAD"}),l.a.createElement(pu,{onUpload:t,mediaTypes:n})))))}}]),n}(l.a.Component);mu.propTypes={onImagesUpload:d.a.func.isRequired,postLog:d.a.func,mediaTypes:d.a.arrayOf(d.a.oneOf(pt)),enableVimeo:d.a.bool};var hu=mu;function gu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var vu=function(e){I()(n,e);var t=gu(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"openFiv",value:function(e){var t=this.props.openFivWithInfoPane;e.stopPropagation(),t()}},{key:"render",value:function(){var e=this.props,t=e.messageID,n=e.searchQuery,r=e.isProduct,a=r?No.a:Lo.a,o=l.a.createElement("a",{className:"open-fiv-link primary",onClick:this.openFiv},l.a.createElement(p.FormattedMessage,{id:"ADD_DESCRIPTION"}));return l.a.createElement("div",{className:Lc("no-images")},l.a.createElement("span",{className:$o()("icon",{"icon-cart":r})},l.a.createElement(a,null)),l.a.createElement("h4",null,l.a.createElement(p.FormattedMessage,{id:t,values:{searchQuery:n}})),n&&l.a.createElement("p",{className:"no-results-subtext"},l.a.createElement(p.FormattedMessage,{id:"NO_RESULTS_SUBTEXT",values:{link:o}})))}}]),n}(l.a.Component);vu.propTypes={messageID:d.a.string.isRequired,searchQuery:d.a.string,openFivWithInfoPane:d.a.func};var bu=vu,yu=n(43),Ou=n.n(yu);function Eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var _u=Ou.a.DropdownItem,Iu=function(e){I()(n,e);var t=Eu(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"onSortClick",value:function(e){var t=this.props,n=t.onSort,r=t.sortOrder,a=t.trackEventCallback;r!==e&&(a(e),n(e))}},{key:"render",value:function(){var e=this.props,t=e.defaultSelected,n=e.intl;return l.a.createElement(Ou.a,{type:"select",name:"orderSort",className:"sort-select",defaultSelected:t,menuAlignment:"right",enableFullscreen:!1,id:"im-sort-dropdown"},l.a.createElement(_u,{key:0,title:n.formatMessage({id:"NEWEST_FIRST"}),onClick:this.onSortClick.bind(this,ft)},l.a.createElement(p.FormattedMessage,{id:"NEWEST_FIRST"})),l.a.createElement(_u,{key:1,title:n.formatMessage({id:"OLDEST_FIRST"}),onClick:this.onSortClick.bind(this,"OLDEST")},l.a.createElement(p.FormattedMessage,{id:"OLDEST_FIRST"})))}}]),n}(c.Component);Iu.propTypes={defaultSelected:d.a.number};var Su=Iu;function wu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Tu=function(e){I()(n,e);var t=wu(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.mediaTypes,n=e.enableVimeo,r=e.selectedMediaType,a="DROP_FILES",o=function(e){return!Array.isArray(e)||!e.includes(ct)}(t);return n&&r===st?a="DROP_VIDEO":o&&(a="DROP_IMAGES"),l.a.createElement("div",{className:"row drag-hover-state"},l.a.createElement("div",{className:"col-sx-12 hover-container"},l.a.createElement("span",{className:"icon-container primary-background"},l.a.createElement("span",{className:"icon"},l.a.createElement(xo.a,{fill:"#FFFFFF"}))),l.a.createElement("h2",{className:"drag-hover-heading"},l.a.createElement(p.FormattedMessage,{id:"UPLOAD_TO_SITE"})),l.a.createElement("p",{className:"drag-hover-subtext"},l.a.createElement(p.FormattedMessage,{id:a}))))}}]),n}(l.a.Component),ku=Tu;Tu.propTypes={mediaTypes:d.a.arrayOf(d.a.oneOf(pt)),enableVimeo:d.a.bool,selectedMediaType:d.a.oneOf(pt)};var Cu=n(83),xu=n.n(Cu);function Au(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Du=function(e){I()(n,e);var t=Au(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).state={isHovering:!1},R()(E()(r)),r}return y()(n,[{key:"handleDrop",value:function(){var e;this.setState({isHovering:!1}),(e=this.props).onDrop.apply(e,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mediaTypes,r=void 0===n?[]:n,a=t.className,o=t.disabled,i=t.enableVimeo,s=t.selectedMediaType,c=t.rejectFiles,u=t.disableHover,d=t.enableClick;return Bi()?this.props.children:l.a.createElement(xu.a,{className:a,activeClassName:"active-dropzone primary-border product-background",accept:Tt(r),multiple:!St(r,st),disableClick:!d,onDrop:this.handleDrop,onDropRejected:c,onDragEnter:function(){return e.setState({isHovering:!0})},onDragLeave:function(){return e.setState({isHovering:!1})},disabled:o||!1},!u&&l.a.createElement(ku,{mediaTypes:r,enableVimeo:i,selectedMediaType:s}),(u||!this.state.isHovering)&&this.props.children)}}]),n}(c.Component);Du.propTypes={onDrop:d.a.func.isRequired,className:d.a.string.isRequired,children:d.a.node.isRequired,disabled:d.a.bool,mediaTypes:d.a.arrayOf(d.a.oneOf(pt)),enableVimeo:d.a.bool,selectedMediaType:d.a.oneOf(pt),rejectFiles:d.a.func,disableHover:d.a.bool};function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Lu=function(e){var t=function(t){I()(r,t);var n=Mu(r);function r(e){var t;return v()(this,r),(t=n.call(this,e)).state={offset:e.pageSize,pageId:1},R()(E()(t)),t}return y()(r,[{key:"handleOnScrollEnd",value:function(){var e=this.props,t=e.dataSourceFullLength,n=e.onLoadMore,r=e.pageSize,a=this.state,o=a.offset,i=a.pageId;if(!(o>t)){var s={pageId:i+1,offset:o+r};this.setState(s,(function(){n(ju(ju({},s),{},{pageSize:r}))}))}}},{key:"getItemsToRender",value:function(){var e=this.props.dataSource,t=this.state.offset;return t>e.length?e:e.slice(0,t)}},{key:"render",value:function(){var t=Object(P.omit)(this.props,["dataSource","pageSize"]),n=this.getItemsToRender();return l.a.createElement(e,o()({dataSource:n,onScrollEnd:this.handleOnScrollEnd},t))}}]),r}(c.Component);return t.propTypes={dataSource:d.a.array,dataSourceFullLength:d.a.number,onLoadMore:d.a.func,pageSize:d.a.number},t.defaultProps={onLoadMore:function(){},pageSize:100},t};function Ru(e){return Object(P.get)(e,"config.featureFlags.enableVimeo",!1)}var Nu=function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],o=a.size,i=a.name,s=a.type;o?n.push(e[r]):t({level:ns,message:"trying to upload empty file",meta:{file:{size:o,name:i,type:s}}})}return n},Uu="";function Fu(){return Uu||""}var Vu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.level,n=e.message,r=e.meta,a=e.error,o=e.props,i=void 0===o?{}:o,s=i.rootDomain,c=i.appName,l=i.websiteId,u=i.accountId,d=i.postLog;if(d){[ts,ns,rs].includes(t)||(t=ts),a&&a.message&&(n+=" ".concat(a.message));var p={level:t,message:n,meta:Object(P.merge)({},r,{websiteId:l,accountId:u,appName:c,imLiveVersion:Fu()})};a&&(a.meta&&Object.assign(p.meta,a.meta),a.stack&&(p.meta.stack=a.stack)),d({rootDomain:s,log:p})}},Bu=function(e,t){var n,r,a,o=t.map((function(e){return e.mediaType=function(e){return Et({contentType:e.type,filename:e.name})}(e),e})),i=e.searchText,s=e.selectedCollection,c=i?"SEARCH_RESULTS":s,l=(n={},h()(n,"number of images",0),h()(n,"upload click origin",c),h()(n,"numOfAssets",0),n),u=o.filter((function(e){return e.mediaType!==st})),d=qc(t),p=d.formattedSize,f=d.suffix,m=d.isValid;if(u&&u.length>0){var g=m?p+f:"No file size available";r=Nu(u,Vu),l["number of images"]+=u.length,l["number of non-videos"]=u.length,l["total upload size"]=g,l.numOfAssets+=u.length}if(Object(P.get)(e,"config.featureFlags.enableVimeo",!1)){var v=o.filter((function(e){return e.mediaType===st}));if(v&&v.length)if(e.mediaTypes.includes(st))a=v,l["number of images"]+=v.length,l["number of videos"]=v.length,l.numOfAssets+=v.length;else{var b=v[0],y=b.size,O=b.name,E=b.type;Vu({level:ns,message:"trying to upload video file in NON-VIDEO mediaType context",meta:{file:{size:y,name:O,type:E}},props:e})}}return(r||a)&&e.onFilesUpload({images:r,videos:a}),l};function Gu(e,t){(0,e.trackEvent)("IM_TRACK_UPLOAD_BUTTON_CLICK",Bu(e,t))}function zu(e,t,n){var r=e.trackEvent,a=Bu(e,t);if(n&&n.length>0){var o=n.map((function(e){return e.type})).join(", ");a["rejected file types"]=o}delete a.numOfAssets,r("IM_TRACK_DRAG_AND_DROP",a)}function Hu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Ku=Lu(lu),Wu=function(e){I()(n,e);var t=Hu(n);function n(e){var r;v()(this,n);var a=(r=t.call(this,e)).props.sourceType,o=void 0===a?xe:a;return r.state={sourceType:o},R()(E()(r)),r}return y()(n,[{key:"componentDidMount",value:function(){var e=this.props.onTrackPerfLaunchEnd;this.hasNoAssets()&&e&&e()}},{key:"resetState",value:function(){this.clearSearch(),this.setState({sourceType:xe})}},{key:"onUploadClick",value:function(e){Gu(this.props,e),this.resetState()}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];zu(this.props,e,t),this.resetState()}},{key:"clearSearch",value:function(){(0,this.props.onSearchImages)({searchText:""})}},{key:"handleOnLoadMore",value:function(e){var t=this.props,n=t.collectionAssets,r=t.sourceType,a=t.onLoadMoreMixedAssets,o=t.onLoadMoreImageDimensions,i=t.onLoadMoreVideos,s=e.nextPageId,c=e.offset,l=e.pageSize;Array.isArray(r)?a(s):r===Re&&i(),o(n.slice(c-l,c+1))}},{key:"renderUploadedImages",value:function(){var e=this.props,t=e.config,n=e.collectionAssets,r=e.collectionAssetsTotal,a=e.insertItem,i=e.deleteItem,s=e.enableDelete,c=e.uploadedAssetsFetched,u=e.pathToDataSource,d=e.OLSImageData,p=e.isSavingMetadata,f=e.collectionKey,m=e.renderNoResults,h=e.searchText,g=e.enableInlineUpload,v=e.mediaTypes,b=this.state.sourceType,y=d.olsImages;if((b===je||b===Pe)&&0===n.length)return l.a.createElement(bu,{messageID:"FOUND_ZERO"});if(c&&0===n.length&&h)return m();var O=b===De?d.pathToDataSource:u,E=y&&y.length>0?"ols-images-list":"uploaded-list",_=Object(P.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","collectionKey","renderMode","inWebsiteContext","minDimensions","preloadParams","intl","config","enableDelete","onMetadataUpdate","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","postLog","thumbnailSettings","renderUploader","mediaTypes","selectedMediaType","uploadCtaId","openOverCanvas","insertLabel"]),I=b===De?d.shouldShowMetadata:this.props.shouldShowMetadata;return l.a.createElement(Ku,o()({dataSource:n,dataSourceFullLength:r,mediaType:it,pageSize:t.pageSize,onInsertButtonClick:a,onDeleteButtonClick:s&&i,isLoading:!c,pathToDataSource:O,className:E,shouldShowMetadata:I,isSavingMetadata:p,enableInlineUpload:g&&(f===$e||St(v,ct)),onLoadMore:this.handleOnLoadMore},_))}},{key:"renderNoImages",value:function(e){var t=this.props,n=t.onBrowseStockClick,r=t.sourceType,a=t.showStockImages,o=t.postLog,i=t.mediaTypes,s=t.selectedMediaType,c=t.enableFloatingUpload;if(!e)return r===je||r===Pe?l.a.createElement(bu,{messageID:"FOUND_ZERO"}):l.a.createElement(hu,{onImagesUpload:this.onUploadClick,onBrowseStockClick:n,showStockImages:a,postLog:o,mediaTypes:i,enableVimeo:Ru(this.props),selectedMediaType:s,enableFloatingUpload:c})}},{key:"hasVideo",value:function(){var e=this.props.mediaTypes;return e&&e.includes(st)}},{key:"hasNoAssets",value:function(){var e=this.props,t=e.collectionAssets,n=e.hasUploaded,r=e.searchText,a=this.state.sourceType,o=t&&t.length>0;return a===Pe?!o:this.hasVideo()?!o&&!n&&!r:!o&&!n}},{key:"renderImageCount",value:function(){var e=this.props,t=e.breadcrumb,n=e.statusMessage,r=e.collectionAssets,a=e.collectionAssetsTotal,o=r&&a;return this.hasNoAssets()?null:l.a.createElement(Vc,{statusMessage:t?null:n,count:o,typeSuffix:_t(r)?"":Uc,type:"found"})}},{key:"trackSort",value:function(e){this.props.trackEvent("IM_TRACK_UPLOADED_SORT",h()({},"sort order",e))}},{key:"renderDropdown",value:function(){var e=this.props,t=e.uploadedOrder,n=e.intl,r=e.onImagesSort,a=t===ft?0:1;return l.a.createElement(Su,{intl:n,defaultSelected:a,onSort:r,sortOrder:t,trackEventCallback:this.trackSort})}},{key:"render",value:function(){var e=this.props,t=e.selectedMediaType,n=e.uploadedAssetsFetched,r=e.renderMode,a=e.searchText,o=e.title,i=e.breadcrumb,s=e.mediaTypes,c=e.supportsDropZone,u=e.enableProgressPopup,d=e.rejectFiles,f=e.isVimeoLoading,m=e.sourceType,h=e.renderGalleryZeroState,g=e.renderCtaArea,v=e.enableCtaSection,b=e.isVentureHomeLogo,y=e.enableInlineUpload,O=e.enableFloatingUpload,E=!n||!this.hasNoAssets(),_=(Array.isArray(m)?m.includes(Re):m===Re)&&f,I=!y&&!O&&St(s,ct)&&c&&h&&E&&!a,S=l.a.createElement("div",{className:"toolbar-info-container gray"},this.renderImageCount(),E&&!this.hasVideo()&&this.renderDropdown()),w=E?{className:"dropzone-with-images",fn:this.renderUploadedImages()}:{className:$o()("dropzone-no-images",{"product-light-border has-border":c}),fn:this.renderNoImages(v)};return l.a.createElement(l.a.Fragment,null,(i||b)&&!_&&l.a.createElement(l.a.Fragment,null,i,v&&g&&l.a.createElement("div",null,l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),g(m,this.hasNoAssets())),!(v&&this.hasNoAssets())&&l.a.createElement("div",{className:$o()("image-selector-toolbar uploaded-toolbar",{"no-progress":u})},l.a.createElement("h5",{className:"subtitle"},a?l.a.createElement(p.FormattedMessage,{id:"RESULTS_LABEL",values:{searchText:a}}):l.a.createElement(p.FormattedMessage,{id:o||"RECENTLY_ADDED"})),S)),l.a.createElement(Du,{className:$o()(w.className,{"full-scroll":r===Qi}),onDrop:this.onModalFileDrop,disabled:!c,mediaTypes:s,enableVimeo:Ru(this.props),selectedMediaType:t,rejectFiles:d},I&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),h(),l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"MY_UPLOADS"}))),l.a.createElement("div",{className:"uploaded-images-container"},_?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(M.a,{size:"lg"})):w.fn)))}}]),n}(c.Component);Wu.propTypes=Object.assign({collectionAssets:d.a.array,collectionAssetsTotal:d.a.number,OLSImageData:d.a.object,recentUploadedImages:d.a.arrayOf(d.a.shape({filename:d.a.string,imageUrl:d.a.string})),enableDelete:d.a.bool,autoSelectAfterUpload:d.a.bool,onFilesDelete:d.a.func,onImagesUpload:d.a.func,onMetadataUpdate:d.a.func,onLoadMoreImages:d.a.func,onCoverImageUpdate:d.a.func,renderGalleryZeroState:d.a.func,onBrowseStockClick:d.a.func,uploadedAssetsFetched:d.a.bool,selectionLimit:d.a.number,showStockImages:d.a.bool,uploadedOrder:d.a.oneOf([ft,"OLDEST"]),hasUploaded:d.a.bool,searchText:d.a.string,title:d.a.string,onFivToggle:d.a.func,back:d.a.func,renderNoResults:d.a.func,enableCtaSection:d.a.bool},Ke,We,qe);var qu=Wu;function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qu=function(e,t){var n=js(e),r=n.renderMode,a=n.placement;return Ms(e).appName===Ve&&"LOGO"===a||r===Qi&&(t===Pe?Kl(e)&&function(e){return Gl(e,"ML_standalone_logo_promo")===zl}(e):t===Re&&function(e){return Gl(e,"ML_standalone_video_promo")===zl}(e))},$u=Object(f.connect)((function(e,t){var n=t.sourceType,r=js(e),a=ac(e).selectedItems,o=Gs(e),i=function(e,t){if(Array.isArray(t)){if(t.length>1)return Zs(e);t=t[0]}var n=Bs(e),r=n.uploadedImages,a=As({uploadedAssetsFetched:n.uploadedImagesFetched},Io()(n,["uploadedImages","uploadedImagesFetched"]));switch(t){case De:var o=Gs(e).olsImages;return As({uploadedAssets:o,uploadedAssetsTotal:o.length},a);case Pe:var i=Ks(e,Pe);return As({uploadedAssets:i,uploadedAssetsTotal:i.length},a);case Fe:var s=Hs(e,Fe,[it,ct,lt]);return As({uploadedAssets:s,uploadedAssetsTotal:s.length},a);case je:var c=Ks(e,je);return As({uploadedAssets:c,uploadedAssetsTotal:c.length},a);case"documents":var l=zs(e);return As({uploadedAssets:l,uploadedAssetsTotal:l.length},a);case"images":var u=Ws(e);return As({uploadedAssets:u,uploadedAssetsTotal:u.length},a);case Ue:var d=$s(e);return As({uploadedAssets:d,uploadedAssetsTotal:d.length},a);case Re:var p=Qs(e),f=p.uploadedVideos,m=p.uploadedVideosFetched,h=Io()(p,["uploadedVideos","uploadedVideosFetched"]);return As({uploadedAssets:f,uploadedAssetsTotal:h.totalVideosInAccount,uploadedAssetsFetched:m},h);case"photoshoot":var g=Ks(e,"photoshoot");return As({uploadedAssets:g,uploadedAssetsTotal:g.length},a);case xe:default:return As({uploadedAssets:r,uploadedAssetsTotal:r.length},a)}}(e,n),s=i.uploadedAssets,c=Io()(i,["uploadedAssets"]);return Xu(Xu({config:r,OLSImageData:o},c),{},{selectedItems:a,collectionAssets:s,collectionAssetsTotal:c.uploadedAssetsTotal,enableCtaSection:Qu(e,n)})}),(function(e){return{onFilesDelete:function(t){e(Zr(t))},onFilesUpload:function(t){var n=t.images,r=t.videos;e(Vr({images:n,videos:r}))},onImagesSort:function(t){e(Jr(t))},onSearchImages:function(t){e(qa(t))},onLoadMoreVideos:function(){e(co())},onLoadMoreImageDimensions:function(t){e(Ha(t))},onLoadMoreMixedAssets:function(t){e(lo(t))}}}))(qu);function Zu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Ju=function(e){I()(n,e);var t=Zu(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"renderImages",value:function(){var e=this.props,t=e.stockImages,n=e.isLoadingNextStock,r=e.onStockScrollEnd,a=e.stockNextPageUrl,i=e.insertItem,s=Object(P.pick)(this.props,["tabKey","pathToDataSource","selectionLimit","trackEvent","thumbnailSize","preloadParams","intl","renderMode","config","openOverCanvas","insertLabel"]);return t.length>0?l.a.createElement(lu,o()({dataSource:t,isLoadingNext:n,onScrollEnd:r.bind(this,a),mediaType:it,onInsertButtonClick:i},s)):l.a.createElement(bu,{messageID:"NO_STOCK_IMAGES_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.isSearching,n=e.intl,r=e.renderQuickSummary,a=e.stockImageQuery,o=e.stockTotalCount;return l.a.createElement(l.a.Fragment,null,r({searchText:a,totalCount:o}),t?l.a.createElement(bl,{intl:n}):this.renderImages())}}]),n}(c.Component);Ju.propTypes=Object.assign({stockImages:d.a.array.isRequired,defaultSearchKeyword:d.a.string,onStockScrollEnd:d.a.func,stockTotalCount:d.a.number,stockNextPageUrl:d.a.string,insertItem:d.a.func,renderQuickSummary:d.a.func},Ke,We,qe),Ju.defaultProps={renderQuickSummary:function(){}};var ed=Ju,td="GET",nd="SEARCH",rd=n(4),ad=n.n(rd),od=n(22),id=n.n(od),sd={getStockImagesCacheKey:function(e){var t=e.market,n=e.businessCategory;return"".concat(t,"#").concat(n,"#images")},getStockVideosCacheKey:function(e){var t=e.market,n=e.businessCategory;return"".concat(t,"#").concat(n,"#videos")}},cd=new Set(["jpg","jpeg","png","gif","webp","svg","tif","tiff"]);var ld=function(e){try{var t=new URL(e).pathname.split(".").pop().toLocaleLowerCase();return cd.has(t)?".".concat(t):""}catch(e){return""}};function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pd(e){return e.mediaType===it?dd(dd({},e),{},{imageUrl:e.url}):dd(dd({},e),{},{url:e.dataUrl,imageUrl:e.dataUrl})}function fd(e){var t=e.result.map((function(e){return dd(dd({},e),{},{sourceType:xe,mediaType:it,imageUrl:e.url,isStockMedia:!0,size:e.size.resized,dimensions:Object(P.pick)(e.dimensions,["width","height"]),permission:{edit:!0,download:!1,delete:!1}})}));return dd(dd({},e),{},{result:t})}function md(e){var t=e.result.map((function(e){return dd(dd({},e),{},{isStockMedia:!0,sourceType:xe,mediaType:st,imageUrl:e.image,videoUrl:e.video})}));return dd(dd({},e),{},{result:t})}function hd(e,t){var n,r,a,o,i,c=dd(dd({},e),{},{size:e.size?Number.parseInt(e.size,10):null,sourceType:xe,mediaType:Et(e),basePath:(n=e.filename,r=n.split("/"),a=s()(r,2),o=a[0],i=a[1],o&&i?o:null),permission:{delete:!0,download:!0,edit:!0}});return t&&(c.originalFilename=t),pd(c)}function gd(e,t){return e.map((function(e){return hd(e,t)}))}function vd(e){var t=e.videos,n=Io()(e,["videos"]);return dd({videos:t.map((function(e){return dd(dd({},e),{},{originalFilename:e.name,createdAt:e.created_time,isVimeoCreate:Object(P.get)(e,"metadata.is_vimeo_create",!1),permission:{download:!1,delete:!0}})}))},n)}function bd(e,t){var n=t.containerId,r=t.assetBaseUrl,a=t.assetBaseDataUrl,o=t.originalFilename,i=t.containerIdLoopkup;return e.map((function(e){var t;try{t=e.filename.split("/").map(encodeURIComponent).join("/")}catch(n){t=e.filename}var s=dd(dd({},e),{},{url:"".concat(r,"/").concat(i[e.containerKey]||n,"/").concat(t),dataUrl:"".concat(a,"/").concat(i[e.containerKey]||n,"/").concat(t)});return delete s.containerKey,hd(s,o)}))}function yd(e){var t=e.data.reduce((function(e,t){var n=function(e){e.images.sort((function(e,t){return e.height<t.height?-1:e.height>t.height?1:0}));var t=e.images[e.images.length-1],n=e.images.find((function(e){return e.height>=175}))||t;return{url:t.source,height:t.height,width:t.width,thumbnail:n.source}}(t),r=n.width,a=n.height,o=n.url,i=n.thumbnail;return e[t.id]={id:t.id,name:t.name,thumbnail:i,url:o,imageUrl:o,filename:"fb_".concat(t.id,"_").concat(r,"x").concat(a).concat(ld(o)),sourceType:Me,mediaType:it,dimensions:{width:r,height:a}},e}),{});return dd(dd({},e),{},{data:t})}function Od(e){var t=(e||{}).payload,n=(t=void 0===t?{}:t).posts,r=t.next,a=void 0===r?"":r;return{posts:n.filter((function(e){return e.mediaType===it})).map((function(e){var t=e.mediaURL.match(/s[1-9][0-9]*x[1-9][0-9]*/g),n=dd(dd({},e),{},{sourceType:Le,imageUrl:e.mediaURL,url:e.mediaURL,filename:"ig_".concat(e.id).concat(ld(e.mediaURL))});if(t){var r=t[0].slice(1).split("x");n.dimensions={width:parseInt(r[0],10),height:parseInt(r[1],10)}}return n})),next:a}}function Ed(e,t){return t.map((function(t){return pd(dd(dd({},t),{},{size:t.size?Number.parseInt(t.size,10):null,sourceType:e,mediaType:Et(t),permission:{download:!0,edit:!0}}))}))}function _d(e){var t=e.slug,n=e.name,r=e.description_text,a=void 0===r?"":r,o=e.relative_url;return{id:t,name:n,description:a,mediaType:dt,url:o}}function Id(e){var t=e.pages,n=e.total_count,r=e.current_page;return{data:e.products.map((function(e){var t=e.default_asset_url,n=e.updated_at,r=e.price,a=void 0===r?{}:r,o=e.sale_price,i=void 0===o?{}:o,s=i&&i.numeric?i.display:null;return dd({image:t,price:a.display,salePrice:s,updatedAt:n,permission:{download:!1,delete:!1,edit:!1}},_d(e))})),totalCount:n,page:r,hasNext:r<t}}function Sd(e){var t=e.name,n=e.description,r=e.master,a=(r=void 0===r?{}:r).display_price,o=r.display_sale_price,i=r.images,s=void 0===i?[]:i,c=e.url;return dd(dd({},_d(e)),{},{descriptionRaw:n,price:a,salePrice:o,images:s.map((function(e){return{url:e.original_url}})),url:c,productName:t})}function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kd(){return(kd=id()(ad.a.mark((function e(t,n,r){var a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=js(t),o=a.renderMode,i=a.pageSize,s=a.mediaTypes,c=a.market,l=a.businessCategory,u=a.rootDomain,e.prev=2,!(!St(s,st)&&!St(s,dt)&&o!==Qi)){e.next=19;break}if(d=ec(t),p=d.categoryStockImages,f=sd.getStockImagesCacheKey({market:c,businessCategory:l}),m=p[f],Object(P.isEmpty)(m)){e.next=11;break}return n({changeState:function(e){return Td(Td({},e),{},{stock:m,stockTotalCount:m.length,stockNextPageUrl:"",stockImageQuery:""})},inProgress:!1}),e.abrupt("return");case 11:return n({inProgress:!0}),h=Ps(t),g=h.api,e.next=15,g.stockImages.load.makeRequest({market:c,businessCategory:l,rootDomain:u,pageSize:i});case 15:v=e.sent,b=v.data,y=fd(b),O=y.result,n({changeState:function(e){return Td(Td({},e),{},{stock:Object(P.toArray)(O),stockTotalCount:b.totalCount,stockNextPageUrl:b.nextPage,stockImageQuery:""})},inProgress:!1});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),r(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ad(){return(Ad=id()(ad.a.mark((function e(t,n,r,a){var o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=js(t),i=o.pageSize,s=o.market,c=o.rootDomain,s&&c){e.next=5;break}return e.abrupt("return");case 5:return n({inProgress:!0}),l=Ps(t),u=l.api,e.next=9,u.stockImages.search.makeRequest({market:s,rootDomain:c,query:a,pageSize:i});case 9:d=e.sent,p=d.data,f=fd(p),m=f.result,n({changeState:function(e){return xd(xd({},e),{},{stock:Object(P.toArray)(m),stockTotalCount:p.totalCount,stockNextPageUrl:p.nextPage,stockImageQuery:a})},inProgress:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jd(){return(jd=id()(ad.a.mark((function e(t,n,r,a){var o,i,s,c,l,u;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}return e.abrupt("return");case 3:return n({inProgress:!0}),o=Ps(t),i=o.api,e.next=7,i.stockImages.nextPage.makeRequest(a);case 7:s=e.sent,c=s.data,l=fd(c),u=l.result,n({changeState:function(e){return Pd(Pd({},e),{},{stock:e.stock.concat(Object(P.toArray)(u)),stockTotalCount:c.totalCount,stockNextPageUrl:c.nextPage})},inProgress:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),r(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var Md={get:function(e,t,n){return kd.apply(this,arguments)},search:function(e,t,n,r){return Ad.apply(this,arguments)},nextPage:function(e,t,n,r){return jd.apply(this,arguments)}};function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nd(e,t,n){return Ud.apply(this,arguments)}function Ud(){return(Ud=id()(ad.a.mark((function e(t,n,r){var a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O,E,_,I,S=arguments;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S.length>3&&void 0!==S[3]?S[3]:{},o=a.sortOrder,i=a.keywords,s=a.page,c=void 0===s?1:s,e.prev=1,n({inProgress:!0}),l=Ps(t),u=l.api,d=js(t),p=d.rootDomain,f=d.websiteId,m=d.market,h=Ns(t),o||(o=h.sortOrder||ft),"string"!=typeof i&&(i=h.keywords),g={rootDomain:p,websiteId:f,page:c,sortOrder:o},i&&Object.assign(g,{market:m,keywords:i}),e.next=12,u.products.load.makeRequest(g);case 12:v=e.sent,b=v.data,y=Id(b),O=y.data,E=y.page,_=y.totalCount,I=y.hasNext,n({changeState:function(e){return Rd(Rd({},e),{},{page:E,hasNext:I,products:c>1?h.products.concat(O):O,productsFetched:!0,totalCount:_,sortOrder:o,keywords:i})},inProgress:!1}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),r(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function Fd(){return(Fd=id()(ad.a.mark((function e(t,n,r){var a,o,i,s,c;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=Ns(t),o=a.page,i=void 0===o?0:o,s=a.sortOrder,c=a.keywords,!a.isLoadingNext){e.next=5;break}return e.abrupt("return");case 5:Nd(t,n,r,{sortOrder:s,keywords:c,page:i+1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Vd,Bd={get:Nd,search:function(e,t,n,r){return Nd(e,t,n,{keywords:r})},nextPage:function(e,t,n){return Fd.apply(this,arguments)}},Gd=(Vd={},h()(Vd,"STOCKIMAGES",Md),h()(Vd,"PRODUCTS",Bd),Vd),zd=function(){function e(t,n,r,a){v()(this,e),this.key=t,this.actions=n,this.stateCallback=r,this.errorCallback=a}return y()(e,[{key:"action",value:function(e){switch(e){case td:return this.actions.get;case nd:return this.actions.search;case"NEXTPAGE":return this.actions.nextPage;default:return null}}},{key:"get",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.get&&this.actions.get(n(),this.stateCallback.bind(null,r,td),this.errorCallback.bind(null,r,td),e)}},{key:"search",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.search&&this.actions.search(n(),this.stateCallback.bind(null,r,nd),this.errorCallback.bind(null,r,nd),e)}},{key:"nextPage",value:function(e,t){var n=t.getState,r=t.dispatch;this.actions&&this.actions.nextPage&&this.actions.nextPage(n(),this.stateCallback.bind(null,r,"NEXTPAGE"),this.errorCallback.bind(null,r,"NEXTPAGE"),e)}}]),e}();function Hd(e){if(!(e in Gd))return null;return new zd(e,Gd[e],(function(t,n,r){t({type:"SOURCE_NOTIFY",payload:{notifyResult:r,sourceType:e,action:n}})}),(function(t,n,r){t({type:"SOURCE_ERROR",payload:{notifyResult:r,sourceType:e,action:n}})}))}function Kd(e,t,n){return{sourceKey:e,action:t,payload:n}}var Wd=function(){function e(t,n){v()(this,e),this.sources=t,this.dispatch=n}return y()(e,[{key:"dispatchAction",value:function(e,t){var n=this;this.sources.map((function(r){r.action(e)&&n.dispatch({type:"SOURCE_INVOKE",payload:Kd(r.key,e,t)})}))}}]),e}();function qd(e,t){var n=[];return e.map((function(e){var t=Hd(e);t&&n.push(t)})),new Wd(n,t)}var Yd=Object(f.connect)((function(e){return Object.assign({config:js(e)},Vs(e))}),(function(e){var t=qd(["STOCKIMAGES"],e);return{onStockScrollEnd:function(e){t.dispatchAction("NEXTPAGE",e)}}}))(ed);function Xd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Qd=function(e){I()(n,e);var t=Xd(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"renderThumbnailList",value:function(){var e=this.props,t=e.tabKey,n=e.stockVideos,r=e.selectItem,a=e.insertItem,i=Object(P.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","intl","renderMode","config","insertLabel"]);return n.stockVideosTotalCount>0?l.a.createElement(lu,o()({tabKey:t,dataSource:n.stockVideos,pathToDataSource:n.pathToDataSource,onThumbnailClick:r,mediaType:st,onInsertButtonClick:a},i)):l.a.createElement(bu,{messageID:"NO_STOCK_VIDEOS_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.renderQuickSummary,r=e.stockVideos,a=r.stockVideosQuery,o=r.isSearching,i=r.stockVideosTotalCount;return l.a.createElement(l.a.Fragment,null,n({searchText:a,totalCount:i}),o?l.a.createElement(bl,{intl:t}):this.renderThumbnailList())}}]),n}(c.Component);Qd.propTypes=Object.assign({stockVideos:d.a.object,onStockVideosSearch:d.a.func.isRequired,stockVideosTotalCount:d.a.number,renderQuickSummary:d.a.func},Ke,We,qe),Qd.defaultProps={renderQuickSummary:function(){}};var $d=Qd,Zd=Object(f.connect)((function(e){return Object.assign({stockVideos:Js(e),config:js(e)})}),(function(e){return{onStockVideosSearch:function(t){t&&e(Mr(t))}}}))($d);function Jd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var ep=function(e){I()(n,e);var t=Jd(n);function n(e){var r,a,o,i;return v()(this,n),r=t.call(this,e),h()(E()(r),"renderQuickSummary",(function(e){var t=e.totalCount,n=e.searchText,a=r.props.breadcrumb;return a?l.a.createElement(l.a.Fragment,null,a,l.a.createElement("div",{className:"image-selector-toolbar gray flex"},l.a.createElement("h5",null,n?l.a.createElement(p.FormattedMessage,{id:"RESULTS_LABEL",values:{searchText:n}}):l.a.createElement(p.FormattedMessage,{id:"STOCK_MEDIA"})),l.a.createElement(Vc,{statusMessage:null,count:t,type:"found",typeSuffix:r.state.selectedMediaType===st?Fc:""}))):null})),R()(E()(r)),r.state={selectedMediaType:(a=r.props,o=a.selectedMediaType,i=a.mediaTypes,i.includes(o)?o:i[0])},r}return y()(n,[{key:"render",value:function(){var e=Object(P.pick)(this.props,["selectionLimit","trackEvent","thumbnailSize","multiSelect","statusMessage","intl","collectionKey","renderMode","onLoadMoreImages","insertLabel"]);return e.renderQuickSummary=this.renderQuickSummary,l.a.createElement("div",{className:"stock-media"},l.a.createElement("div",{className:"stock-media-container"},this.state.selectedMediaType===it?l.a.createElement(Yd,o()({},e,Object(P.pick)(this.props,["insertItem","onStockImagesSearch","onStockScrollEnd","stockNextPageUrl","defaultSearchKeyword","stockTotalCount","openOverCanvas"]))):l.a.createElement(Zd,o()({},e,Object(P.pick)(this.props,["insertItem","onStockVideosSearch","stockVideosTotalCount","defaultSearchKeyword"])))))}}]),n}(c.Component);ep.propTypes=Object.assign({defaultSearchKeyword:d.a.string,onStockScrollEnd:d.a.func,stockTotalCount:d.a.number,stockNextPageUrl:d.a.string,insertItem:d.a.func,statusMessage:d.a.element,selectedMediaType:d.a.string},Ke,We,qe),ep.defaultProps={selectedMediaType:it,mediaTypes:[it,st]};var tp=ep;function np(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var rp=function(e){I()(n,e);var t=np(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.back,n=e.hasMargin,r=e.searchText?"SEARCH_ALL_MEDIA":"BACK_TO_ALL_MEDIA";return l.a.createElement("div",{className:$o()("collection-breadcrumb",{"has-margin":n})},l.a.createElement("span",{className:"primary",onClick:t},l.a.createElement(Mc.a,{width:18,height:18}),l.a.createElement(p.FormattedMessage,{id:r})))}}]),n}(c.Component);rp.propTypes={back:d.a.func.isRequired,hasMargin:d.a.bool,searchText:d.a.string};var ap=rp;function op(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var ip=Lu(lu),sp=function(e){I()(n,e);var t=op(n);function n(){var e;v()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),h()(E()(e),"getWebsiteImages",(function(){var t=e.props.website;return Object(P.get)(t,"images",[])})),h()(E()(e),"onLoadMore",(function(t){var n=t.offset,r=t.pageSize;(0,e.props.onLoadMoreImageDimensions)(e.getWebsiteImages().slice(n-r,n+1))})),e}return y()(n,[{key:"renderThumbnailList",value:function(){var e=this.props,t=e.website,n=e.isLoading,r=e.trackEvent,a=e.postLog,o=e.intl,i=e.onFullScreenInsertClick,s=e.minDimensions,c=e.preloadParams,u=e.selectionLimit,d=e.collectionKey,p=e.config,f=e.renderMode,m=e.openOverCanvas,h=e.insertLabel,g=this.getWebsiteImages();return 0!==g.length||n?l.a.createElement(ip,{collectionKey:d,selectionLimit:u,dataSource:g,mediaType:it,sourceType:t&&t.type,isLoading:n,trackEvent:r,postLog:a,intl:o,minDimensions:s,preloadParams:c,onInsertButtonClick:i,pageSize:p.pageSize,onLoadMore:this.onLoadMore,renderMode:f,openOverCanvas:m,insertLabel:h,config:p}):l.a.createElement(bu,{messageID:"NO_IMAGES_LABEL"})}},{key:"render",value:function(){var e=this.props,t=e.website,n=e.renderDownloadButton,r=e.renderMode,a=(Object(P.get)(t,"domainName","")||Object(P.get)(t,"name","")).toUpperCase(),o=Object(P.get)(t,"images.length",0),i=r===$i?"default":"primary",s=_t(t.images);return l.a.createElement("div",{className:"image-list"},o>0&&l.a.createElement("div",{className:"asset-label image-selector-toolbar gray"},l.a.createElement("div",{className:"action-button-container"},l.a.createElement("div",null,n(i)),l.a.createElement("div",{className:"other-sites-label"},l.a.createElement(p.FormattedMessage,{id:s?"OTHER_SITES_IMAGES_LABEL":"OTHER_SITES_FILES_LABEL",values:{domainName:a}}))),l.a.createElement(Vc,{typeSuffix:s?"":Uc,count:o,type:"found"})),this.renderThumbnailList())}}]),n}(c.Component);sp.defaultProps={renderDownloadButton:function(){}},sp.propTypes=Object.assign({website:d.a.object,isLoading:d.a.bool,onFullScreenInsertClick:d.a.func,renderDownloadButton:d.a.func},Ke,We,qe);var cp=sp;function lp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var up=function(e){I()(n,e);var t=lp(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"onOtherSiteClick",value:function(e){var t=this.props.onOtherSiteClick;t(e)}},{key:"onSiteTypeClick",value:function(e){(0,this.props.trackEvent)("IM_TRACK_".concat(e.toUpperCase(),"_SITE_TYPE_CLICK"))}},{key:"render",value:function(){var e=this.props,t=e.otherSites,n=t.selectedWebsite,r=t.isLoadingImages,a=e.config,o=e.trackEvent,i=e.postLog,s=e.intl,c=e.insertImages,u=e.minDimensions,d=e.preloadParams,p=e.statusMessage,f=e.selectionLimit,m=e.onLoadMoreImageDimensions,g=e.renderMode,v=e.breadcrumb,b=e.openOverCanvas,y=e.insertLabel;return l.a.createElement(l.a.Fragment,null,v,l.a.createElement("div",{className:"other-sites"},l.a.createElement(cp,{selectionLimit:f,website:n,isLoading:r,trackEvent:o,postLog:i,intl:s,config:a,statusMessage:p,minDimensions:u,preloadParams:n&&n.type===xe?d:null,renderMode:g,onLoadMoreImageDimensions:m,onFullScreenInsertClick:function(e){c(e),o("IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK",h()({},"number of images",1))},openOverCanvas:b,insertLabel:y})))}}]),n}(c.Component);up.propTypes=Object.assign({otherSites:d.a.object.isRequired,onOtherSiteClick:d.a.func.isRequired,insertImages:d.a.func.isRequired,onLoadMoreImages:d.a.func},Ke,We,qe);var dp=up,pp=Object(f.connect)((function(e){return{config:js(e),otherSites:tc(e)}}),(function(e){return{onOtherSiteClick:function(t){e(da(t))},onLoadMoreImageDimensions:function(t){e(Ha(t))}}}))(dp),fp=function(e){var t="number"==typeof e;return{width:t?e:e.width,height:t?e:e.height}};function mp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var hp=function(e){I()(n,e);var t=mp(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"componentDidUpdate",value:function(e){this.props.onImagesLoaded&&e.isLoading&&!this.props.isLoading&&this.props.onImagesLoaded()}},{key:"formatThumbnailUrl",value:function(e,t){var n=e;return this.props.canGenerateThumbnails&&(n=di({url:e,width:t?155:75,height:t?110:55})),'url("'.concat(n,'")')}},{key:"renderDocument",value:function(e){var t=e.mediaType,n=e.url,r=e.style,a=e.className,o=e.key,i=e.filename,s=this.props.postLog;switch(t){case ct:return l.a.createElement(is,{filename:i,postLog:s,key:o,url:n,style:r,className:a});case lt:return l.a.createElement(cs,{docType:lt,filename:i,className:a,style:r});case ut:return l.a.createElement(cs,{docType:ut,filename:i,className:a,style:r});default:return null}}},{key:"renderGallery",value:function(){var e=this,t=this.props,n=t.gallery,r=t.url,a=t.isLoading,o=["mb mr","mb ml","mt mr","mt ml"];if(a)return l.a.createElement("div",{className:"image-selector-item"},o.map((function(e){return l.a.createElement("div",{className:"gradient-animation "+e,key:e})})));if(Object(P.get)(n,"length",0)<4){var i=Object(P.get)(n,"0.mediaType");if(!r&&[ct,lt,ut].includes(i))return l.a.createElement("div",{className:"image-selector-item"},this.renderDocument({mediaType:i,url:n[0].url,style:{width:155,height:110},filename:n[0].filename}));var s=r||Object(P.get)(n,"0.url"),c=this.formatThumbnailUrl(s,!0);return l.a.createElement("div",{className:"image-selector-item",style:{backgroundImage:c}})}return l.a.createElement("div",{className:"image-selector-item has-gallery"},n.slice(0,4).map((function(t,n){var r=t.url,a=t.imageUrl,i=t.mediaType;return[ct,lt,ut].includes(i)?e.renderDocument({mediaType:i,url:r,key:n,className:$o()(o[n],"gallery-pdf-item product-background"),style:{width:75,height:55}}):l.a.createElement("div",{key:n,className:$o()(o[n],"gallery-item product-background"),style:{backgroundImage:e.formatThumbnailUrl(a,!1)}})})))}},{key:"render",value:function(){var e=this.props,t=e.onCollectionClick,n=e.gallery,r=e.isLoading,a=e.zeroState,o=e.renderMode,i=e.EmptyStateIcon,s=n&&0===n.length&&!r,c=a?l.a.createElement("img",{src:a,alt:""}):l.a.createElement("div",null,l.a.createElement(i,{height:32,width:32}));return l.a.createElement("li",{role:"presentation","data-click-eid":"select_button_click",onClick:t,className:$o()("modal-image-selector-item-container product-light-border",{"collection-item":!s,"collection-zero-state":s,"product-background embedded-collection-container":o===Qi})},s?c:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"collection-background product-light-border"}),l.a.createElement("div",{className:"background-overlay"}),this.renderGallery()))}}]),n}(c.Component);hp.propTypes={url:d.a.string,onCollectionClick:d.a.func.isRequired,gallery:d.a.array,zeroState:d.a.string,isLoading:d.a.bool,canGenerateThumbnails:d.a.bool,renderMode:d.a.oneOf([$i,Qi]),postLog:d.a.func,EmptyStateIcon:d.a.oneOfType([d.a.func,d.a.object]),onImagesLoaded:d.a.func},hp.defaultProps={isLoading:!1,canGenerateThumbnails:!1,EmptyStateIcon:jo.a};var gp=hp;function vp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var bp=function(e){I()(n,e);var t=vp(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"renderNoAlbums",value:function(){return l.a.createElement(bu,{messageID:"NO_ALBUMS_LABEL"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,r=t.onAlbumClick,a=t.onScrollEnd,o=t.isLoadingAlbum,i=t.intl,s=fp(this.props.thumbnailSize),c=s.width,u=s.height;if(!n)return this.renderNoAlbums();var d=Object(P.values)(n.albums);if(0===d.length)return this.renderNoAlbums();var p=n.id,f=n.after,m=d.map((function(t,n){return l.a.createElement("span",{key:n,className:"image-collection"},l.a.createElement(gp,{index:n,key:n,url:t.coverPhoto,width:c,height:u,onCollectionClick:r.bind(e,{albumId:t.id})}),l.a.createElement("p",{className:"collection-title"},t.name))})),h=l.a.createElement(oi,{className:Lc("thumbnail-list scrollable uploaded-list"),dataAid:"thumbnail-list",mediaType:it,onScrollEnd:a.bind(this,{pageId:p,after:f})},m);return o?l.a.createElement(bl,{intl:i}):l.a.createElement("div",{className:"thumbnail-list-wrapper"},h)}}]),n}(c.Component);bp.propTypes=Object.assign({page:d.a.object,onAlbumClick:d.a.func,onScrollEnd:d.a.func},Ke,We,qe),bp.defaultProps={thumbnailSize:{width:200,height:105}};var yp=bp,Op=n(41),Ep=n.n(Op),_p=n(84),Ip=n.n(_p);function Sp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var wp=Mt.IM_SOCIAL_ACCESS_TOKEN_GET,Tp=function(e){I()(n,e);var t=Sp(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"receiveMessage",value:function(e){e.origin===window.location.origin&&e.data===wp&&(0,this.props.getSocialAccessToken)(Me)}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"onClickLoginButton",value:function(){var e=this.props,t=e.authUrl,n=e.trackEvent;window.open(t,"bb_media_manager_auth","status=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,scrollbars=1,width=960,height=540"),n("IM_TRACK_FACEBOOK_CONNECT_CLICK")}},{key:"render",value:function(){var e=this.props,t=e.authUrl,n=e.intl;return t?l.a.createElement("div",{className:"fb-login"},l.a.createElement("div",{className:"col-sx-12"},l.a.createElement("span",{className:"icon-website"},l.a.createElement(Ep.a,null)),l.a.createElement("h2",{className:"fb-login-heading"},l.a.createElement(p.FormattedMessage,{id:"CONNECT_FB_PAGE"})),l.a.createElement("p",{className:"fb-login-subtext"},l.a.createElement(p.FormattedMessage,{id:"ADD_FB_IMAGES"})),l.a.createElement(Ko.a,{design:"primary",onClick:this.onClickLoginButton,"data-aid":bi,icon:l.a.createElement(Ip.a,{height:14,width:14,fill:"white"}),text:n.formatMessage({id:"CONNECT_FB"})}))):null}}]),n}(c.Component);Tp.propTypes={getSocialAccessToken:d.a.func,authUrl:d.a.string,trackEvent:d.a.func};var kp=Tp;function Cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var xp=function(e){I()(n,e);var t=Cp(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.businessPlus,n=e.accountId,r=e.rootDomain,a=t?"https://dashboard.".concat(r,"/facebook/connect?accountId=").concat(n,"&ua_placement=image_library"):"https://www.facebook.com/pages/create",o=l.a.createElement("a",{className:"create-page-link",href:a,target:"_blank",rel:"noreferrer"},l.a.createElement(p.FormattedMessage,{id:"HERE"}));return l.a.createElement("div",{className:"social-zero-state"},l.a.createElement("div",{className:"col-sx-12"},l.a.createElement("span",{className:"icon icon-website"},l.a.createElement(Ep.a,null)),l.a.createElement("h2",{className:"social-zero-state-heading"},l.a.createElement(p.FormattedMessage,{id:"NO_PAGES_LABEL"})),l.a.createElement("p",{className:"social-zero-state-subtext gray-light"},l.a.createElement(p.FormattedMessage,{id:"CREATE_FB_PAGE",values:{here:o}}))))}}]),n}(l.a.Component);xp.propTypes={intl:d.a.object.isRequired,trackEvent:d.a.func,businessPlus:d.a.bool,accountId:d.a.string,rootDomain:d.a.string};var Ap=xp;function Dp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Pp=function(e){I()(n,e);var t=Dp(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.state={authComplete:!1},r.onAlbumClick=Object(P.throttle)(r.onAlbumClick,1e3),r}return y()(n,[{key:"getSelectedPage",value:function(){var e=this.props.socialMedia[Me],t=e.pages,n=e.selectedPageId;return n?t[n]:null}},{key:"getSelectedAlbum",value:function(){var e=this.props.socialMedia[Me].selectedAlbumId;if(!e)return null;var t=this.getSelectedPage();return t?t.albums[e]:null}},{key:"onAlbumClick",value:function(e){var t=e.albumId,n=e.after,r=this.props;(0,r.onFBAlbumClick)({albumId:t,accessToken:r.socialMedia[Me].auth.accessToken,after:n})}},{key:"renderThumbnailList",value:function(){var e=this.props,t=e.trackEvent,n=e.intl,r=e.minDimensions,a=e.preloadParams,o=e.insertImages,i=e.selectionLimit,s=e.insertLabel,c=e.socialMedia,u=c.pathToDataSource,d=c[Me].isLoadingNextPhotos,p=e.collectionKey,f=e.renderMode,m=e.config,g=e.inWebsiteContext,v=e.onCoverImageUpdate,b=this.getSelectedAlbum();if(!b)return null;var y=Object(P.values)(Object(P.get)(b,"photos",{}),"id"),O=b.id,E=b.after;return 0===y.length?l.a.createElement(bu,{messageID:"SOCIAL_NO_IMAGES_LABEL"}):l.a.createElement(lu,{collectionKey:p,selectionLimit:i,dataSource:y,pathToDataSource:u,mediaType:it,sourceType:Me,trackEvent:t,intl:n,renderMode:f,className:"social-images-list",minDimensions:r,preloadParams:a,onInsertButtonClick:function(e){o(e),t("IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK",h()({},"number of images",1))},onScrollEnd:this.onAlbumClick.bind(this,{albumId:O,after:E}),config:m,isLoadingNext:d,inWebsiteContext:g,onCoverImageUpdate:v,insertLabel:s})}},{key:"renderBreadcrumb",value:function(){var e=this.getSelectedPage(),t=this.getSelectedAlbum(),n=e?Object(P.values)(e.albums).length:0,r=t?t.count:0,a=e?e.name:"",o=this.props,i=o.onPageClick,s=o.socialMedia[Me].selectedPageId,c=o.statusMessage;return l.a.createElement("div",{className:"asset-label gray image-selector-toolbar"},t?l.a.createElement("span",{className:"page-name"},l.a.createElement("span",{className:"breadcrumb-root primary",onClick:i.bind(this,{pageId:s})},a),l.a.createElement("span",{className:"breadcrumb-divide"},"/"),l.a.createElement("span",{className:"breadcrumb-tail"},t.name)):l.a.createElement("span",{className:"page-name"},a),t?l.a.createElement("div",{className:"mobile-breadcrumb"},l.a.createElement("span",{className:"breadcrumb-back primary",onClick:i.bind(this,{pageId:s})},l.a.createElement("span",null,l.a.createElement("span",{className:"icon primary"},l.a.createElement(Mc.a,null)),l.a.createElement(p.FormattedMessage,{id:"BACK_TO_ALBUMS"}))),r>0&&l.a.createElement(Vc,{statusMessage:c,count:r,type:"found"})):n>0&&l.a.createElement(Vc,{count:n,type:"found_albums"}))}},{key:"renderFBData",value:function(){var e=this.props,t=e.socialMedia[Me],n=t.pages,r=t.selectedAlbumId,a=e.planFeatures,o=e.thumbnailSize,i=e.config,s=e.config,c=s.accountId,u=s.rootDomain,d=e.intl,p=e.trackEvent,f=e.onPageClick,m=e.inWebsiteContext,g=this.state.authComplete,v=Object.keys(n).length,b=a&&a.planFeatures.socialMediaManager;if(0===v)return l.a.createElement(Ap,{intl:d,trackEvent:p,businessPlus:b,accountId:c,rootDomain:u});g||(p("IM_TRACK_FACEBOOK_AUTH_COMPLETE",h()({},"number of Facebook pages",v)),this.setState({authComplete:!0}));var y=this.getSelectedPage();return l.a.createElement("div",{className:"album-list"},this.renderBreadcrumb(),r?this.renderThumbnailList():l.a.createElement(yp,{page:y,intl:d,config:i,onAlbumClick:this.onAlbumClick,onScrollEnd:f,thumbnailSize:o,inWebsiteContext:m}))}},{key:"render",value:function(){var e=this.props,t=e.socialMedia[Me],n=t.isLoading,r=t.auth,a=r.accessToken,o=r.authUrl,i=e.getSocialAccessToken,s=e.intl,c=e.trackEvent;return n?l.a.createElement(bl,{intl:s}):a?this.renderFBData():l.a.createElement(kp,{getSocialAccessToken:i,authUrl:o,trackEvent:c,intl:s})}}]),n}(c.Component);Pp.propTypes=Object.assign({insertImages:d.a.func.isRequired,getSocialAccessToken:d.a.func.isRequired,onFBAlbumClick:d.a.func.isRequired,onFBPageClick:d.a.func.isRequired,onProviderClick:d.a.func},Ke,We,qe);var jp=Pp,Mp=function(e){var t=e.rootDomain,n=e.accountId,r=e.trackEvent,a=function(e){var t=e.rootDomain,n=e.accountId,r=encodeURIComponent(window.location.href);return"https://dashboard.".concat(Zc(t),"/instagram/connect?accountId=").concat(n,"&redirect=").concat(r)}({rootDomain:t,accountId:n}),o=l.a.createElement("a",{className:"connect-ig-link",href:a,onClick:function(){return r("IM_TRACK_INSTAGRAM_DASHBOARD_LINK_CLICK")}},l.a.createElement(p.FormattedMessage,{id:"INSTAGRAM_CONNECT"}));return l.a.createElement("div",{className:"social-zero-state"},l.a.createElement("div",{className:"col-sx-12"},l.a.createElement("span",{className:"icon-website"},l.a.createElement(Ep.a,null)),l.a.createElement("h2",{className:"social-zero-state-heading"},l.a.createElement(p.FormattedMessage,{id:"INSTAGRAM_NOT_CONNECTED"})),l.a.createElement("p",{className:"social-zero-state-subtext gray-light"},l.a.createElement(p.FormattedMessage,{id:"INSTAGRAM_CONNECT_SUBTITLE",values:{link:o}}))))};Mp.propTypes={accountId:d.a.string.isRequired,rootDomain:d.a.string.isRequired,trackEvent:d.a.func.isRequired};var Lp=Mp;function Rp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Np=function(e){I()(n,e);var t=Rp(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"renderPosts",value:function(){var e=this.props,t=e.trackEvent,n=e.intl,r=e.minDimensions,a=e.preloadParams,o=e.insertImages,i=e.selectionLimit,s=e.insertLabel,c=e.socialMedia,u=c.pathToDataSource,d=c[Le],p=d.posts,f=d.name,m=e.collectionKey,g=e.renderMode,v=e.config,b=e.statusMessage,y=e.inWebsiteContext,O=e.onCoverImageUpdate;return 0===p.length?l.a.createElement(bu,{messageID:"INSTAGRAM_NO_IMAGES_LABEL"}):l.a.createElement("div",{className:"album-list"},l.a.createElement("div",{className:"asset-label gray image-selector-toolbar"},l.a.createElement("span",{className:"page-name"},f),l.a.createElement(Vc,{statusMessage:b,count:p.length,type:"found"})),l.a.createElement(lu,{collectionKey:m,selectionLimit:i,dataSource:p,pathToDataSource:u,mediaType:it,sourceType:Le,trackEvent:t,intl:n,renderMode:g,className:"social-images-list",minDimensions:r,preloadParams:a,onInsertButtonClick:function(e){o(e),t("IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK",h()({},"number of images",1))},config:v,inWebsiteContext:y,onCoverImageUpdate:O,insertLabel:s}))}},{key:"renderNotConnected",value:function(){var e=this.props,t=e.config,n=t.accountId,r=t.rootDomain,a=e.trackEvent;return l.a.createElement(Lp,{accountId:n,rootDomain:r,trackEvent:a})}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.socialMedia[Le],r=n.authorized,a=n.connected;return n.isLoading?l.a.createElement(bl,{intl:t}):l.a.createElement(l.a.Fragment,null,a&&r?this.renderPosts():this.renderNotConnected())}}]),n}(c.Component);Np.propTypes=Object.assign({onProviderClick:d.a.func},Ke,We,qe);var Up,Fp=Np,Vp=(Up={},h()(Up,Me,"https://img1.wsimg.com/ceph-p3-01/social-provider-assets-assets/static/d120e37/v1/abstract-logo-fb.svg"),h()(Up,Le,"https://img1.wsimg.com/rad/IG-Logo.svg"),Up);function Bp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Gp=function(e){I()(n,e);var t=Bp(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"renderListItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return l.a.createElement("li",o()({className:$o()({"asset-selected gray":e})},t),l.a.createElement("span",{className:"list-container"},t&&t.title||n),e&&l.a.createElement("span",{className:"icon icon-drop-right"},l.a.createElement(wo.a,{height:14,width:14})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.createProps,a=t.selectedId,o=t.shouldSelect,i=t.switchToFB;return l.a.createElement("ul",{className:"asset-sub-list"},n.length>0?n.map((function(t){var n=r(t,Me),i=!1;return t.id===a&&(i=o),e.renderListItem(i,n)})):this.renderListItem(o,{onClick:i},l.a.createElement(p.FormattedMessage,{id:"CREATE_PAGE"})))}}]),n}(c.Component);Gp.propTypes={list:d.a.array.isRequired,selectedId:d.a.string,shouldSelect:d.a.bool,createProps:d.a.func.isRequired,switchToFB:d.a.func},Gp.defaultProps={shouldSelect:!0};var zp=Gp;function Hp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Kp=function(e){I()(n,e);var t=Hp(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.pages,n=e.selectedId,r=e.selectedProvider,a=e.createProps,o=e.switchToFB;return l.a.createElement(l.a.Fragment,null,l.a.createElement(zp,{list:t,selectedId:n,createProps:a,shouldSelect:r===Me,switchToFB:o}))}}]),n}(c.Component);Kp.propTypes={pages:d.a.array.isRequired,selectedId:d.a.string,selectedProvider:d.a.string,createProps:d.a.func,switchToFB:d.a.func};var Wp=Kp;function qp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Yp=Ou.a.DropdownItem,Xp=function(e){I()(n,e);var t=qp(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.createProps;return l.a.createElement(Ou.a,{type:"select",name:"myDropdown",id:"im-asset-source-dropdown",className:"mobile-select",defaultSelected:0},t.map((function(e){var t=n(e);return l.a.createElement(Yp,t,t&&t.title)})))}}]),n}(c.Component);Xp.propTypes={list:d.a.array.isRequired,createProps:d.a.func.isRequired};var Qp=Xp;function $p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Zp=function(e){I()(n,e);var t=$p(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"renderBadgeTitle",value:function(e){var t=e.provider,n=e.titleMessageId,r=Vp[t];return l.a.createElement("span",{className:"text-muted"},l.a.createElement("img",{src:r,alt:""}),l.a.createElement("span",{className:"asset-source-name"},l.a.createElement(p.FormattedMessage,{id:n})))}},{key:"renderMobileControls",value:function(){var e=this.props,t=e.createProps,n=e.igPage,r=e.selectedProvider,a=e.fbPages,o=r===Le?[n]:a;return l.a.createElement(l.a.Fragment,null,r===Me&&l.a.createElement(Qp,{list:o,createProps:t}))}},{key:"renderFb",value:function(){var e=this.props,t=e.selectedProvider,n=e.selectedId,r=e.fbPages,a=e.createProps,o=e.onProviderClick;return l.a.createElement("li",{className:"asset-list-item","data-aid":"social_fb"},this.renderBadgeTitle({provider:Me,titleMessageId:"FACEBOOK"}),l.a.createElement(Wp,{selectedId:n,pages:r,selectedProvider:t,createProps:a,switchToFB:o.bind(this,Me)}))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.renderMobileControls(),l.a.createElement("ul",{className:"asset-list product-light-border"},this.renderFb()))}}]),n}(c.Component);Zp.propTypes={onProviderClick:d.a.func.isRequired,intl:d.a.object.isRequired,igPage:d.a.object,selectedProvider:d.a.string,selectedId:d.a.number,fbPages:d.a.object,createProps:d.a.func,trackEvent:d.a.func};var Jp=Zp;function ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var tf=function(e){I()(n,e);var t=ef(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"onPageClick",value:function(e){var t=e.pageId,n=e.after,r=this.props;(0,r.onFBPageClick)({accessToken:r.socialMedia[Me].auth.accessToken,pageId:t,after:n})}},{key:"createProps",value:function(e){return{key:e.id,title:e.name,onClick:this.onPageClick.bind(this,{pageId:e.id})}}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.trackEvent,r=e.onProviderClick,a=e.breadcrumb,i=e.renderMode,s=e.socialMedia,c=s.selectedProvider,u=s[Me],d=u.pages,p=u.selectedPageId,f=u.isLoading,m=u.auth.accessToken,h=s[Le],g=h.name,v=h.listingId,b=c===Le?Fp:jp,y={id:v,name:g};return f?l.a.createElement(bl,{intl:t}):c===Le?l.a.createElement(l.a.Fragment,null,a,l.a.createElement("div",{className:"social-media"},l.a.createElement(Fp,o()({},e,{onPageClick:this.onPageClick})))):l.a.createElement(l.a.Fragment,null,a,l.a.createElement("div",{className:$o()("social-media",{"no-background":i===Qi})},m&&l.a.createElement(Jp,{onProviderClick:r,createProps:this.createProps,selectedId:p,fbPages:Object(P.values)(d),igPage:y,selectedProvider:c,intl:t,trackEvent:n}),l.a.createElement(b,o()({},e,{onPageClick:this.onPageClick}))))}}]),n}(c.Component);tf.propTypes=Object.assign({socialMedia:d.a.object.isRequired,onFBPageClick:d.a.func.isRequired},Ke,We,qe);var nf=tf,rf=Object(f.connect)((function(e){return{config:js(e),socialMedia:nc(e),planFeatures:Ds(e)}}),(function(e){return{getSocialAccessToken:function(t){e(ha(t))},onFBAlbumClick:function(t){e(wa(t))},onFBPageClick:function(t){e(Sa(t))},onProviderClick:function(t){e(ba(t))}}}))(nf);function af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var of=Lu(lu),sf=function(e){I()(n,e);var t=af(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"componentDidMount",value:function(){var e=this.props.onTrackPerfLaunchEnd;this.hasNoImages()&&e&&e()}},{key:"hasNoImages",value:function(){var e=this.props.photoshoot;return!(e&&e.length>0)}},{key:"renderPhotoshootInfo",value:function(){return l.a.createElement("span",{className:"photoshoot-info"},Bi()?l.a.createElement(p.FormattedMessage,{id:"PHOTOSHOOT_INFO_SHORT"}):l.a.createElement(p.FormattedMessage,{id:"PHOTOSHOOT_INFO"})," ",l.a.createElement("a",{className:"primary",href:"https://media.mainstreethub.com/media/3c9588b7-f2a5-40b0-966f-f3864f15873a",target:"_blank",rel:"noreferrer"},l.a.createElement(p.FormattedMessage,{id:"HERES_HOW"})))}},{key:"renderImages",value:function(){var e=this.props,t=e.photoshoot,n=e.selectItem,r=e.insertItem,a=e.breadcrumb,i=Object(P.pick)(this.props,["collectionKey","trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","pathToDataSource","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","openOverCanvas","insertLabel"]),s=Bi();return l.a.createElement("div",null,a,l.a.createElement("div",{className:"image-selector-toolbar photoshoot-toolbar"},s&&this.renderPhotoshootInfo(),this.renderImageCount(t.length)),l.a.createElement(of,o()({dataSource:t,onThumbnailClick:n,mediaType:it,onInsertButtonClick:r,className:"uploaded-list"},i)))}},{key:"renderNoImages",value:function(){return l.a.createElement("div",{className:Lc("row no-images")},l.a.createElement("div",{className:"col-sx-12"},l.a.createElement("span",{className:"icon icon-img product"},l.a.createElement(Lo.a,null)),l.a.createElement("h2",{className:"no-images-heading"},l.a.createElement(p.FormattedMessage,{id:"COMING_SOON"})),l.a.createElement("p",{className:"no-image-subtext"},l.a.createElement(p.FormattedMessage,{id:"PHOTOSHOOT_NOT_READY"}))))}},{key:"renderImageCount",value:function(e){return e?l.a.createElement(Vc,{statusMessage:this.props.statusMessage,count:e,type:"found"}):null}},{key:"render",value:function(){var e=this.props,t=e.photoshoot,n=e.intl;return t?l.a.createElement("div",{className:"photoshoot"},this.hasNoImages()?this.renderNoImages():this.renderImages()):l.a.createElement(bl,{intl:n})}}]),n}(c.Component);sf.propTypes=Object.assign({photoshoot:d.a.array,insertItem:d.a.function},Ke,We,qe);var cf=sf,lf=Object(f.connect)((function(e){var t=rc(e),n=t.photoshoot;return{pathToDataSource:t.pathToDataSource,photoshoot:Object(P.get)(n,"images")}}))(cf);function uf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var df=function(e){I()(n,e);var t=uf(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"imagify",value:function(e){return e.map((function(e){return{imageUrl:e.image,mediaType:e.mediaType,id:e.id,name:e.name,price:e.price,salePrice:e.salePrice,url:e.url}}))}},{key:"renderProductCount",value:function(){var e=this.props.totalCount;return e?l.a.createElement("div",{className:"image-selector-toolbar product-count"},l.a.createElement(Vc,{count:e,type:"found_products"})):null}},{key:"handleOnScrollEnd",value:function(){var e=this.props,t=e.hasNext,n=e.onFetchMoreProducts;t&&n()}},{key:"trackSort",value:function(e){this.props.trackEvent("IM_TRACK_PRODUCTS_SORT",h()({},"sort order",e))}},{key:"render",value:function(){var e=this.props,t=e.totalCount,n=e.products,r=e.intl,a=e.onProductsSort,i=e.sortOrder,s=Object(P.pick)(this.props,["collectionKey","trackEvent","intl","config","pathToDataSource","selectionLimit","onTrackPerfLaunchEnd","insertLabel"]);return t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"product-toolbar"},this.renderProductCount(),l.a.createElement(Su,{intl:r,defaultSelected:0,onSort:a,sortOrder:i,trackEventCallback:this.trackSort})),l.a.createElement(lu,o()({dataSource:this.imagify(n),onScrollEnd:this.handleOnScrollEnd,mediaType:dt},s))):l.a.createElement(bu,{messageID:"NO_PRODUCTS_LABEL",isProduct:!0})}}]),n}(c.Component);df.propTypes=Object.assign({products:d.a.array,onFetchMoreProducts:d.a.func},Ke,We,qe);var pf=df,ff=Object(f.connect)((function(e){return Ns(e)}),(function(e){var t=qd(["PRODUCTS"],e);return{onFetchMoreProducts:function(){t.dispatchAction("NEXTPAGE")},onProductsSort:function(e){t.dispatchAction(td,{sortOrder:e})}}}))(pf),mf=n(85),hf=n.n(mf),gf=n(86),vf=n.n(gf);function bf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var yf=function(e){I()(n,e);var t=bf(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.search=l.a.createRef(),r}return y()(n,[{key:"canSearch",value:function(e){var t=this.props.mediaTypes;return(void 0===t?[]:t).includes(e)}},{key:"searchStockImages",value:function(e){if(this.canSearch(it)){var t=this.props,n=t.onStockImagesSearch,r=t.onStockImagesReset;e?n(e):r()}}},{key:"searchStockVideos",value:function(e){if(this.canSearch(st)){var t=this.props,n=t.onStockVideosSearch,r=t.onStockVideosReset;e?n(e):r()}}},{key:"searchUploadedAssets",value:function(e){(this.canSearch(it)||this.canSearch(ct))&&this.props.onSearchImages({searchText:e}),this.canSearch(st)&&this.props.enableVimeo&&this.props.onSearchUploadedVideos(e)}},{key:"searchProducts",value:function(e){this.canSearch(dt)&&this.props.onProductSearch(e)}},{key:"handleOnChangeSearchText",value:function(e){var t=this.props,n=t.renderMode,r=t.trackEvent,a=t.selectedCollection,o=t.clearAllSelection;r("IM_TRACK_SEARCH",h()({selectedCollection:a},"search query",e)),o(),this.searchUploadedAssets(e),this.searchProducts(e),n!==Qi&&(this.searchStockVideos(e),this.searchStockImages(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props.searchText;""!==e.searchText&&""===t&&this.search&&this.search.current&&this.search.current.clear()}},{key:"handleClear",value:function(){this.search&&this.search.current&&this.search.current.clear(),this.handleOnChangeSearchText("")}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.searchText,r=e.mediaTypes,a=e.searchDebounce,o=e.canSearch,i=e.back,s=r.includes(dt),c=t.formatMessage({id:s?"PRODUCT_SEARCH_PLACEHOLDER":"SEARCH_BUTTON_TEXT"}),u=l.a.createElement("a",{className:"underline",onClick:i},l.a.createElement(p.FormattedMessage,{id:"BACK_TO_ALL_MEDIA"})),d=l.a.createElement(p.FormattedMessage,{id:"NO_SEARCH_TOOLTIP",values:{goBackLink:u}}),f=l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"icon-search"},l.a.createElement(vf.a,{height:16,width:16})),l.a.createElement(hf.a,{value:n,debounce:a,onChange:this.handleOnChangeSearchText,size:"small",placeholder:c,clearable:this.handleClear,ref:this.search,id:"im-search-input"}));return l.a.createElement("div",{className:$o()("image-fulltext-search-bar",{disabled:!o})},o?f:l.a.createElement(Xo.a,{id:"hover-autohide-tooltip",message:d,openOnHover:!0,autoHideTimeout:3e3,text:f}))}}]),n}(c.Component);yf.propTypes=Object.assign({onSearchImages:d.a.func,onStockImagesSearch:d.a.func,onStockVideosSearch:d.a.func,onStockImagesReset:d.a.func,onStockVideosReset:d.a.func,onSearchUploadedVideos:d.a.func,onProductSearch:d.a.func,searchText:d.a.string,pendingSearchText:d.a.string,searchDebounce:d.a.number,canSearch:d.a.bool,enableVimeo:d.a.bool,back:d.a.func,clearAllSelection:d.a.func},We),yf.defaultProps={mediaTypes:[it],canSearch:!0};var Of=yf,Ef=Object(f.connect)((function(e){return{mediaTypes:js(e).mediaTypes}}),(function(e){return{onSearchImages:function(t){e(qa(t))},onStockImagesSearch:function(t){qd(["STOCKIMAGES"],e).dispatchAction(nd,t)},onStockImagesReset:function(){qd(["STOCKIMAGES"],e).dispatchAction(td)},onStockVideosSearch:function(t){e(Mr(t))},onStockVideosReset:function(){e(Lr())},clearAllSelection:function(){e(Aa())},onSearchUploadedVideos:function(t){e(zr({search:t}))},onProductSearch:function(t){qd(["PRODUCTS"],e).dispatchAction(nd,t)}}}))(Of),_f=n(87),If=n.n(_f);function Sf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var wf=function(e){I()(n,e);var t=Sf(n);function n(){return v()(this,n),t.apply(this,arguments)}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.toggle,r=e.intl,a=Bi(640)?"UPLOAD_TAKING_LONG_SUBTITLE_MOBILE":"UPLOAD_TAKING_LONG_SUBTITLE";return l.a.createElement("div",{className:$o()("notification-shelf-container",{"is-active":t})},l.a.createElement("div",{className:"notification-overlay"}),l.a.createElement("div",{className:"notification-shelf"},l.a.createElement("div",{className:"shelf-content product-background"},l.a.createElement("div",{className:"icon-container"},l.a.createElement("span",{className:"primary-background"},l.a.createElement(If.a,{fill:"#FFF",width:60,height:60}))),l.a.createElement("h4",null,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_TAKING_LONG_TITLE"})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:a}))),l.a.createElement("div",{className:"bottom-bar"},l.a.createElement(Ko.a,{design:"primary",className:"btn btn-primary",onClick:n,text:r.formatMessage({id:"GOT_IT"})}))))}}]),n}(l.a.PureComponent);wf.propTypes={active:d.a.bool};var Tf=wf,kf=n(88),Cf=n.n(kf);function xf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Af=function(e){I()(n,e);var t=xf(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.flyoutNode=l.a.createRef(),r}return y()(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClick)}},{key:"handleClick",value:function(e){var t=this.props.onClose,n=this.flyoutNode;(void 0===n?{}:n).current.contains(e.target)||t()}},{key:"render",value:function(){var e=this.props,t=e.shouldBeVisible,n=e.intl,r=e.onClose;return l.a.createElement("div",{ref:this.flyoutNode,className:$o()("flyout-container modal-flyout",{visible:t})},l.a.createElement("div",{className:"flyout-inner"},l.a.createElement("div",{className:"flyout-img product-background"},l.a.createElement("img",{src:Cf.a,alt:n.formatMessage({id:"STUDIO_BG_REMOVAL_TOOLTIP_TITLE"})})),l.a.createElement("div",{className:"flyout-content"},l.a.createElement("div",{className:"close-btn black",onClick:r},l.a.createElement(Ce.a,null)),l.a.createElement("span",{className:"new-badge"},l.a.createElement(p.FormattedMessage,{id:"NEW_BADGE"})),l.a.createElement("h4",null,l.a.createElement(p.FormattedMessage,{id:"STUDIO_BG_REMOVAL_TOOLTIP_TITLE"})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:"STUDIO_BG_REMOVAL_TOOLTIP_SUBTITLE"})))))}}]),n}(c.Component);Af.propTypes={shouldBeVisible:d.a.bool,intl:d.a.object,onClose:d.a.func};var Df=Af;function Pf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var jf=function(e){I()(n,e);var t=Pf(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.onboardingFlyoutNode=l.a.createRef(),r}return y()(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.handleClick)}},{key:"handleClick",value:function(e){var t=this.props.onClose,n=this.onboardingFlyoutNode;(void 0===n?{}:n).current.contains(e.target)||t()}},{key:"render",value:function(){var e=this.props,t=e.tooltipShouldBeVisible,n=e.onClose,r=e.renderUploader;return l.a.createElement("div",{className:"floating-upload",ref:this.onboardingFlyoutNode},t&&l.a.createElement("div",{className:"upload-onboarding"},l.a.createElement("div",{className:"floating-pulses"},l.a.createElement("div",{className:"base"}),l.a.createElement("div",{className:"bottom"}),l.a.createElement("div",{className:"middle"}),l.a.createElement("div",{className:"top"})),l.a.createElement("div",{className:"onboarding-tooltip"},l.a.createElement("div",{className:"close-btn",onClick:n},l.a.createElement(Ce.a,{height:16,width:16,fill:"#111"})),l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_TOOLTIP_TITLE"})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_TOOLTIP_SUBTITLE"})))),l.a.createElement(Ko.a,{text:l.a.createElement(l.a.Fragment,null,l.a.createElement(p.FormattedMessage,{id:"UPLOAD"}),r()),icon:l.a.createElement(xo.a,{fill:"#FFFFFF",height:26,width:26}),design:"primary","data-click-eid":"upload_withimages_button_click",onClick:n}))}}]),n}(c.Component);jf.propTypes={tooltipShouldBeVisible:d.a.bool,onClose:d.a.func};var Mf=jf;function Lf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Rf=Object.keys(uc).reduce((function(e,t){return e[t]=uc[t].toLowerCase(),e}),{}),Nf=Rf.VIMEO_CONVERT,Uf=Rf.VIMEO_UPGRADE,Ff=Rf.VIMEO_EDIT,Vf=Rf.VIMEO_CREATE,Bf=Rf.VIMEO_CONVERT_CREATE,Gf=function(e){I()(n,e);var t=Lf(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"receiveMessage",value:function(e){var t=this.props,n=t.trackEvent,r=t.config,a=(void 0===r?{}:r).socialMediaAuthCallbackUrl,o=new URL(a).origin,i=e.data;if(e.origin===o&&[Nf,Uf,Vf,Bf,Ff].includes(i)){(0,this.props.getUser)();var s=[Nf,Uf,Vf,Bf].includes(i),c=i===Ff;if(n("IM_TRACK_VIMEO_OFF_SITE_REDIRECT_COMPLETE",{eventType:i}),s)(0,this.props.loadVideos)();if(c){var l=this.props;(0,l.refreshEditedVideo)(l.vimeoUser.editVideoId)}}}},{key:"componentDidMount",value:function(){window.addEventListener("message",this.receiveMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.receiveMessage)}},{key:"render",value:function(){return null}}]),n}(c.Component);Gf.propTypes={getUser:d.a.func,loadVideos:d.a.func,vimeoUser:d.a.object,trackEvent:d.a.func};var zf,Hf=Gf,Kf=Object(f.connect)((function(e){return{config:js(e),vimeoUser:qs(e)}}),(function(e){return{getUser:function(){e(Yr())},refreshEditedVideo:function(t){t&&e(Wr(t))},loadVideos:function(){e(Gr())},trackEvent:function(t,n){e(ma({eventName:t,data:n}))}}}))(Hf),Wf=n(31),qf=n.n(Wf),Yf=(zf={},h()(zf,"connect","VIMEO_CONNECT"),h()(zf,"connect and create","VIMEO_CONNECT"),h()(zf,"connect and upgrade","VIMEO_CONNECT_UPGRADE"),h()(zf,"upgrade","VIMEO_UPGRADE"),zf),Xf=function(e){return gs()(Array(4)).map((function(t,n){return"".concat(e,"_FEATURES_").concat(n+1)}))},Qf=function(e){var t=Yf[e];return{header:"".concat(t,"_TITLE"),subtitle:"".concat(t,"_SUBHEADER"),cta:"".concat(t,"_CTA"),benefits:Xf(t),eid:"IM_TRACK_".concat(t,"_CTA_CLICK"),aid:"".concat(t,"_BTN")}},$f=n(89),Zf=n.n($f),Jf=n(90),em=n.n(Jf),tm=n(91),nm=n.n(tm);function rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var am=function(e){I()(n,e);var t=rm(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).state={modalImpressionFired:!1},R()(E()(r)),r}return y()(n,[{key:"handleCtaButtonClick",value:function(e){var t=this.props,n=t.trackEvent,r=t.redirectToVimeoUpgrade,a=t.redirectToVimeoConnectCreate,o=t.redirectToVimeoConnect,i=t.videoId,s=t.onClose;n(Qf(e).eid),"connect"===e?o(i,e):"connect and create"===e?a():r(),s()}},{key:"handleLearnMoreButtonClick",value:function(){var e=this.props.vimeoHelpLink;e&&window.open(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.trackEvent,a=t.videoId,o=t.modalType,i=t.intl,s=this.state.modalImpressionFired;if(o===vc)return this.setState({modalImpressionFired:!1}),null;s||(r("IM_TRACK_VIMEO_UPLOAD_LIMIT_MODAL_IMPRESSION",a?{modalType:"connect and edit"}:{modalType:o}),this.setState({modalImpressionFired:!0}));var c="upgrade"===o,u=c?"primary-pastel-background":"primary-dark-background",d=Qf(o),f=l.a.createElement(qo.a,null,l.a.createElement(Ko.a,{"data-aid":d.aid,onClick:function(){return e.handleCtaButtonClick(o)},design:"primary",text:i.formatMessage({id:d.cta}),as:"external"}),l.a.createElement(Ko.a,{design:"link","data-aid":Ri,onClick:function(){return e.handleLearnMoreButtonClick()},text:i.formatMessage({id:"LEARN_MORE"})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vimeo-overlay"}),l.a.createElement(qf.a,{className:$o()("vimeo-connect-modal",{dark:!c}),closeButton:!0,disableAutoClose:!0,onClose:n,footer:f,open:!0,"data-aid":ji,id:"im-vimeo-connect-modal"},("connect"===o||"connect and create"===o)&&l.a.createElement("div",{className:"free-banner"},l.a.createElement(p.FormattedMessage,{id:"FREE"})),l.a.createElement("div",{className:$o()("vimeo-header",u)},l.a.createElement("div",{className:"header-content"},l.a.createElement("img",{className:"logo-lockup",src:nm.a,height:30,alt:"Vimeo + GoDaddy"}),l.a.createElement("h1",null,l.a.createElement(p.FormattedMessage,{id:d.header})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:d.subtitle}))),l.a.createElement("div",{className:"vimeo-hero"},l.a.createElement("img",{src:c?em.a:Zf.a,alt:"Vimeo features"}))),l.a.createElement("div",{className:"vimeo-benefits"},d.benefits.map((function(e,t){return l.a.createElement("p",{key:t,className:"gray"},l.a.createElement(li.a,{height:16,width:16})," ",l.a.createElement(p.FormattedMessage,{id:e}))})))))}}]),n}(c.PureComponent);am.propTypes={modalType:d.a.oneOf(["connect","connect and create","connect and upgrade","upgrade",vc]),onClose:d.a.func,redirectToVimeoConnect:d.a.func,redirectToVimeoConnectCreate:d.a.func,redirectToVimeoUpgrade:d.a.func,vimeoHelpLink:d.a.string};var om=am,im=Object(f.connect)((function(e){return{modalType:Rs(e).vimeoModalType,videoId:Rs(e).editVideoId,vimeoHelpLink:js(e).vimeoHelpLink}}),(function(e,t){var n=gc(e,t);return{onClose:function(){e($r())},redirectToVimeoConnect:function(e){n.openConvertLink(e)},redirectToVimeoConnectCreate:function(){n.openConvertCreateLink()},redirectToVimeoUpgrade:function(){n.openUpgradeLink()}}}))(om),sm=n(92),cm=n.n(sm);function lm(e){var t=e.intl,n=e.handleOnReconnect,r=Object(c.useState)(!1),a=s()(r,2),o=a[0],i=a[1],u=Bi(),d=l.a.createElement("p",{className:"gray",style:{margin:0,fontSize:"0.95rem"}},t.formatMessage({id:"VIMEO_RECONNECT_SUBTITLE"})),p=Object(c.useCallback)((function(){i(!0),n()}),[n]);return l.a.createElement("div",{className:"no-results-v2 vimeo-reconnect bg-white"},l.a.createElement("div",{className:"content-area item-content"},l.a.createElement("div",{className:"cta-icon"},l.a.createElement(cm.a,null)),l.a.createElement("div",{className:"item-content"},l.a.createElement("div",{className:"inner-text"},l.a.createElement("h6",{className:"content-header"}," ",t.formatMessage({id:"VIMEO_RECONNECT_TITLE"})," "),!u&&d))),l.a.createElement("div",{className:"no-results-cta item-content"},l.a.createElement(Ko.a,{className:"btn-img-action",design:"primary",size:"small",text:t.formatMessage({id:"RECONNECT"}),as:"external",onClick:p,disabled:o})))}lm.propTypes={handleOnReconnect:d.a.func},lm.defaultProps={renderUploader:function(){},getUploadCopy:function(){},onAddDescription:function(){}};var um=lm,dm=n(93),pm=n.n(dm);var fm=function(e){var t=e.sourceType,n=e.openVimeoCreateLink,r=e.isVimeoLoading,a=e.isLinkWrapper,o=e.intl,i=e.venture,s="im-vimeo-create-button",c=i&&i.ventureId&&i.businessName,u=n;if(a)return l.a.createElement("div",{id:s+"-mobile",className:"create-link",onClick:function(){return u()}});var d=t===Re&&r||t===Pe&&!c;return l.a.createElement(Ko.a,{id:s,className:"btn",design:"primary",size:"small",disabled:d,text:o.formatMessage({id:"CREATE"}),as:"external",onClick:function(){u()}})},mm=Object(f.connect)((function(e){return{venture:lc(e)}}),(function(e,t){return{openVimeoCreateLink:function(){gc(e,t).openCreateLink()}}}))(fm),hm=n(42),gm=n.n(hm),vm=n(56),bm=n.n(vm),ym=n(94),Om=n.n(ym),Em=n(95),_m=n.n(Em),Im=function(e){var t,n=e.sourceType,r=e.renderUploadButton,a=e.isVimeoLoading,o=e.expandCtaArea,i=e.intl,s=e.openOverCanvas,c=e.trackEvent,u=e.enableImageCreate,d=e.enableStudioLogoCreate,f=e.enableLogoCreate,m=e.enableMobileLogoCreateCta,g=e.canCreateLogo,v=Bi(768),b=(n===Re&&!v||n===Pe&&!v&&f||n===Pe&&v&&f&&m||n===Ue)&&g,y=o&&!v,O=(t={},h()(t,Re,{createTitle:"CREATE_ON_VIMEO",createSubtitle:"CREATE_SUBTITLE",uploadTitle:"UPLOAD_VIDEO_TITLE",uploadSubtitle:"UPLOAD_VIDEO_SUBTITLE",createImg:gm.a,uploadImg:bm.a}),h()(t,Pe,{createTitle:m?"CREATE_A_LOGO":"CREATE_LOGO",createSubtitle:m?"DOWNLOAD_STUDIO":"CREATE_LOGO_SUBTITLE",uploadTitle:"UPLOAD_LOGO_TITLE",uploadSubtitle:m?"BROWSE_DEVICE":"UPLOAD_LOGO_SUBTITLE",createImg:Om.a,uploadImg:_m.a}),h()(t,Ue,{createTitle:"CREATE_IMAGE",createSubtitle:"CREATE_IMAGE_SUBTITLE",uploadTitle:"UPLOAD_IMAGE_TITLE",uploadSubtitle:"UPLOAD_IMAGE_SUBTITLE",createImg:null,uploadImg:null}),t);return l.a.createElement("div",{className:$o()("add-to-library-section",{"is-small":v,"is-empty-collection":y,"is-mobile-create":m})},b&&l.a.createElement("div",{className:"modal-create"},v&&l.a.createElement("div",{className:"window-icon"},l.a.createElement(us.a,null)),l.a.createElement("div",{className:"inner-content"},!y&&l.a.createElement("div",{className:"cta-icon"},l.a.createElement(pm.a,null)),l.a.createElement("div",{className:"inner-text"},l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:O[n].createTitle})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:O[n].createSubtitle})))),[Ue,Pe].includes(n)&&(d||u)?function(){var e=function(){!m&&s({},n),c(n===Pe?"IM_TRACK_LOGO_CREATE_CLICK":"IM_TRACK_STUDIO_CREATE_CTA_CLICK")};if(v){return l.a.createElement("div",{className:"create-link",onClick:function(){e(),window.location.href="https://studio.click.godaddy.com/FVXM/1yuro348"}})}return l.a.createElement(Ko.a,{className:"btn",design:"primary",text:i.formatMessage({id:"CREATE"}),onClick:e})}():l.a.createElement(mm,{sourceType:n,isVimeoLoading:a,isLinkWrapper:v,intl:i}),y&&l.a.createElement("img",{src:O[n].createImg,alt:i.formatMessage({id:O[n].createTitle})})),l.a.createElement("div",{className:"upload-area"},l.a.createElement("div",{className:"inner-content"},!y&&l.a.createElement("div",{className:"cta-icon"},l.a.createElement(xo.a,null)),l.a.createElement("div",{className:"inner-text"},l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:O[n].uploadTitle})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:O[n].uploadSubtitle})))),v&&!b&&l.a.createElement(Jo.a,null),r(v,"UPLOAD"),y&&l.a.createElement("img",{src:O[n].uploadImg,alt:i.formatMessage({id:O[n].uploadTitle})})))},Sm=n(96),wm=n.n(Sm),Tm=n(97),km=n.n(Tm);var Cm=function(e){var t,n,r,a,o=e.activeSelection,i=e.uploadProgress,u=e.isMobile,d=e.stagingCount,f=e.filename,m=e.imageUploadSuccess,h=e.videoUploadSuccess,g=e.recentlyStagedImagesCount,v=e.recentlyStagedVideosCount,b=e.mediaTypes,y=e.trackEvent,O=e.withFloatingUpload,E=e.placement,_=e.selectedCollection,I=Object(c.useState)(!1),S=s()(I,2),w=S[0],T=S[1],k=Object(c.useState)(!1),C=s()(k,2),x=C[0],A=C[1],D=d>0,P=v>0&&g>0,j=0===v&&g>0,M=v>0&&0===g,L=b&&(b.includes(ct)||b.includes(lt)||b.includes(ut));j?(t=L?"uploading_files":"uploading_images",n=L?"file":it,r=g,a=m):M?(t="uploading_videos",n=st,r=v,a=h):(t="uploading_files",n="file",r=g+v,a=P?h&&m:j?m:M&&h);var R=D&&i>=0||w&&!x,N=l.a.createElement("div",{className:"upload-progress-bar"},l.a.createElement(wm.a,{size:"xsmall",value:i}));Object(c.useEffect)((function(){var e;return a||(T(!1),A(!1)),w||!a||x||(T(!0),y("LOGO"===E||_===tt?"IM_TRACK_LOGO_UPLOAD_COMPLETE":"IM_UPLOAD_COMPLETE",{"total files uploaded":r}),e=setTimeout((function(){A(!0)}),5e3)),function(){x&&clearTimeout(e)}}));var U=l.a.createElement(l.a.Fragment,null,D&&l.a.createElement("div",{className:"progress-content"},l.a.createElement("p",{className:"progress-subtitle"},l.a.createElement(Vc,{count:d,type:t,excludeClasses:!0})),l.a.createElement("div",{className:"filename-container"},l.a.createElement("h5",{className:"progress-filename"},f),d>1&&l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"UPLOADING_MORE",values:{count:d-1}})))),N),F=l.a.createElement("div",{className:"success-confirmation"},l.a.createElement("div",{className:"close-btn",onClick:function(){return A(!0)}},l.a.createElement(Ce.a,{fill:"#fff"})),l.a.createElement("div",{className:"ok-container"},l.a.createElement(km.a,null)),l.a.createElement("h5",null,l.a.createElement(Vc,{count:r,type:"uploaded_"+n,excludeClasses:!0})));return u?l.a.createElement("div",{className:$o()("mobile-progress-popup",{"is-uploading":R,"is-active":o,"with-floating-upload":O})},l.a.createElement("div",{className:"progress-container"},w?F:U)):l.a.createElement("div",{className:$o()("progress-popup",{"is-uploading":R,"is-active":o})},w?F:U)};function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Am=Object(f.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},oc(e))}))(Cm);function Dm(e,t){var n,r;return It(t)?(n="DELETE_VIDEO_CONFIRMATION_HARD",r="DELETE_VIDEO_MANY_CONFIRMATION_HARD"):!function(e){if(!Array.isArray(e))return!1;var t=e.reduce((function(e,t){return e.add(t.mediaType),e}),new Set);return t.size>1&&t.has(st)}(t)?(n="".concat(e,"_CONFIRMATION_SOFT"),r="".concat(e,"_MANY_CONFIRMATION_SOFT")):r="DELETE_ANY_CONFIRMATION_HARD",[n,r]}var Pm,jm=function(e){var t=e.config,n=void 0===t?{}:t,r=e.onClose,a=e.onDelete,o=e.itemsToDelete,i=e.intl,c="DELETE_FILE",u=n.isWebsitelessContainer,d=o.length,p=i.formatPlural(d);It(o)?c="DELETE_VIDEO":_t(o)&&(c="DELETE");var f=["".concat(c,"_WEBSITELESS_CONFIRMATION_SOFT"),"".concat(c,"_MANY_WEBSITELESS_CONFIRMATION_SOFT")],m=u?f:Dm(c,o),h=s()(m,2),g=h[0],v=h[1],b=i.formatMessage({id:"".concat(c,"_").concat(p.toUpperCase())},{count:d}),y=l.a.createElement(qo.a,null,l.a.createElement(Ko.a,{design:"critical",onClick:function(){a(),r()},"data-aid":"delete_confirmation_button",text:i.formatMessage({id:"DELETE"})}),l.a.createElement(Ko.a,{design:"secondary",onClick:r,text:i.formatMessage({id:"CANCEL"})})),O=i.formatMessage({id:d>1?v:g},{newline:"\n"});return l.a.createElement(qf.a,{className:"image-delete-confirmation-modal",title:b,closeButton:!1,disableAutoClose:!0,onClose:r,footer:y,"data-aid":"image-delete-confirmation-modal",id:"im-delete-confirmation-modal"},l.a.createElement("p",{className:"text-default",dangerouslySetInnerHTML:{__html:O}}))},Mm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.currentCreateCount,r=void 0===n?0:n;return e-r};function Lm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.files,n=void 0===t?[]:t,r=e.vimeoUser,a=void 0===r?{}:r,o=e.totalVideosInAccount,i=a.convertedOn,s=a.periodicFree,c=a.lifetimeFree,l=n.reduce((function(e,t){return e+t.size}),0),u=!!s&&s-l<=0,d=!!c&&c-l<=0,p=u||d,f=Mm(o,a);if(!i){if(p)return"connect and upgrade";if(f>=3||f+n.length>3)return"connect"}return i&&p?"upgrade":vc}var Rm=(Pm={},h()(Pm,"vimeo","ImageManager_sawVideoFlyout"),h()(Pm,"over","ImageManager_sawOverFlyout"),h()(Pm,"vimeo_create","ImageManager_sawVimeoCreateFlyout"),h()(Pm,"studio_bg_removal","ImageManager_sawStudioBgRemovalFlyout"),h()(Pm,"floating_upload","ImageManager_sawFloatingUploadFlyout"),Pm);function Nm(e){try{return localStorage.getItem(Rm[e])||!1}catch(e){return!0}}function Um(e){try{localStorage.setItem(Rm[e],!0)}catch(e){}}function Fm(e){var t=e.embedded,n=e.hasUploaded,r=e.mediaTypes,a=e.renderUploader,o=e.getUploadCopy,i=e.onAddDescription,s=Bi(),c=function(e){var t=1===r.length?r[0].toUpperCase():"FILE",n=e.replace("{mediaType}",t).replace("{deviceType}",s?"_MOBILE":"");return l.a.createElement(p.FormattedMessage,{id:n})},u=n&&r.includes(it)&&s,d=[l.a.createElement("h6",{className:"content-header"}," ",c("EMPTY_SEARCH_NO_UPLOADED_{mediaType}_FOUND")),l.a.createElement("p",{className:"gray",style:{margin:0,fontSize:"0.95rem"}},c(u?"EMPTY_SEARCH_UPDATE_UPLOADS_INFO":"EMPTY_SEARCH_NO_{mediaType}_UPLOADS{deviceType}"))],f=u?function(){return l.a.createElement("div",{className:"no-results-cta add-description"},l.a.createElement("label",{"data-aid":Ni,className:"btn btn-round bd-primary text-primary-o",onClick:i},l.a.createElement(p.FormattedMessage,{id:"ADD_DESCRIPTION"})))}:function(){return s?null:l.a.createElement("div",{className:"no-results-cta"},l.a.createElement("label",{className:"btn btn-img-action btn-sm btn-primary btn-primary-dark"},l.a.createElement("span",null,a()),l.a.createElement(xo.a,{"data-click-eid":"upload_withimages_button_click",height:18,width:18}),l.a.createElement(p.FormattedMessage,{id:o()})))};return l.a.createElement("div",{className:$o()("no-results-v2 bg-white",{"product-background":t})},l.a.createElement("div",{className:"no-results-content"},d),f())}Fm.propTypes={hasUploaded:d.a.bool,mediaTypes:d.a.arrayOf(d.a.oneOf(pt)),renderUploader:d.a.func,getUploadCopy:d.a.func,onAddDescription:d.a.func,embedded:d.a.bool},Fm.defaultProps={renderUploader:function(){},getUploadCopy:function(){},onAddDescription:function(){}};var Vm=Fm;function Bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Gm=function(e){I()(n,e);var t=Bm(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r.ref=l.a.createRef(),r}return y()(n,[{key:"getContainerDom",value:function(){return this.ref.current}},{key:"attachObserver",value:function(){var e=this.props,t=e.scrollObserver,n=e.observeTargetData,r=e.onObserved;if(t){r&&(this.onObservedHandler=n?r.bind(null,n):r);var a=this.getContainerDom();a&&this.onObservedHandler&&(a.addEventListener("observe",this.onObservedHandler),t.observe(a))}}},{key:"componentDidMount",value:function(){this.attachObserver()}},{key:"componentDidUpdate",value:function(e){e.scrollObserver!==this.props.scrollObserver&&this.attachObserver()}},{key:"componentWillUnmount",value:function(){var e=this.getContainerDom();this.onObservedHandler&&e.removeEventListener("observe",this.onObservedHandler)}},{key:"render",value:function(){var e=this.props.children;return l.a.createElement("div",{ref:this.ref},e?l.a.Children.toArray(e):null)}}]),n}(c.Component);Gm.propTypes={scrollObserver:d.a.object,observeTargetData:d.a.any,onObserved:d.a.func};var zm=Gm;function Hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Km(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Wm=Lu(lu),qm=["VIDEO_UPLOADS",Qe,"STOCK_MEDIA","PRODUCTS"],Ym=function(e){I()(r,e);var t=Km(r);function r(e){var n;return v()(this,r),(n=t.call(this,e)).state={initialImagesLoaded:!1,blurOpacity:1,itemsToDelete:null,editTooltipDismissed:!1,uploadOnboardingDismissed:!1},R()(E()(n)),n.othersitesCollectionsContainerRef=l.a.createRef(),n.observer=null,n.socialObserver=null,n}return y()(r,[{key:"setupObserver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={root:e,rootMargin:"0px",threshold:.1};return new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.target.dispatchEvent(new Event("observe"))}))}),t)}},{key:"setupOthersitesObserver",value:function(){var e=this.othersitesCollectionsContainerRef.current;this.observer=this.setupObserver(e)}},{key:"setupSocialObserver",value:function(){this.socialObserver=this.setupObserver()}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setupSocialObserver(),e.setupOthersitesObserver()}),0)}},{key:"downloadImage",value:function(e){var t=this.props,n=t.onDownloadImage,r=t.selectedItems,a=e||r,o=Array.isArray(a)?a:[a];if(Bi()){var i=o[0].url;window.open(i,"_blank")}else n(o);this.trackEvent("IM_TRACK_DOWNLOAD_BUTTON_CLICK",h()({},"number of downloaded images",o.length))}},{key:"atMaxSelected",value:function(){var e=this.props,t=e.selectionLimit,n=e.selectedItems;return t>1&&n.length>=t}},{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.trackEvent,a=n.selectedCollection;t.selectedCollection=a,r(e,t)}},{key:"selectCollection",value:function(e){var t=this.props,n=t.switchSocialCollection,r=t.onClearSelection,a=t.setCurrentView,o=document.querySelector("div.image-modal div.modal.fade.show");this.trackEvent("IM_TRACK_".concat(e.toUpperCase(),"_COLLECTION_CLICK")),e===Me||e===Le?(n(e),a("SOCIAL_MEDIA")):a(e),o&&(o.scrollTop=0),r()}},{key:"selectMySites",value:function(e){e.type!==Je?(this.props.loadSite({containerId:e.id,type:e.type}),this.selectCollection(et)):this.selectCollection(Je)}},{key:"enableProgressPopup",value:function(){return Object(P.get)(this.props,"config.featureFlags.enableNewProgressPopup",!1)}},{key:"shouldRenderVideoCollection",value:function(){return this.props.mediaTypes.includes(st)}},{key:"enableVimeoDelete",value:function(){return Object(P.get)(this.props,"config.featureFlags.enableVimeoDelete",!1)}},{key:"renderBreadcrumb",value:function(){if(1===this.getActiveCollections().length)return null;var e=this.props,t=e.searchText,n=e.selectedCollection,r=n===et||"SOCIAL_MEDIA"===n;return l.a.createElement(ap,{searchText:t,back:this.selectCollection.bind(this,Qe),hasMargin:r})}},{key:"renderUploadedImagesContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=this.props,n=t.enableDelete,r=t.autoSelectAfterUpload,a=t.selectionLimit,i=t.uploadedOrder,s=t.onFivToggle,c=t.onMetadataUpdate,u=t.insertFullViewItem,d=t.selectItem,p=t.mediaTypes,f=t.renderMode,m=t.rejectFiles,h=t.selectedCollection,g=t.shouldShowUploadedMetadata,v=t.appName,b=t.enableInlineUpload,y=[$e,"IMAGE_UPLOADS",rt,"VIDEO_UPLOADS"],O=f===$i&&y.includes(h)&&!Bi(768);return l.a.createElement($u,o()({insertItem:u,selectItem:d,deleteItem:this.deleteItem,enableDelete:n,autoSelectAfterUpload:r,selectionLimit:a,uploadedOrder:i,onDownloadButtonClick:this.downloadImage,renderDownloadButton:this.renderDownloadButton,onFivToggle:s,back:this.selectCollection.bind(this,Qe),sourceType:e,title:h,isVentureHomeLogo:v===Ve&&h===tt,breadcrumb:this.renderBreadcrumb(),onMetadataUpdate:c,renderGalleryZeroState:this.renderGalleryZeroState,renderCtaArea:this.renderCtaArea,supportsDropZone:O,thumbnailSettings:p.includes(st)&&Ru(this.props),enableProgressPopup:this.enableProgressPopup(),rejectFiles:m,renderUploader:this.renderUploader,uploadCtaId:this.getUploadCopy(),renderNoResults:this.renderNoResults,shouldShowMetadata:g,enableInlineUpload:b&&f===$i,enableFloatingUpload:this.shouldRenderFloatingUpload()},this.collectionPassThruProps()))}},{key:"renderSocialMediaContent",value:function(){return l.a.createElement(rf,o()({insertImages:this.props.insertImagesFromOtherSource,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderOtherSitesContent",value:function(){return l.a.createElement(pp,o()({insertImages:this.props.insertImagesFromOtherSource,renderDownloadButton:this.renderDownloadButton,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderPhotoshootContent",value:function(){var e=this.props,t=e.config,n=e.insertFullViewItem;return l.a.createElement(lf,o()({config:t,insertItem:n,renderDownloadButton:this.renderDownloadButton,onDownloadButtonClick:this.downloadImage,breadcrumb:this.renderBreadcrumb()},this.collectionPassThruProps()))}},{key:"renderProductsContent",value:function(){var e=this.props.config;return l.a.createElement(ff,o()({config:e},this.collectionPassThruProps()))}},{key:"renderStockMediaContent",value:function(){var e=this.props,t=e.businessCategoryDisplayName,n=e.config,r=n.mediaTypes,a=n.showStockVideos,i=e.stockTotalCount,s=e.insertFullViewItem;return l.a.createElement(tp,o()({showStockVideos:a,insertItem:s,defaultSearchKeyword:t,mediaTypes:r,breadcrumb:this.renderBreadcrumb(),stockTotalCount:i},this.collectionPassThruProps()))}},{key:"postLog",value:function(e){var t=e.level,n=e.message,r=e.meta,a=e.error;Vu({level:t,message:n,meta:r,error:a,props:this.props})}},{key:"collectionPassThruProps",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({collectionKey:this.props.selectedCollection,trackEvent:this.trackEvent,postLog:this.postLog},Object(P.pick)(this.props,["thumbnailSize","intl","minDimensions","preloadParams","selectionLimit","onCoverImageUpdate","onTrackPerfLaunchEnd","renderMode","inWebsiteContext","config","searchText","mediaTypes","selectedMediaType","openOverCanvas","insertLabel","traceAuditEventStart","traceAuditEventEnd"]))}},{key:"renderDownloadButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=this.props,r=n.config.download,a=(r=void 0===r?{}:r).limit,o=void 0===a?10:a,i=n.selectedItems,s=n.intl,c=0===i.length||i.length>o||Bi()&&i.length>1;return"icon"===t?l.a.createElement("div",{className:$o()("download-btn primary-pastel",{disabled:c}),onClick:function(){0!==i.length&&e.downloadImage(i)},"data-click-eid":"download_images_mobile_button_click","data-aid":"download_images_mobile_button"},l.a.createElement(Do.a,{height:26,width:26})):l.a.createElement(Ko.a,{design:t,disabled:c,className:"primary-pastel",onClick:function(){0!==i.length&&e.downloadImage(i)},"data-click-eid":"download_images_button_click","data-aid":"download_images_button",icon:l.a.createElement(Do.a,{height:16,width:16}),text:s.formatMessage({id:"DOWNLOAD"})})}},{key:"handleScroll",value:function(e){var t=e.target.scrollWidth-e.target.scrollLeft===e.target.clientWidth?0:1;this.setState({blurOpacity:t})}},{key:"renderCollectionSubtitle",value:function(e,t,n,r){var a=t===Me?"found_pages":"found",o=l.a.createElement(Vc,{count:e,type:a});return n||(o=l.a.createElement("span",{className:"primary",onClick:this.selectCollection.bind(this,t)},"+ ",l.a.createElement(p.FormattedMessage,{id:"CONNECT_FB"}))),l.a.createElement("p",{className:$o()("collection-subtitle loading-subtitle",{"animated-subtitle":!1===r})},!r&&o)}},{key:"renderOtherSitesCollections",value:function(){var e=this,t=this.props,n=t.otherSites,r=n.viewableWebsites,a=n.websitesLoaded,o=n.currentMaxWebsiteViewableIndex,i=t.intl,s=t.loadSite,c=t.loadViewableSitesNextPage,u=t.onLoadVentureImages,d=t.renderMode,f=!1,m=a?l.a.createElement("div",{ref:this.othersitesCollectionsContainerRef,className:"collection-list thumbnail-list scrollable","data-aid":Di},r.map((function(t,n){return t.imagesLoaded&&Object(P.isEmpty)(t.images)||(f=!0),t.imagesLoaded&&Object(P.isEmpty)(t.images)?null:l.a.createElement("span",{key:n,className:"image-collection"},l.a.createElement(zm,{scrollObserver:e.observer,observeTargetData:{containerId:t.id,type:t.type,index:n},onObserved:function(e){var t=e.containerId,n=e.type,r=e.index;s({containerId:t,type:n}),r===o&&c()}},l.a.createElement(gp,{postLog:e.postLog,gallery:t.images,isLoading:!t.imagesLoaded,onImagesLoaded:"venture"===t.type?u:void 0,onCollectionClick:e.selectMySites.bind(e,t),canGenerateThumbnails:!0,renderMode:d})),l.a.createElement("p",{className:"collection-title black"},t.domainName||t.name||i.formatMessage({id:"MY_BUSINESS"})),l.a.createElement("p",{className:"collection-subtitle loading-subtitle animated-subtitle"},t.imagesLoaded?l.a.createElement(Vc,{typeSuffix:_t(t.images)?"":Uc,count:t.images&&t.images.length,type:"found"}):l.a.createElement(p.FormattedMessage,{id:"LOADING"})))}))):l.a.createElement(bl,{intl:i});return!f&&a&&u(),!f&&a?null:l.a.createElement("div",{className:"collection-container"},l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"MEDIA_FROM_OTHER_SITES"})),m)}},{key:"galleryOverlay",value:function(e,t,n,r){var a=this.props.searchText,o=t?t.length:0,i=r&&!a?l.a.createElement(p.FormattedMessage,{id:"VIEW_MORE"}):l.a.createElement("span",null,l.a.createElement(Vc,{count:r||n||o,type:"view",bright:!0,excludeClasses:!0,typeSuffix:_t(t)?"":Uc}));return l.a.createElement("div",{className:"view-all-overlay",onClick:e},l.a.createElement("p",null,Bi(640)?l.a.createElement(p.FormattedMessage,{id:"VIEW_ALL"}):i,l.a.createElement(wo.a,{height:22,width:22})))}},{key:"renderPSBadge",value:function(){var e=this.props.photoshoot;return 0===e.length?l.a.createElement("span",{className:"new-badge"},l.a.createElement(p.FormattedMessage,{id:"NEW"})):l.a.createElement("span",{className:"gallery-count"},l.a.createElement(Vc,{count:e.length,type:"found",excludeClasses:!0}))}},{key:"deleteItem",value:function(e){this.setState({itemsToDelete:[e]})}},{key:"clearSearch",value:function(){var e=this.props,t=e.onSearchImages,n=e.onStockVideosReset,r=e.onStockImagesReset;t({searchText:""}),r(),n()}},{key:"openFivWithInfoPane",value:function(e){var t=this.props,n=t.onFivToggle,r=t.trackEvent;e.stopPropagation(),n(0,!0),r("IM_TRACK_FULL_VIEW_OPEN",h()({},"opened from search results",!0)),this.clearSearch()}},{key:"renderNoResults",value:function(){var e=this.props,t=e.hasUploaded,n=e.renderMode,r=e.mediaTypes;return l.a.createElement(Vm,{hasUploaded:t,embedded:n===Qi,mediaTypes:r,renderUploader:this.renderUploader,getUploadCopy:this.getUploadCopy,onAddDescription:this.openFivWithInfoPane})}},{key:"renderUploader",value:function(){var e=this.props,t=e.isUploadingVideos,n=e.mediaTypes;return t||function(e){var t=e.vimeoUser,n=e.totalVideosInAccount,r=e.mediaTypes,a=Mm(n,t);return Ru(e)&&St(r,st)&&a>=3&&t&&!t.convertedOn}(this.props)?null:l.a.createElement(pu,{id:"im-upload-button",onUpload:this.onUploadClick,mediaTypes:n})}},{key:"getUploadCopy",value:function(){var e=this.props.mediaTypes;return St(e,st)?"UPLOAD":St(e,it)?"ADD_IMAGES_CTA":"ADD_FILES_CTA"}},{key:"renderUploadPulse",value:function(){var e=this.props,t=e.flyoutIsOpen,n=e.renderMode;if(!Nm(Re)&&t&&n===Qi)return l.a.createElement("div",{className:"highlight-wrapper"},l.a.createElement("div",{className:"highlight-beacon"}),l.a.createElement("div",{className:"highlight-beacon"}))}},{key:"renderGalleryZeroState",value:function(){var e=this.props,t=e.mediaTypes,n=e.enableReducedUploadArea,r=e.renderMode,a=n&&r===$i,o=Bo.a,i="DRAG_AND_DROP_FILES_FULL";return St(t,st)?(i="DRAG_AND_DROP_VIDEO",o=Fo.a):St(t,it)&&(i="DRAG_AND_DROP_IMAGES_FULL",o=jo.a),l.a.createElement("div",{className:$o()("collection-gallery-zero-state primary-border",{"with-upload-experiment-A":a})},a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"icon-container"},l.a.createElement(xo.a,{height:32,width:32})),l.a.createElement("div",null,l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_ANYWHERE"})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"CLICK_TO_BROWSE_DEVICE"}))),this.renderUploadButton(!0)):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"icon-lg"},l.a.createElement(o,{height:50,width:50})),l.a.createElement("p",{className:"black"},l.a.createElement(p.FormattedMessage,{id:i})),l.a.createElement("p",{className:"or-subtext"},"—  ",l.a.createElement(p.FormattedMessage,{id:"OR"}),"   —"),this.renderUploadButton()))}},{key:"renderUploadedImagesGallery",value:function(){var e=this.props,t=e.previewUploadedImages,r=e.mixedAssetData,a=void 0===r?{}:r,o=e.uploadedImages,i=e.uploadedVideos,s=e.totalVideosInAccount,c=e.enableDelete,u=e.shouldShowUploadedMetadata,d=e.searchText,f=e.selectedMediaType,m=e.mediaTypes,h=e.renderMode,g=e.config.vimeoHelpLink,v=null,b=null,y=null,O=Bi(768)?2:1;if(Bi(640)&&(O=3),St(m,st)){if(!i)return;y=["videos","uploadedVideos"],v=i,b=s}else wt(m)?(v=a.uploadedAssets,b=a.uploadedAssetsTotal):(v=t,b=o.length,y=["images","uploaded"]);return v&&v.length?l.a.createElement("div",{className:"uploaded-gallery"},l.a.createElement("h5",{className:"header-with-progress-bar"},St(m,st)?l.a.createElement("div",{className:"powered-by-vimeo"},l.a.createElement(p.FormattedMessage,{id:"MY_VIDEOS"}),l.a.createElement("span",{onClick:function(){return window.open(g)}},l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"POWERED_BY"}),l.a.createElement("img",{src:n(69),alt:"vimeo logo"})))):l.a.createElement(p.FormattedMessage,{id:h===Qi?"MY_UPLOADS":"RECENTLY_ADDED"})),this.renderCollectionGallery({dataSource:v,dataSourceFullLength:b,pathToDataSource:y,className:"uploaded-list",collectionType:$e,isLoadingNext:!1,selectable:!0,shouldShowMetadata:u,onDownloadButtonClick:this.downloadImage,onDeleteButtonClick:c&&this.deleteItem,numRows:O,shouldTrackPerf:f===it})):d?this.renderNoResults():null}},{key:"renderPhotoshootGallery",value:function(){var e=this.props,t=e.photoshoot,n=e.photoshootIndex,r=e.intl,a=e.searchText,o=e.renderMode,i=["otherSites","websites",n,"images"];return t?0===t.length&&a?null:l.a.createElement("div",null,l.a.createElement("div",{className:"collection-heading"},l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"PHOTOSHOOT"})),this.renderPSBadge()),0===t.length?l.a.createElement("div",{className:$o()("photoshoot-not-ready product-midrange-border",{"product-background":o===Qi})},l.a.createElement(p.FormattedMessage,{id:"PHOTOSHOOT_NOT_READY"})):this.renderCollectionGallery({dataSource:t,pathToDataSource:i,className:"uploaded-list",collectionType:Je,isLoadingNext:!1,selectable:!1,onDownloadButtonClick:this.downloadImage,numRows:Bi(768)?2:1})):l.a.createElement(bl,{intl:r})}},{key:"renderStockGallery",value:function(){var e=this.props,t=e.stockImages,n=e.stockVideos,r=e.selectedMediaType,a=e.isLoadingNextStock,o=e.renderMode,i=e.mediaTypes,s=e.hasUploaded,c=e.placement,u=r===st?n:t,d=r===st?["videos","stockVideos"]:["images","stock"];if(u&&0!==u.length&&o===$i&&"LOGO"!==c)return l.a.createElement("div",null,l.a.createElement("h5",{className:"stock-media-header"},l.a.createElement(p.FormattedMessage,{id:St(i,st)?"STOCK_VIDEOS":"STOCK_MEDIA"})),this.renderCollectionGallery({dataSource:u,pathToDataSource:d,className:"stock-images-list",collectionType:"STOCK_MEDIA",isLoadingNext:a,selectable:!0,numRows:Bi(768)?2:1,shouldTrackPerf:!s&&r===it}))}},{key:"selectMostRecentFromGallery",value:function(e){e===$e&&this.trackEvent("IM_TRACK_VIEW_MOST_RECENT_GALLERY_CLICK"),this.selectCollection(e)}},{key:"renderCollectionGallery",value:function(e){var t=e.dataSource,n=e.dataSourceFullLength,r=e.pathToDataSource,a=e.className,i=e.collectionType,s=e.isLoadingNext,c=e.selectable,u=e.shouldShowMetadata,d=e.onDownloadButtonClick,p=e.onDeleteButtonClick,f=e.numRows,m=e.shouldTrackPerf,h=void 0!==m&&m,g=this.props,v=g.enableDelete,b=g.mediaTypes,y=g.selectItem,O=g.stockTotalCount,E=g.insertFullViewItem,_=g.selectedMediaType,I=g.insertLabel,S=g.enableInlineUpload,w=g.renderMode,T=g.ctaSourceType,k="STOCK_MEDIA"===i?O:null,C=this.galleryOverlay(this.selectMostRecentFromGallery.bind(this,i),t,n,k),x=Object(P.pick)(this.props,["trackEvent","thumbnailSize","minDimensions","preloadParams","intl","config","renderMode","selectionLimit","onTrackPerfLaunchEnd","onDownloadButtonClick","onCoverImageUpdate","onMetadataUpdate","inWebsiteContext","openOverCanvas","traceAuditEventStart","traceAuditEventEnd"]);if(this.getActiveCollections().includes(i)){var A={collectionKey:i,dataSourceFullLength:n,dataSource:t,onInsertButtonClick:E,mediaType:_,className:a,galleryOverlay:C,enableDelete:v,pathToDataSource:r,shouldShowMetadata:u,onDownloadButtonClick:d,onDeleteButtonClick:p,numRows:f,postLog:this.postLog,shouldTrackPerf:h,uploadCtaId:this.getUploadCopy(),insertLabel:I,thumbnailSettings:i===$e&&b.includes(st)&&Ru(this.props)};return c?l.a.createElement(lu,o()({isLoadingNext:s,onScrollEnd:null,enableInlineUpload:S&&i===$e&&w===$i&&!T,renderUploader:this.renderUploader},x,A)):l.a.createElement(Wm,o()({},A,{onThumbnailClick:y},x))}}},{key:"renderCollectionThumbnail",value:function(e){var t=e.dataSource,n=e.dataAid,r=e.type,a=e.totalCount,o=this.props,i=o.searchText,s=o.renderMode,c=[s===Qi?"IMAGE_UPLOADS":$e,"VIDEO_UPLOADS",nt,tt,rt,at,ot,Je];if(!(!t||0===t.length&&-1===c.indexOf(r)||0===t.length&&i)&&this.getActiveCollections().includes(r)){var u;switch(r){case"VIDEO_UPLOADS":u=Fo.a;break;case rt:u=Bo.a;break;default:u=jo.a}var d="VIDEO_UPLOADS"===r?Fc:"";return r!==rt&&_t(t)||(d="_FILE"),l.a.createElement("span",{className:"image-collection",key:n,"data-aid":n},l.a.createElement(gp,{postLog:this.postLog,renderMode:s,gallery:t.slice(0,4),onCollectionClick:this.selectCollection.bind(this,r),canGenerateThumbnails:!0,EmptyStateIcon:u}),l.a.createElement("p",{className:"collection-title black"},l.a.createElement(p.FormattedMessage,{id:r})),l.a.createElement("p",{className:"collection-subtitle"},l.a.createElement(Vc,{typeSuffix:d,count:a,type:"found"})))}}},{key:"renderVimeoModalWhenNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.vimeoUser,r=t.totalVideosInAccount,a=t.mediaTypes;if(!n||!St(a,st)||!Ru(this.props))return!1;var o=Lm({files:e,vimeoUser:n,totalVideosInAccount:r});return o!==vc&&(this.props.showVimeoModal({modalType:o}),!0)}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.renderVimeoModalWhenNeeded(e)||(zu(this.props,e,t),this.clearSearch())}},{key:"renderCollectionContainer",value:function(e){var t=this,n=this.props,r=n.uploadedImages,a=n.searchText,o=n.totalVideosInAccount,i=n.documents,s=n.collectionPreviewVideos,c=n.renderMode,u=n.olsImages,d=n.logoImages,f=n.headerImages,m=n.overImages,h=n.photoshootImages,g=n.wscAssets,v=n.uploadedVideos,b=void 0===v?[]:v,y="BROWSE_BY_MEDIATYPE"===e,O=y?[r.length,b.length,i.length]:[u.length,d.length,f.length,m.length,h.length,g.length],E=c===Qi?"IMAGE_UPLOADS":$e;if(!(y&&a||!y)||0!==O.reduce((function(e,t){return e+t}))){var _=y?[{dataSource:r,dataAid:Ei,type:E,totalCount:r.length},{shouldHide:!this.shouldRenderVideoCollection(),dataSource:s,dataAid:Pi,type:"VIDEO_UPLOADS",totalCount:o},{dataSource:i,dataAid:Ci,type:rt,totalCount:i.length}]:[{shouldHide:0===u.length,dataSource:u,dataAid:_i,type:Ze,totalCount:u.length},{shouldHide:0===d.length,dataSource:d,dataAid:wi,type:tt,totalCount:d.length},{shouldHide:0===g.length,dataSource:g,dataAid:ki,type:ot,totalCount:g.length},{shouldHide:0===f.length,dataSource:f,dataAid:Si,type:nt,totalCount:f.length},{shouldHide:0===m.length,dataSource:m,type:at,dataAid:Ii,totalCount:m.length},{shouldHide:0===h.length,dataSource:h,type:Je,dataAid:Ti,totalCount:h.length}];return l.a.createElement("div",{className:"collection-container"},l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:e})),l.a.createElement("div",{className:"collection-list thumbnail-list scrollable"},_.map((function(e){var n=e.shouldHide,r=Io()(e,["shouldHide"]);return n?null:t.renderCollectionThumbnail(r)})),l.a.createElement("div",null)))}}},{key:"renderUploadButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.props.isUploadingVideos,a=n||this.getUploadCopy();return t?l.a.createElement("div",{onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()},className:"upload-wrapper","data-click-eid":"upload_withimages_button_click"},this.renderUploader()):l.a.createElement(Ko.a,{onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()},className:"btn btn-img-action btn-sm btn-primary btn-primary-dark",disabled:r,"data-click-eid":"upload_withimages_button_click"},this.renderUploadPulse(),l.a.createElement("span",null,l.a.createElement(p.FormattedMessage,{id:a})),this.renderUploader())}},{key:"renderCtaArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.isVimeoLoading,a=n.intl,o=n.openOverCanvas,i=n.trackEvent,s=n.enableStudioLogoCreate,c=n.enableImageCreate,u=n.enableLogoCreate,d=n.enableMobileLogoCreateCta,p=n.canCreateLogo;return l.a.createElement(Im,{sourceType:e,renderUploadButton:this.renderUploadButton,isVimeoLoading:r,intl:a,expandCtaArea:t,openOverCanvas:o,trackEvent:i,enableStudioLogoCreate:s,enableImageCreate:c,enableLogoCreate:u,enableMobileLogoCreateCta:d,canCreateLogo:p})}},{key:"renderCollections",value:function(){var e=this,t=this.props,n=t.renderMode,r=t.searchText,a=t.mediaTypes,o=t.config,i=void 0===o?{}:o,s=t.otherSites,c=s.hasOthersites,u=s.hasPhotoshoot,d=t.socialMedia,f=(d=void 0===d?{}:d)[Me],m=(f=void 0===f?{}:f).pages,h=void 0===m?[]:m,g=f.coverPhotos,v=void 0===g?[]:g,b=f.isLoading,y=f.auth,O=(y=void 0===y?{}:y).accessToken,E=d[Le],_=(E=void 0===E?{}:E).posts,I=void 0===_?[]:_,S=E.isLoading,w=E.connected,T=E.authorized,k=t.selectedMediaType,C=t.isUploadingVideos,x=t.rejectFiles,A=t.inWebsiteContext,D=t.isVimeoLoading,P=t.intl,j=t.ctaSourceType,L=t.isLoadingUploadedImages,R=t.onObserveVentureCollectionArea,N=t.enableInlineUpload,U=t.hasUploaded,F=O&&O.length>0,V=w&&T,B=this.getActiveCollections(),G=i.showStockVideos,z=i.accountId,H=Ru(this.props)||!G,K=Bi(768),W=Ru(this.props)&&K&&k===st,q=St(a,st),Y=!r&&H&&(!K||!!j)&&(!N&&!this.shouldRenderFloatingUpload()||j||N&&!U||n===Qi);return q&&D||!q&&L?l.a.createElement("div",{className:"spinner-container"},l.a.createElement(M.a,{size:"lg"})):l.a.createElement(Du,{disabled:C,className:$o()("dropzone-with-images",{"full-scroll":n===Qi}),onDrop:this.onModalFileDrop,mediaTypes:a,enableVimeo:Ru(this.props),selectedMediaType:k,rejectFiles:x},Y&&l.a.createElement("div",{className:"upload-area-container"},l.a.createElement("h5",{className:"header-with-progress-bar"},l.a.createElement(p.FormattedMessage,{id:"ADD_TO_LIBRARY"})),j?this.renderCtaArea(j):this.renderGalleryZeroState()),u&&this.renderPhotoshootGallery(),W&&l.a.createElement(_l,{intl:P}),this.renderUploadedImagesGallery(),this.renderStockGallery(),!q&&l.a.createElement("div",{className:"collections-flex-wrapper"},wt(a)&&this.renderCollectionContainer("BROWSE_BY_MEDIATYPE"),this.renderCollectionContainer("BROWSE_BY_USAGE"),!r&&B.includes("SOCIAL_MEDIA")&&l.a.createElement("div",{className:"collection-container"},l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"SOCIAL_MEDIA"})),l.a.createElement("div",{className:"collection-list thumbnail-list scrollable"},l.a.createElement("span",{className:"image-collection","data-aid":xi},l.a.createElement(zm,{scrollObserver:this.socialObserver,onObserved:function(){var t=e.props,n=t.socialMedia[Me].auth.accessTokenInitFetched,r=t.config.featureFlags.enableAutoSocialAuth;!n&&r&&e.props.getSocialAccessToken(Me)}},l.a.createElement(gp,{url:v.length>0?v[0].imageUrl:"",gallery:v,zeroState:Vp[Me],isLoading:b,renderMode:n,onCollectionClick:this.selectCollection.bind(this,Me)})),l.a.createElement("p",{className:"collection-title black"},l.a.createElement(p.FormattedMessage,{id:"FACEBOOK"})),this.renderCollectionSubtitle(Object.keys(h).length,Me,F,b)),A&&z&&l.a.createElement("span",{className:"image-collection","data-aid":Ai},l.a.createElement(gp,{url:I.length>0?I[0].imageUrl:"",gallery:I.slice(0,4),zeroState:Vp[Le],isLoading:S,renderMode:n,onCollectionClick:this.selectCollection.bind(this,Le)}),l.a.createElement("p",{className:"collection-title black"},l.a.createElement(p.FormattedMessage,{id:"INSTAGRAM"})),this.renderCollectionSubtitle(I.length,Le,V,S)))),!r&&l.a.createElement(zm,{scrollObserver:this.observer,onObserved:function(){R()}}),B.includes(et)&&c&&!r&&this.renderOtherSitesCollections()))}},{key:"getActiveCollections",value:function(){return this.props.activeCollections}},{key:"renderDeleteConfirmation",value:function(){var e=this,t=this.state.itemsToDelete,n=this.props,r=n.enableDelete,a=n.onFilesDelete,o=n.intl,i=n.config;return r&&t&&t.length>0?l.a.createElement(jm,{config:i,itemsToDelete:t,onClose:function(){return e.setState({itemsToDelete:null})},onDelete:function(){return a(t)},intl:o}):null}},{key:"renderCollectionsView",value:function(){var e,t=this,n=this.props,r=n.vimeoUser,a=void 0===r?{}:r,o=n.selectedCollection,i=n.mediaTypes,s=n.handleVimeoReconnect,c=n.renderMode,u=n.trackEvent,d=n.intl,p=[];i.includes(it)&&p.push(xe),i.includes(st)&&p.push(Re);var f=(e={},h()(e,$e,(function(){return t.renderUploadedImagesContent(p)})),h()(e,"IMAGE_UPLOADS",(function(){return t.renderUploadedImagesContent("images")})),h()(e,Ze,(function(){return t.renderUploadedImagesContent(De)})),h()(e,tt,(function(){return t.renderUploadedImagesContent(Pe)})),h()(e,ot,(function(){return t.renderUploadedImagesContent(Fe)})),h()(e,nt,(function(){return t.renderUploadedImagesContent(je)})),h()(e,rt,(function(){return t.renderUploadedImagesContent("documents")})),h()(e,at,(function(){return t.renderUploadedImagesContent(Ue)})),h()(e,"VIDEO_UPLOADS",(function(){return t.renderUploadedImagesContent(Re)})),h()(e,Je,(function(){return t.renderUploadedImagesContent("photoshoot")})),h()(e,"SOCIAL_MEDIA",this.renderSocialMediaContent),h()(e,et,this.renderOtherSitesContent),h()(e,"STOCK_MEDIA",this.renderStockMediaContent),h()(e,"PRODUCTS",this.renderProductsContent),e);return l.a.createElement("div",{className:$o()("image-selector ia-collections",{standalone:c===Qi})},a.reconnectRequired&&l.a.createElement(um,{intl:d,handleOnReconnect:s}),o===Qe?this.renderCollections():f[o](),this.renderDeleteConfirmation(),i.includes(st)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Kf,null),l.a.createElement(im,{trackEvent:u,intl:d})))}},{key:"onUploadClick",value:function(e){if(!this.renderVimeoModalWhenNeeded(e)){var t=this.props,n=t.selectedCollection,r=t.renderMode,a=t.appName,o=n===rt&&r===$i,i=n===tt&&a===Ve,s=n===tt||"VIDEO_UPLOADS"===n;Gu(this.props,e),n===$e||n===Qe||o||i||s||this.selectCollection(Qe),this.clearSearch()}}},{key:"renderHeader",value:function(){var e=this,t=this.props,n=t.modalTitle,r=t.trackEvent,a=t.intl,o=t.searchText,i=t.config,s=void 0===i?{}:i,c=t.renderMode,u=t.selectedCollection,d=t.ctaSourceType,f=t.appName,m=t.mediaTypes,h=c===$i,g=s.searchDebounce,v=Bi(768),b="PRODUCTS"===u,y=Bo.a;St(m,dt)&&b?y=No.a:St(m,st)?y=Fo.a:St(m,it)&&(y=Lo.a);var O=s.featureFlags,E=-1!==((void 0===O?{}:O).disableFulltextSearch?qm:[].concat(qm,[$e,"IMAGE_UPLOADS",Ze,tt,nt,ot,Je])).indexOf(u),_=(u===rt||f===Ve&&u===tt)&&c===$i,I=!!d||this.shouldRenderFloatingUpload();return l.a.createElement("div",{className:"modal-header custom-header"},h&&l.a.createElement("div",{className:"header-title"},l.a.createElement(y,null),l.a.createElement("h4",{className:"modal-title"},n)),l.a.createElement("span",{className:$o()("header-actions",{"full-width":!h})},!_&&l.a.createElement("span",{className:$o()("search-actions",{"product-search":b,"no-margin":I})},l.a.createElement(Ef,{searchText:o,renderMode:c,trackEvent:r,intl:a,searchDebounce:g,canSearch:E,selectedCollection:u,back:this.selectCollection.bind(this,Qe),enableVimeo:Ru(this.props)})),v&&!b&&!I&&l.a.createElement("label",{className:"btn-img-action btn-sm btn-primary btn-primary-dark",onClick:function(){e.renderVimeoModalWhenNeeded(),e.dismissFlyoutIfVisible()}},this.renderUploadPulse(),l.a.createElement("div",{className:"uploader-overlay primary-dark-background"}),this.renderUploader(),l.a.createElement("span",null,l.a.createElement(xo.a,{"data-click-eid":"upload_withimages_button_click",height:18,width:18}),l.a.createElement(p.FormattedMessage,{id:this.getUploadCopy()})))))}},{key:"selectionCanDelete",value:function(){var e=this.props,t=e.enableDelete,n=e.selectedDeleteDisabled;return!(e.selectedMediaType===st&&!this.enableVimeoDelete())&&(t&&!n)}},{key:"selectionCanDownload",value:function(){return!this.props.selectedDownloadDisabled}},{key:"onDelete",value:function(){var e,t=this.props,n=t.selectedItems,r=t.selectedMediaType;if(0!==n.length){var a=n.filter((function(e){return e.basePath===De}));this.setState({itemsToDelete:n});var o=(e={},h()(e,"number of images",n.length),h()(e,"OLS",a.length>0),e);o["selected media type"]=r,this.trackEvent("IM_TRACK_DELETE_BUTTON_CLICK",o)}}},{key:"shouldRenderEditButton",value:function(){var e=this.props,t=e.enableEditWithOver,n=e.mediaTypes;return t&&St(n,it)}},{key:"renderCancelButton",value:function(e){var t=this.props,n=t.onClearSelection,r=t.intl;return l.a.createElement(Ko.a,{"data-click-eid":"image_modal_cancel_selection_click","data-aid":"cancel_selection",design:e,className:$o()("btn-secondary-pastel",{"with-edit":this.shouldRenderEditButton()}),onClick:n,text:r.formatMessage({id:"CANCEL"})})}},{key:"shouldRenderEditTooltip",value:function(){var e=this.props,t=e.selectedItems,n=e.enableStudioBgRemovalTooltip,r=t&&t.length>0,a=this.state.editTooltipDismissed;return r&&n&&!Nm("studio_bg_removal")&&!a&&this.shouldRenderEditButton()&&!Bi()}},{key:"dismissFlyoutIfVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re;if("studio_bg_removal"===e&&this.shouldRenderEditTooltip())return this.setState({editTooltipDismissed:!0}),void Um("studio_bg_removal");if("floating_upload"===e&&this.shouldRenderFloatingUpload())return this.setState({uploadOnboardingDismissed:!0}),void Um("floating_upload");var t=this.props,n=t.triggerFlyout,r=t.flyoutIsOpen;r&&(n(!1),Um(e))}},{key:"renderEditButton",value:function(){var e=this.props,t=e.openOverCanvas,n=e.selectedItems,r=e.trackEvent,a=e.intl,o=e.enableStudioBgRemovalTooltip,i=l.a.createElement(wc,{editItem:n[0],trackEvent:r,openOverCanvas:t,selectionCount:n.length,isFullCta:!0});return o&&!Nm("studio_bg_removal")?(this.shouldRenderEditTooltip()&&r("IM_TRACK_BG_PROMO_DISPLAY"),l.a.createElement("div",{className:"footer-edit-cta"},i,l.a.createElement(Df,{shouldBeVisible:this.shouldRenderEditTooltip(),intl:a,onClose:this.dismissFlyoutIfVisible.bind(null,"studio_bg_removal")}))):i}},{key:"renderDeleteButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.selectionCanDelete()?e?l.a.createElement("div",{onClick:this.onDelete,"data-click-eid":"delete_image_mobile_button_click","data-aid":"delete_image_mobile_button",className:"delete-btn primary-pastel"},l.a.createElement(ko.a,{height:26,width:26})):l.a.createElement(Ko.a,{design:"inline",onClick:this.onDelete,"data-click-eid":"delete_image_button_click","data-aid":"delete_image_button",className:"delete-btn primary-pastel",icon:l.a.createElement(ko.a,{height:16,width:16}),text:this.props.intl.formatMessage({id:"DELETE"})}):null}},{key:"renderInsertButton",value:function(){var e=this.props,t=e.insertLabel,n=e.onInsertButtonClick,r=e.intl,a=e.selectedItems,o=e.selectedCollection,i=this.shouldDisable(),s=a&&a.length>0,c=l.a.createElement(Ko.a,{id:"im-insert-button","data-click-eid":"image_modal_insert_click",disabled:!!i,"data-aid":"insert_images",className:$o()("btn btn-primary",{"disabled toggle-overlay":!!i,"btn-primary-pastel":s}),onClick:i?null:function(){n({selectedCollection:o})}},l.a.createElement("span",{className:"insert-text"},t));return i?l.a.createElement("div",{className:$o()("ux-btn-set-item",{"mobile-btn-set-item":Bi()})},l.a.createElement(Xo.a,{className:Bi()?"mobile-insert-tooltip":"desktop-insert-tooltip",message:r.formatMessage({id:i}),openOnHover:!0,autoHideTimeout:100,text:c})):c}},{key:"shouldDisable",value:function(){var e=this.props,t=e.selectedItems,n=e.selectedMediaType,r=e.mediaTypes,a=e.selectionLimit;return 0===t.length?1===a?"CHOOSE_JUST_ONE_".concat(n):"CHOOSE_IMAGE":a>0&&t.length>a?"".concat(n,"_SELECTION_LIMIT_EXCEEDED"):t.some((function(e){return e.sourceType===Re&&"available"!==e.status}))?"VIDEO_NOT_READY":!!t.some((function(e){return!r.includes(e.mediaType)}))&&" "}},{key:"renderUploadProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.mediaTypes,r=t.trackEvent,a=t.selectedItems,o=t.placement,i=t.selectedCollection;return l.a.createElement(Am,{activeSelection:a&&a.length>0,mediaTypes:n,trackEvent:r,isMobile:e,placement:o,selectedCollection:i})}},{key:"shouldRenderFloatingUpload",value:function(){var e=this.props,t=e.enableFloatingUpload,n=e.ctaSourceType,r=e.renderMode,a=e.selectedCollection;return!n&&t&&r===$i&&"PRODUCTS"!==a}},{key:"renderFooter",value:function(){var e,t=this.props,n=t.selectedItems,r=t.selectedMediaType,a=t.minDimensions,o=t.intl,i=t.renderMode,s=t.selectedCollection,c=t.enableStudioBgRemovalTooltip,u=t.showSlowUploadNotification,d=t.closeUploadNotification,p=this.state.uploadOnboardingDismissed,f=i===$i,m="PRODUCTS"===s,g=(e={},h()(e,ct,"selected_file"),h()(e,st,"selected_videos"),h()(e,dt,"selected_products"),e)[r],v=l.a.createElement(Vc,{count:n.length,type:g||"selected",typeSuffix:g||_t(n)?"":Uc,excludeClasses:!0}),b=(Gc(a,o)||{}).content,y=n&&n.length>0,O=!1;if(!this.shouldDisable()&&1===n.length){var E=a||{},_=E.width,I=E.height,S=n[0].dimensions||n[0].localDimensions;S&&(O=(_&&S.width<_||I&&S.height<I)&&!this.shouldRenderFloatingUpload())}O&&this.trackEvent("IM_TRACK_WARNING_DISPLAYED_SMALL_IMAGE");var w=O&&l.a.createElement("div",{className:"custom-growl"},l.a.createElement("p",null,l.a.createElement(zo.a,{height:22,width:22,fill:"yellow"}),b));return Bi(640)?l.a.createElement(l.a.Fragment,null,f&&this.renderUploadProgress(!0),l.a.createElement("div",{className:$o()("custom-modal-footer-mobile",{"is-active":y,dark:!f})},w,l.a.createElement("div",{className:"footer-controls primary-dark-background"},l.a.createElement("div",{className:"footer-selection"},l.a.createElement("p",{className:"primary-pastel"},v),this.renderCancelButton("inline")),l.a.createElement("div",{className:"mobile-footer-btn-set"},l.a.createElement("div",{className:"secondary-btns"},this.selectionCanDownload()&&this.renderDownloadButton("icon"),this.renderDeleteButton(!0))),f&&l.a.createElement("div",{className:"floating-insert"},this.shouldRenderEditButton()&&y&&this.renderEditButton()," "," ",this.renderInsertButton())),this.shouldRenderFloatingUpload()&&l.a.createElement(Mf,{tooltipShouldBeVisible:!p&&!Nm("floating_upload"),renderUploader:this.renderUploader,onClose:this.dismissFlyoutIfVisible.bind(null,"floating_upload")}))):l.a.createElement("div",{className:$o()("custom-modal-footer",{"is-active":y,"has-edit-tooltip":c})},w,f&&this.renderUploadProgress(),l.a.createElement("div",{className:"footer-controls primary-dark-background"},l.a.createElement("div",{className:"footer-selection"},l.a.createElement("p",{className:"primary-pastel"},v),!m&&l.a.createElement("div",{className:"dynamic-actions"},(this.selectionCanDownload()||this.selectionCanDelete())&&l.a.createElement("span",{className:$o()("divider",{"primary-pastel-border":y,"product-light-border":!y})}),this.renderDeleteButton(),this.selectionCanDownload()&&this.renderDownloadButton("inline"))),l.a.createElement(qo.a,null,this.renderCancelButton(),this.shouldRenderEditButton()&&this.renderEditButton(),f&&this.renderInsertButton())),this.shouldRenderFloatingUpload()&&l.a.createElement(Mf,{tooltipShouldBeVisible:!p&&!Nm("floating_upload"),renderUploader:this.renderUploader,onClose:this.dismissFlyoutIfVisible.bind(null,"floating_upload")}),f&&l.a.createElement(Tf,{active:u,toggle:d,intl:o}))}},{key:"render",value:function(){var e=this.props,t=e.renderMode,n=e.enableStudioBgRemovalTooltip,r=t===$i;return l.a.createElement(l.a.Fragment,null,this.renderHeader(),this.renderCollectionsView(),this.renderFooter(),n&&l.a.createElement("div",{className:$o()("flyout-overlay tooltip-overlay",{visible:this.shouldRenderEditTooltip()})}),!r&&this.renderUploadProgress(Bi(640)))}}]),r}(c.Component);Ym.propTypes=Object.assign({autoSelectAfterUpload:d.a.bool,uploadedImages:d.a.array,logoImages:d.a.array,photoshootImages:d.a.array,wscAssets:d.a.array,olsImages:d.a.array,documents:d.a.array,uploadedOrder:d.a.oneOf([ft,"OLDEST"]),enableDelete:d.a.bool,onImagesSelect:d.a.func,onImagesUpload:d.a.func,onCancel:d.a.func,insertFullViewItem:d.a.func,preloadParams:d.a.string,businessCategoryDisplayName:d.a.string,selectionLimit:d.a.number,intl:d.a.object.isRequired,addSources:d.a.array,minDimensions:d.a.object,trackEvent:d.a.func.isRequired,onCoverImageUpdate:d.a.func.isRequired,onFivToggle:d.a.func,otherSites:d.a.object,onOtherSourceImagesInsert:d.a.func,insertImagesFromOtherSource:d.a.func,selectedMediaType:d.a.oneOf(pt),onInitialUploadedImagesLoaded:d.a.func,mediaTypes:d.a.arrayOf(d.a.oneOf(pt)),inWebsiteContext:d.a.bool,shouldShowUploadedMetadata:d.a.bool,showVimeoModal:d.a.func,overImages:d.a.array,selectedCollection:d.a.string,activeCollections:d.a.arrayOf(d.a.string),setCurrentView:d.a.func,canCreateLogo:d.a.bool},Ke,qe),Ym.defaultProps={uploadedImages:[],logoImages:[],photoshootImages:[],headerImages:[],documents:[],olsImages:[],wscAssets:[],selectionLimit:-1,thumbnailSize:{width:140,height:105},renderMode:$i,addSources:[],selectedItems:[],selectedMediaType:it,socialMedia:{},overImages:[],activeCollections:[],selectedCollection:Qe,setCurrentView:function(){}};var Xm=Ym;function Qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $m=Object(f.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qm(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Dt(e))}),(function(e){return{setCurrentView:function(t){e(io(t))}}}))(Xm),Zm=n(98),Jm=n.n(Zm),eh=function(e){var t,n=e.flyoutIsOpen,r=e.triggerFlyout,a=e.renderMode,o=e.flyoutId,i=e.intl,u=Object(c.useState)(!1),d=s()(u,2),f=d[0],m=d[1],g=Object(c.useState)(!1),v=s()(g,2),b=v[0],y=v[1];if(o){var O=function(){if(!f){var e=a===$i||!!(t=document.querySelector(".upload-image-input"))&&t.getBoundingClientRect().y<document.documentElement.clientHeight/(Bi(768)?1:1.5);m(e),r(e)}var t},E=Object(c.useRef)(Object(P.throttle)(O,100));Object(c.useEffect)((function(){if(!f&&!b&&!n&&(O(),a===Qi))return window.addEventListener("scroll",E.current,{passive:!0}),function(){return window.removeEventListener("scroll",E.current)}}),[f]);var _=f&&!b&&n,I=Bi(768),S=(t={},h()(t,"vimeo",{title:"VIDEO_ONBOARDING_TITLE",subtitle:I?"VIDEO_ONBOARDING_FEATURE_DESCRIPTION_MOBILE":"VIDEO_ONBOARDING_FEATURE_DESCRIPTION",img:bm.a}),h()(t,"vimeo_create",{title:"VIMEO_CREATE_ONBOARDING_TITLE",subtitle:"VIMEO_CREATE_ONBOARDING_FEATURE_DESCRIPTION",img:gm.a}),h()(t,"over",{title:"OVER_ONBOARDING_TITLE",subtitle:"OVER_ONBOARDING_FEATURE_DESCRIPTION",img:Jm.a}),t);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:$o()("flyout-overlay",{visible:_,"modal-flyout-overlay":a===$i})}),l.a.createElement("div",{className:$o()("flyout-container",{visible:_,"modal-flyout":a===$i})},l.a.createElement("div",{className:"flyout-inner"},l.a.createElement("div",{className:"flyout-img product-background"},!I&&l.a.createElement("div",{className:$o()("img-container",{"over-container":"over"===o})},l.a.createElement("img",{src:S[o].img,alt:i.formatMessage({id:S[o].title})}))),l.a.createElement("div",{className:"flyout-content"},l.a.createElement("h2",null,l.a.createElement(p.FormattedMessage,{id:S[o].title})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:S[o].subtitle})),l.a.createElement(Ko.a,{"data-aid":"video_onboarding_acknowledge",design:"primary",className:"pull-right btn btn-primary",onClick:function(){Um(o),m(!1),r(!1),y(!0)},text:i.formatMessage({id:"VIDEO_ONBOARDING_ACKNOWLEDGE"})})))))}},th=Object(f.connect)((function(e){return{flyoutIsOpen:Us(e).flyoutIsOpen}}),(function(e){return{triggerFlyout:function(t){e(uo(t))}}}))(eh),nh=n(99),rh=n.n(nh);function ah(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.getElementById(e);return n||((n=document.createElement("iframe")).id=e,n.width="0",n.height="0",n.style.display="none",t&&document.body.appendChild(n)),n}function oh(e){var t=e.replace("disposition=0","disposition=1");if(t===e){var n=t.split("?"),r=s()(n,2),a=r[0];t=r[1]?"".concat(t,"&disposition=1"):"".concat(a,"?disposition=1")}return t}function ih(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.sourceType,a=n.dataUrl,o=n.imageUrl,i=n.filename,s=r===Ae?oh(o):"".concat(a,"?download=true");ah("IM_DOWNLOAD_".concat(i),!0).src=s}}var sh=n(100),ch=n.n(sh),lh=function(e){var t=e.recentUploadedImages,n=e.onModalHide,r=e.rootDomain,a=e.venturePrimaryDomain,o=e.onAutoSetLogo,i=e.trackEvent;if(0===t.length)return null;var u=Object(c.useState)(!1),d=s()(u,2),f=d[0],m=d[1],h=t[0],g=h.imageUrl,v=h.dimensions,b=void 0===v?{}:v,y=b.width,O=b.height,E=500/O*y,_=E*(O/y),I="https://onboarding.".concat(r,"/launch?domainName=").concat(a,"&itc=mya_vh_buildwebsite_with_logo"),S=Object(c.useRef)(null),w={origin:{y:.6},zIndex:9999,scalar:.9};return Object(c.useEffect)((function(){var e=rh.a.create(S.current,{resize:!0,useWorker:!0}),t=function(t,n){e(Object.assign({},w,n,{particleCount:Math.floor(200*t)}))};f&&(o({fromPostLogo:!0}),setTimeout((function(){t(.5,{spread:110,startVelocity:55}),t(.4,{spread:120}),t(.7,{spread:160,decay:.91,scalar:.8}),t(.2,{spread:190,startVelocity:25,decay:.92,scalar:1.2}),t(.2,{spread:190,startVelocity:45})}),750));var n=new Image;n.onload=function(){setTimeout((function(){m(!0)}),100)},n.src=g}),[f]),l.a.createElement("div",{className:$o()("post-logo-fiv",{"is-loaded":f})},l.a.createElement("div",{className:"spinner-container"},l.a.createElement(M.a,{inline:!0,size:"lg",label:"Finishing up..."})),l.a.createElement("div",{className:"fiv-logo-container"},l.a.createElement("div",{className:"post-logo-background",style:{backgroundImage:"url(".concat(g,")"),filter:"brightness(20%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),l.a.createElement("canvas",{id:"logo-confetti-canvas",ref:S}),l.a.createElement("div",{className:"logo-img-container"},l.a.createElement("div",{className:"post-logo-confirmation"},l.a.createElement("span",{className:"checkmark-container primary-background"},l.a.createElement(li.a,{height:14,width:14,fill:"#FFF"}))," ",l.a.createElement(p.FormattedMessage,{id:"LOGO_IS_READY"})),l.a.createElement("img",{src:di({url:g,width:E,height:_}),alt:l.a.createElement(p.FormattedMessage,{id:"LOGO_ALT"})}),l.a.createElement(Ko.a,{design:"secondary",onClick:function(){return ih(t)},"data-click-eid":"post_logo_download_cta_click","data-aid":"post_logo_download_cta",icon:l.a.createElement(Do.a,null),text:l.a.createElement(p.FormattedMessage,{id:"DOWNLOAD"})}))),l.a.createElement("div",{className:"rec-container"},l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:"WAM_UPSELL_SUBTITLE"})),l.a.createElement("h1",null,l.a.createElement(p.FormattedMessage,{id:"WAM_UPSELL_TITLE"})),l.a.createElement("img",{src:ch.a,alt:l.a.createElement(p.FormattedMessage,{id:"WAM_UPSELL_TITLE"})}),l.a.createElement(Ko.a,{href:I,onClick:function(){return i("IM_TRACK_POST_LOGO_WAM_CLICK")},design:"primary","data-click-eid":"post_logo_wam_cta_click","data-aid":"post_logo_wam_cta",text:l.a.createElement(p.FormattedMessage,{id:"START_CREATING"})}),l.a.createElement(Ko.a,{onClick:n,"data-click-eid":"post_logo_dashboard_cta_click","data-aid":"post_logo_dashboard_cta",as:"cta",text:l.a.createElement(p.FormattedMessage,{id:"CONTINUE_TO_DASHBOARD"})})))};function uh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var dh=function(e){I()(n,e);var t=uh(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"insertFullViewItem",value:function(e){var t=this.props,n=t.onInsertItems;(0,t.onFivToggle)(-1),n({selectedItems:[e]}),this.trackEvent("IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK",h()({},"number of images",1))}},{key:"insertImagesFromOtherSource",value:function(e){var t=this.props,n=t.onOtherSourceImagesInsert,r=t.selectedItems,a=function(e){return Object(P.pick)(e,["url","eTag","filename","sourceType","size","originalFilename","dimensions"])},o=e?[a(e)]:r.map(a);n({type:o[0].sourceType,images:o})}},{key:"insertProducts",value:function(){var e=this.props;(0,e.onProductsInsert)(e.selectedItems)}},{key:"onInsertButtonClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selectedCollection,n=e.fromPostLogo,r=void 0!==n&&n,a=this.props,o=a.mediaTypes,i=void 0===o?[]:o,c=a.selectedItems,l=a.recentUploadedImages,u=void 0===l?[]:l;if(c.length>0){var d,p=c[0].sourceType,f=t===et&&p?"".concat(et,"_").concat(p.toUpperCase()):t||"default",m=c.reduce((function(e,t){var n=s()(e,3),r=n[0],a=n[1],o=n[2];return"ols"===t.basePath&&r++,t.isStockMedia&&a++,t.isStockMedia||t.mediaType!==st||o++,[r,a,o]}),[0,0,0]),g=s()(m,3),v=g[0],b=g[1],y=g[2],O=(d={},h()(d,"number of images",c.length),h()(d,"image type",f),h()(d,"OLS",v>0),h()(d,"recentlyUploaded",String(u.length>0)),h()(d,"is stock media",b>0),h()(d,"stock media count",b),d);if(i.includes(st)&&(O["user video count"]=y),this.trackEvent("IM_TRACK_INSERT_BUTTON_CLICK",O),t===et||"SOCIAL_MEDIA"===t)return void this.insertImagesFromOtherSource();if("PRODUCTS"===t)return void this.insertProducts();this.props.onInsertItems({selectedItems:c,fromPostLogo:r})}}},{key:"onCancelButtonClick",value:function(){this.props.onCancel(),this.trackEvent("IM_TRACK_CANCEL_BUTTON_CLICK")}},{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props.trackEvent;n(e,t)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.onCancel,a=n.renderMode,i=n.mediaTypes,s=n.intl,c=n.insertLabel,u=n.enableOverFlyout,d=n.enableVimeoCreateFlyout,p=n.enableVimeoStandaloneFlyout,f=n.enableStudioBgRemovalTooltip,m=n.enableFloatingUpload,h=n.placement,g=n.recentUploadedImages,v=void 0===g?[]:g,b=n.enablePostLogoFlow,y=n.onModalHide,O=n.rootDomain,E=n.venturePrimaryDomain,_=u&&!f&&!m&&St(i,it)&&!Nm("over")&&!Bi()&&"over"!==h,I=d&&St(i,st)&&!Nm("vimeo_create")&&!Bi(),S=p&&!Nm("vimeo")&&!Bi(),w=c||s.formatMessage({id:"INSERT"}),T=b&&!Bi()&&v.length>0;return a===Qi?l.a.createElement(l.a.Fragment,null,l.a.createElement($m,o()({className:"collection-view-manager"},n,{key:n.mediaTypes,insertLabel:w})),S&&l.a.createElement(th,{renderMode:a,flyoutId:"vimeo",intl:s})):(_?e=l.a.createElement(th,{renderMode:a,flyoutId:"over",intl:s}):I&&(e=l.a.createElement(th,{renderMode:a,flyoutId:"vimeo_create",intl:s})),l.a.createElement("div",{id:"im-modal",className:"modal fade show"},l.a.createElement("div",{className:"image-selector-modal modal-dialog"},l.a.createElement("div",{className:"modal-content"},T&&l.a.createElement(lh,{recentUploadedImages:v,onModalHide:y,rootDomain:O,venturePrimaryDomain:E,onAutoSetLogo:this.onInsertButtonClick,trackEvent:this.trackEvent}),l.a.createElement("button",{"data-click-eid":"image_modal_close_click","aria-label":"Close modal",className:"ux-button ux-button-stateless ux-button-square modal-close",type:"button","data-action":"close","data-dismiss":"modal",onClick:function(e){!function(e,t,n){e&&t&&!e._calledComponentWillUnmount&&(n("IM_TRACK_CLOSE_MODAL"),t())}(e,r,t.trackEvent)}},l.a.createElement(Ce.a,{fill:"#111"})),l.a.createElement("div",{className:"modal-body"},l.a.createElement($m,o()({},n,{onInsertButtonClick:this.onInsertButtonClick,insertFullViewItem:this.insertFullViewItem,insertImagesFromOtherSource:this.insertImagesFromOtherSource,key:n.mediaTypes,insertLabel:w})),e)))))}}]),n}(c.Component);dh.propTypes=Object.assign({autoSelectAfterUpload:d.a.bool,uploadedImages:d.a.array,uploadedVideos:d.a.array,uploadedOrder:d.a.oneOf([ft,"OLDEST"]),enableDelete:d.a.bool,onImagesSelect:d.a.func,onImagesUpload:d.a.func,onCancel:d.a.func,onInsertItems:d.a.func,preloadParams:d.a.string,businessCategoryDisplayName:d.a.string,modalTitle:d.a.oneOfType([d.a.string,d.a.object]),selectionLimit:d.a.number,intl:d.a.object.isRequired,addSources:d.a.array,removeSources:d.a.array,minDimensions:d.a.object,trackEvent:d.a.func.isRequired,otherSites:d.a.object,onOtherSourceImagesInsert:d.a.func,insertLabel:d.a.oneOfType([d.a.string,d.a.object]),selectedMediaType:d.a.oneOf([it,st]),onInitialUploadedImagesLoaded:d.a.func,renderMode:d.a.oneOf([$i,Qi]),inWebsiteContext:d.a.bool,enabledCollections:d.a.array},Ke,qe),dh.defaultProps={uploadedImages:[],uploadedVideos:[],selectionLimit:-1,thumbnailSize:{width:140,height:105},addSources:[],removeSources:[],selectedItems:[],selectedMediaType:it,renderMode:$i,enabledCollections:[]};var ph=Object(p.injectIntl)(dh),fh="ls_initialized",mh="ls_not_initialized",hh="ls_not_initialized_not_backfilled",gh="ls_not_initialized_sync_failed";function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yh={NAVIGATION_START:"navigationStart",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED:"domContentLoaded",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"},Oh=[yh.NAVIGATION_START,yh.FETCH_START,yh.DOMAIN_LOOKUP_START,yh.DOMAIN_LOOKUP_END,yh.CONNECT_START,yh.CONNECT_END,yh.REQUEST_START,yh.RESPONSE_START,yh.RESPONSE_END,yh.DOM_LOADING],Eh=[yh.DOM_INTERACTIVE,yh.DOM_CONTENT_LOADED,yh.DOM_COMPLETE,yh.LOAD_EVENT_START,yh.LOAD_EVENT_END];function _h(e){if("undefined"!=typeof window&&window.performance&&window.performance[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=window.performance)[e].apply(t,r)}}function Ih(e,t){return t?"".concat(e,"##").concat(t,"##"):e}function Sh(e,t){var n=e;if("end"!==t&&e.includes(Il)){var r=e.split("-"),a=r[0]===Tl?1:0,o=r[r.length-1],i=[fh,mh,hh,gh].includes(o)?-1:0;n=r.slice(a,r.length+i).join("-")}return"".concat("bb-image-manager","-").concat(n,"-").concat(t)}function wh(e){var t=_h("getEntriesByName",e);if(t&&!(t.length<1))return t[0]}function Th(e){e&&(Object(P.values)(yh).map((function(t){return _h("clearMarks",Sh(e,t))})),_h("clearMarks",Sh(e,"start")),_h("clearMarks",Sh(e,"end")))}function kh(e){window._expDataLayer&&window._expDataLayer.push({schema:"add_virtual_page_perf",version:"v1",data:e})}function Ch(e){var t=e.eventName,n=e.start,r=e.end,a=e.feature,o=e.meta,i=void 0===o?{}:o,s=function(e){var t={};return Object(P.values)(yh).map((function(n){t[n]=wh(Sh(e,n))})),t}(t),c=a?h()({},"".concat("media_library_","ff_enabled"),a):{},l=function(e,t){return t?e.replace("##".concat(t,"##"),""):e}(t,i&&i.beaconId),u=function(e,t,n){var r;switch(e){case Sl:return r={},h()(r,"".concat("media_library_","upload_fileCount"),t.fileCount),h()(r,"".concat("media_library_","upload_totalSize"),t.totalSize),h()(r,"".concat("media_library_","upload_timePerFile"),t.fileCount&&Math.round(n/t.fileCount)),h()(r,"".concat("media_library_","upload_timePerMB"),t.totalSize&&Math.round(n/t.totalSize*1024*1024)),r;case wl:return h()({},"".concat("media_library_","load_ventures"),n);default:return{}}}(l,i,r-n),d={},p=function(e,t){d[t]=Math.round(s[t]&&s[t].startTime||e)};return Oh.forEach(p.bind(null,n)),Eh.forEach(p.bind(null,r)),{virtual_path:"/beacon/bb-image-manager/".concat(l),timing_metrics:d,custom_properties:bh(bh({},c),u)}}function xh(e,t){var n=Sh(e,t);wh(n)||_h("mark",n)}var Ah={beginEvent:function(e,t){xh(e=Ih(e,t&&t.beaconId),"start")},endEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.feature,r=t.meta;if(e){var a=wh(Sh(e=Ih(e,r&&r.beaconId),"start"));if(a){var o=Sh(e,"end");_h("mark",o);var i=_h("getEntriesByName",o)[0];kh(Ch({eventName:e,start:a.startTime,end:i.startTime,feature:n,meta:r})),Th(e)}}},createMark:xh,clearAllMarks:function(){for(var e=(_h("getEntriesByType","mark")||[]).filter((function(e){return"bb-image-manager"===e.name.substring(0,"bb-image-manager".length)})),t=0;t<e.length;t++)_h("clearMarks",e[t].name)},metrics:yh},Dh=n(62),Ph=null,jh=!0;function Mh(e){return function(t){return Ph&&jh?Ph.promise.then((function(n){return n[e](t)})).catch((function(){return jh=!1,Dh[e](t)})):Dh[e](t)}}var Lh=Mh("getAssets"),Rh=Mh("setAssets"),Nh=Mh("addAssets"),Uh=Mh("removeAssets"),Fh=Mh("getManifest"),Vh=Mh("setManifest"),Bh=Mh("setAsset"),Gh=Mh("getAsset"),zh=(Mh("getSearchIndex"),Mh("setSearchIndex"),n(101)),Hh=n.n(zh),Kh=n(102),Wh=n.n(Kh);n(128);function qh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Yh=function(e){I()(n,e);var t=qh(n);function n(e){var r;return v()(this,n),(r=t.call(this,e)).imageUploaderRef=l.a.createRef(),r.state={openedFileDialog:!1,clickedUpload:!1},R()(E()(r)),r}return y()(n,[{key:"componentDidMount",value:function(){var e,t;this.props.enableDirectUpload&&(window.addEventListener("focus",this.closeModal),!this.state.openedFileDialog&&(null===(e=this.imageUploaderRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clickUpload)&&(this.imageUploaderRef.current.clickUpload(),this.setState({openedFileDialog:!0})))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.closeModal)}},{key:"closeModal",value:function(){var e=this;setTimeout((function(){e.state.openedFileDialog&&!e.state.clickedUpload&&e.props.onModalHide()}),500)}},{key:"renderStudioCreateButton",value:function(){var e=this.props,t=e.openOverCanvas,n=e.trackEvent;return l.a.createElement(Ko.a,{className:"btn create-button",size:"large",design:"primary",onClick:function(){t({},Pe),n("IM_TRACK_LOGO_CREATE_CLICK")},"border-radius":"6px"},l.a.createElement(p.FormattedMessage,{id:"BROWSE_TEMPLATES"}))}},{key:"onUploadClick",value:function(e){this.setState({clickedUpload:!0},Gu(this.props,e))}},{key:"renderUploader",value:function(){var e=this.props.mediaTypes;return l.a.createElement(pu,{ref:this.imageUploaderRef,id:"im-upload-button",onUpload:this.onUploadClick,mediaTypes:e})}},{key:"renderUploadButton",value:function(){return l.a.createElement(Ko.a,{onClick:function(){},design:"secondary",icon:l.a.createElement(xo.a,null),className:"btn btn-img-action btn-sm btn-primary btn-primary-dark","data-click-eid":"upload_withimages_button_click"},l.a.createElement(p.FormattedMessage,{id:"UPLOAD"}),this.renderUploader())}},{key:"renderUploadProgress",value:function(){var e=this.props,t=e.mediaTypes,n=e.trackEvent,r=e.selectedItems,a=e.placement,o=e.selectedCollection;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"icon-container"},l.a.createElement(xo.a,{height:100,width:100})),l.a.createElement(Am,{activeSelection:r&&r.length>0,mediaTypes:t,trackEvent:n,placement:a,selectedCollection:o}))}},{key:"renderNoAssetDropZone",value:function(){var e=this.props,t=e.mediaTypes,n=e.selectedMediaType,r=e.rejectFiles;return l.a.createElement(Du,{className:"direct-upload-dropzone",onDrop:this.onModalFileDrop,mediaTypes:t,enableVimeo:!1,selectedMediaType:n,rejectFiles:r,disableHover:!0,enableClick:!0},l.a.createElement("div",{className:"logo-zero-state-card cta-card upload-card"},l.a.createElement("div",{className:"img-container"},l.a.createElement(Lo.a,{className:"img-icon",height:60,width:60}),l.a.createElement("div",{className:"cloud-container"},l.a.createElement(xo.a,{height:30,width:30}))),l.a.createElement("h6",null,l.a.createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_IMAGES_FULL"})),l.a.createElement("div",null,l.a.createElement("span",{className:"inline-text"},l.a.createElement(p.FormattedMessage,{id:"OR_CLICK_TO",className:"inline-text"})," "),l.a.createElement("span",{className:"upload-link inline-text"},l.a.createElement(p.FormattedMessage,{id:"DRAG_AND_DROP_IMAGES_2"})))))}},{key:"onModalFileDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];zu(this.props,e,t)}},{key:"renderCreateCard",value:function(e){return l.a.createElement("div",{className:"logo-zero-state-card create-logo-card cta-card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("h2",null,l.a.createElement(p.FormattedMessage,{id:e.createTitle})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:e.createSubtitle})),this.renderStudioCreateButton()),l.a.createElement("img",{src:e.createImg,className:"cta-image",alt:l.a.createElement(p.FormattedMessage,{id:e.createTitle})}))}},{key:"renderUploadCard",value:function(e){return l.a.createElement("div",{className:"logo-zero-state-card cta-card upload-card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("h3",null,l.a.createElement(p.FormattedMessage,{id:e.uploadTitle})),l.a.createElement("p",null,l.a.createElement(p.FormattedMessage,{id:e.uploadSubtitle}))),l.a.createElement("div",null,this.renderUploadButton()))}},{key:"renderCreateAndUpload",value:function(e){return[this.renderCreateCard(e),this.renderUploadCard(e)]}},{key:"render",value:function(){var e=this.props,t=e.onModalCloseCallback,n=e.uploadProgress,r=e.modalTitle,a=e.onModalHide,o=e.recentUploadedImages,i=e.deletedAllUploaded,s=e.enableDirectUpload,c={createTitle:"CREATE_CUSTOM_LOGO",createSubtitle:"CREATE_CUSTOM_LOGO_SUBTITLE",uploadTitle:"ALREADY_HAVE_LOGO",uploadSubtitle:"ALREADY_HAVE_LOGO_SUBTITLE",createImg:Wh.a},u=n>=0,d=s?a:t,p=s&&!u&&!i&&0===o.length;return l.a.createElement(qf.a,{className:$o()("logo-zero-state-modal",{"direct-uploader":s,"logo-zero-state-modal-hidden":p}),onClose:d,id:"im-logo-zero-state-modal",title:l.a.createElement(l.a.Fragment,null,l.a.createElement(Hh.a,null),r),closeButton:!0},u?l.a.createElement("div",{className:"upload-progress product-faint-background"},this.renderUploadProgress()):l.a.createElement(l.a.Fragment,null,s&&i?this.renderNoAssetDropZone():s?this.renderUploader():this.renderCreateAndUpload(c)))}}]),n}(c.Component);function Xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Zh=function(e){I()(r,e);var t=$h(r);function r(e){var n,a;return v()(this,r),n=t.call(this,e),Ah.createMark("launch","fetchStart"),a=e.bbConfig.imLiveBuildVersion,Uu=a,n.state={overCanvasIsOpen:!1,editItem:null,sourceType:null,logoCreateFlow:!1},R()(E()(n)),n}return y()(r,[{key:"componentDidUpdate",value:function(e){this.props.selectedCollection&&this.props.selectedCollection!==e.selectedCollection&&this.props.setCollection(this.props.selectedCollection),this.props.studioItemCreated&&!e.studioItemCreated&&this.props.loadImages()}},{key:"componentDidMount",value:function(){this.props.traceAuditEventStart({name:kl}),n(129),window.addEventListener("keydown",this.onKeyboardPress,!0);var e=this.props,t=e.websiteId,r=e.websiteType,a=e.accountId,o=e.businessCategory,i=e.rootDomain,s=e.market,c=e.addSources,l=e.tracker,u=e.appName,d=e.bbConfig,p=e.enableTagBuilder,f=e.onItemsSelectedCallback,m=e.onModalCloseCallback,h=e.onApiAuthErrorCallback,g=e.onCollectionViewChangeCallback,v=e.placement,b=e.featureFlags,y=e.insertLabel,O=e.onStockImagesSearchCallback,E=e.onImagesUploadCallback,_=e.onFilesDeletedCallback,I=e.renderMode,S=e.removeSources,w=e.iframeConnection,T=e.photoshootId,k=e.ventureId,C=e.ventureProfileAnchor,x=e.onModalOpen,A=e.onBackToTopButtonClick,D=e.venturePrimaryDomain,j=e.launchPath,M=!k&&Object(P.get)(d,"featureFlags.enableLocalStorage",!1)&&!!window.indexedDB;M&&(Ph=w);var L=Object(P.isEmpty)(this.props.mediaTypes)?[it]:this.props.mediaTypes,R=L.length>1&&L.includes(it)?it:L[0],N=!!(c&&c.includes("STOCK_VIDEO")&&L.includes(st));x(Object(P.merge)({},d,{ventureId:k,websiteId:t,websiteType:r,accountId:a,businessCategory:o,rootDomain:i,market:s,tracker:l,appName:u,enableTagBuilder:p,placement:v,photoshootId:T,modalTitle:this.getModalTitle(),showStockVideos:N,selectedMediaType:R,removeSources:S,renderMode:I,callbacks:{onItemsSelected:f||null,onModalClose:m||null,onStockImagesSearch:O||null,onImagesUpload:E||null,onApiAuthError:h||function(){},onCollectionViewChange:g||null,onBackToTopButtonClick:A,onFilesDelete:_||null},featureFlags:Qh(Qh({},b),{},{enableLocalStorage:M}),insertLabel:y,mediaTypes:L,ventureProfileAnchor:C,venturePrimaryDomain:D})),"create"===j&&this.openOverCanvas({},Pe)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyboardPress,!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!function(e,t){var n=t.autoSelectAfterUpload,r=t.recentUploadedImages,a=t.selectItem,o=t.selectionLimit,i=t.stagingCount,s=t.hasExistingSelection;if(n&&e!==r){if(s||o>0&&i>o)return;Array.isArray(e)&&e.forEach((function(e){return a(e,{autoselect:!0})}))}}(e.recentUploadedImages,this.props)}},{key:"onKeyboardPress",value:function(e){var t=this.props,n=t.onModalHide,r=t.onFivToggle,a=t.fivIndex,o=t.trackEvent;switch(e.key){case"Escape":-1===a?n():(o("IM_TRACK_FULL_VIEW_CLOSE"),r(-1));break;default:return}}},{key:"closeOverCanvas",value:function(e){var t=this.props,n=t.trackEvent,r=t.appName,a=t.placement,o=t.launchPath,i=t.onModalHide,s=r===Ve&&"LOGO"===a;this.setState({overCanvasIsOpen:!1,editItem:null,sourceType:null}),e?(n("IM_TRACK_OVER_CANVAS_COMPLETE"),this.state.logoCreateFlow&&(n("IM_TRACK_STUDIO_LOGO_CREATE_COMPLETE"),this.setState({logoCreateFlow:!1})),this.props.onReceiveImageFromOver(e,!s&&"brand"!==r)):(n("IM_TRACK_OVER_CANVAS_CLOSE"),"create"===o&&i())}},{key:"openOverCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(P.isEmpty)(e)&&t===Pe&&this.setState({logoCreateFlow:!0}),this.setState({overCanvasIsOpen:!0,editItem:e,sourceType:t})}},{key:"shouldShowLogoZeroState",value:function(){var e=this.props,t=e.placement,n=e.renderMode,r=e.appName,a=e.logoImages;return!("LOGO"!==t||r!==Ve||n===Qi||Bi()||a&&0!==a.length)}},{key:"getModalTitle",value:function(){var e=this.props.modalTitle,t=Object(P.isEmpty)(this.props.mediaTypes)?[it]:this.props.mediaTypes;if(e)return e;var n="MODAL_TITLE";return St(t,it)?n=this.shouldShowLogoZeroState()?"ADD_LOGO":"MODAL_TITLE_IMAGE":St(t,st)&&(n="MODAL_TITLE_VIDEO"),l.a.createElement(p.FormattedMessage,{id:n})}},{key:"render",value:function(){var e,t,n=this.props,r=n.onModalHide,a=n.otherSites,i=(a=void 0===a?{}:a).isCopyingImages,s=n.uploadedAssetsFetched,c=n.customLoader,u=n.enableStudioLogoCreate,d=n.enableEditWithOver,f=n.enableStudioResize,m=n.websiteId,h=n.tracker,g=n.ventureId,v=n.placement,b=n.mediaTypes,y=n.trackEvent,O=n.onModalCloseCallback,E=n.bbConfig,_=this.state,I=_.overCanvasIsOpen,S=_.editItem,w=_.sourceType,T=d||u&&v!==Ue;u&&S&&(S.id=null!==(e=S.id)&&void 0!==e?e:D.a.v4(),S.dimensions=null!==(t=S.dimensions)&&void 0!==t?t:{width:2048,height:2048},w===Pe&&(S.references=[Pe]));var k={canvasResize:f},C=i&&l.a.createElement("div",{className:"image-manager-overlay"},l.a.createElement("div",{className:"image-manager-overlay-message"},l.a.createElement(M.a,{inline:!0,size:"lg",label:l.a.createElement(p.FormattedMessage,{id:"COPYING_IMAGES_TO_YOUR_SITE"},(function(e){return l.a.createElement("label",null,e)}))}))),A=this.shouldShowLogoZeroState(),j=this.getModalTitle(),L=Object(P.get)(E,"canCreateLogo",!1);return l.a.createElement(l.a.Fragment,null,s||!c?l.a.createElement("div",{className:$o()({"image-modal":!A,"logo-zero-state-modal":A})},l.a.createElement(x.a,null),A?l.a.createElement(Yh,o()({mediaTypes:b,trackEvent:y,openOverCanvas:this.openOverCanvas,onClose:O,modalTitle:j,enableDirectUpload:!L,onModalHide:r},this.props)):l.a.createElement(ph,o()({onCancel:r},this.props,{openOverCanvas:this.openOverCanvas,modalTitle:j,canCreateLogo:L})),C):c,T&&I&&(g&&!m?l.a.createElement(Te,{open:I,ventureId:g,onCancel:this.closeOverCanvas,brandbookItem:S,tracker:h,onProjectSynced:this.closeOverCanvas,featureOverrides:k}):l.a.createElement(Te,{open:I,websiteId:m,onCancel:this.closeOverCanvas,brandbookItem:S,tracker:h,onProjectSynced:this.closeOverCanvas,featureOverrides:k})))}}]),r}(l.a.Component);Zh.defaultProps={autoSelectAfterUpload:!0,websiteType:"internal",enableDelete:!0,enableTagBuilder:!1,featureFlags:{},mediaTypes:[it],market:"en-US",ventureProfileAnchor:"my-photo",renderMode:$i},Zh.propTypes={market:d.a.string.isRequired,otherSites:d.a.object,addSources:d.a.array,removeSources:d.a.array,onModalHide:d.a.func,uploadedAssetsFetched:d.a.bool,customLoader:d.a.element,renderMode:d.a.oneOf([$i,Qi]),onFivToggle:d.a.func,fivIndex:d.a.number,trackEvent:d.a.func,inWebsiteContext:d.a.bool,enableEditWithOver:d.a.bool,store:d.a.object,websiteId:d.a.string.isRequired,websiteType:d.a.string,accountId:d.a.string.isRequired,bbConfig:d.a.object.isRequired,businessCategory:d.a.string,rootDomain:d.a.string.isRequired,i18nContent:d.a.object,autoSelectAfterUpload:d.a.bool,enableDelete:d.a.bool,enableTagBuilder:d.a.bool,selectionLimit:d.a.number,tracker:d.a.object,appName:d.a.string,modalTitle:d.a.string,placement:d.a.string,minDimensions:d.a.object,onItemsSelectedCallback:d.a.func,onModalCloseCallback:d.a.func,onStockImagesSearchCallback:d.a.func,onImagesUploadCallback:d.a.func,onFilesDeletedCallback:d.a.func,onApiAuthErrorCallback:d.a.func,onCollectionViewChangeCallback:d.a.func,featureFlags:d.a.object,insertLabel:d.a.string,preloadParams:d.a.string,mediaTypes:d.a.arrayOf(d.a.oneOf([it,st,ct,lt])),iframeConnection:d.a.object,photoshootId:d.a.string,ventureId:d.a.string,selectedCollection:d.a.string,ventureProfileAnchor:d.a.string,studioItemCreated:d.a.bool,enableStudioResize:d.a.bool,enableLogoZeroState:d.a.bool,launchPath:d.a.string};var Jh=Zh;var eg=function(e){var t=js(e),n=t.placement,r=t.mediaTypes;return"LOGO"===n&&Kl(e)?Pe:St(r,st)?Re:St(r,it)&&"LOGO"!==n&&Xl(e)?Ue:void 0},tg=Object(f.connect)((function(e,t){return Object.assign({enableOverFlyout:Wl(e),enableVimeoCreateFlyout:ql(e),enableVimeoStandaloneFlyout:Yl(e),enableEditWithOver:Hl(e),enableLogoCreate:Kl(e),ctaSourceType:eg(e),enableStudioBgRemovalTooltip:Zl(e),enableImageCreate:Xl(e),enableStudioLogoCreate:Jl(e),enableRemoveInsertBar:Ql(e),enableFloatingUpload:$l(e),enablePostLogoFlow:tu(e),enableReducedUploadArea:nu(e),enableInlineUpload:ru(e),enableStudioResize:au(e),enableLogoZeroState:ou(e),enableMobileLogoCreateCta:eu(e)},ic(e),oc(e),t)}),(function(e,t){var n,r,a,o=function(e,t){var n=[],r=t.mediaTypes;return t.renderMode===Qi||St(r,st)||St(r,dt)||n.push("STOCKIMAGES"),St(r,dt)&&n.push("PRODUCTS"),qd(n,e)}(e,t),i=!!(null===(n=t.bbConfig)||void 0===n||null===(r=n.spaq)||void 0===r||null===(a=r.client)||void 0===a?void 0:a.enabled);return{onModalOpen:function(t){e(Cr(t)),o.dispatchAction(td),e(Eo())},onModalHide:function(){e(sa())},switchSocialCollection:function(t){e(ba(t))},loadSite:function(t){var n=t.containerId,r=t.type;e(da({containerId:n,type:r}))},loadViewableSitesNextPage:function(){e(no())},onInsertItems:function(t){var n=t.selectedItems,r=t.fromPostLogo;e(ua({selectedItems:n,fromPostLogo:void 0!==r&&r}))},onOtherSourceImagesInsert:function(t){var n=t.type,r=t.images;e(pa({type:n,images:r}))},onProductsInsert:function(t){e(so(t))},onDownloadImage:function(e){ih(e)},trackEvent:function(t,n){e(ma({eventName:t,data:n}))},onTrackPerfLaunchEnd:function(){e(La(Il)),i&&(e(Oo({name:kl})),e(vo()))},onLoadMoreImages:function(t){e(Ha(t))},onLoadMoreVideos:function(){e(co())},onCoverImageUpdate:function(t){e(Qa({image:t}))},onFivToggle:function(t){e($a({index:t}))},onModalImagesUpload:function(t){t&&t.length&&e(Nr(t))},onFilesDelete:function(t){e(Zr(t))},onClearSelection:function(){e(Aa())},onSearchImages:function(t){e(qa(t))},onMetadataUpdate:function(t,n){e(Ba({image:t,metadata:n}))},onStockImagesSearch:function(e){o.dispatchAction(nd,e)},onStockImagesReset:function(){o.dispatchAction(td)},onStockVideosReset:function(){e(Lr())},selectItem:function(n,r){e(xa(Is(n,t,r)))},showVimeoModal:function(t){e(Qr(t))},rejectFiles:function(t){e(ro(t))},closeUploadNotification:function(){e(oo())},onReceiveImageFromOver:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e(Xa()),n&&e(io(Qe)),e(Fa({newImages:gd(t)}))},onFilesUpload:function(t){var n=t.images,r=t.videos;e(Vr({images:n,videos:r}))},triggerFlyout:function(t){e(uo(t))},getSocialAccessToken:function(t){e(ha(t))},handleVimeoReconnect:function(){e(mo())},setCollection:function(t){e(io(t))},onObserveVentureCollectionArea:function(){e(Ma(wl))},onLoadVentureImages:function(){e(La(wl))},loadImages:function(){e(Ur())},traceAuditEventStart:function(t){i&&e(yo(t))},traceAuditEventEnd:function(t){i&&e(Oo(t))}}}))(Jh),ng=Vi;function rg(e){var t=e.handleOpenMediaManager,n=e.trackEvent,r=Object(p.useIntl)();return l.a.createElement("div",{className:"video-cta-card cta-card row"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8"},l.a.createElement("h4",null,l.a.createElement(p.FormattedMessage,{id:"VIDEO_CTA_MODAL_TITLE"})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:"VIDEO_CTA_MODAL_SUBTITLE"})),l.a.createElement(N.Button,{className:"btn",design:"primary",size:"large","data-aid":ng,text:r.formatMessage({id:"CREATE_OR_UPLOAD"}),onClick:function(){t(),n("IM_TRACK_VIDEO_SELECTOR_OPEN_MEDIA_LIBRARY")}})),l.a.createElement("div",{className:"col-md-4 image-container"},l.a.createElement("img",{className:"cta-image",src:gm.a,width:300,alt:"video-upload-new-feature"}))))}var ag=n(103),og=n.n(ag),ig=Fi;function sg(e){var t,n=e.onSave,r=e.trackEvent,a=Object(c.useState)(""),o=s()(a,2),i=o[0],u=o[1],d=(t=i).match(/youtube|youtu.be/i)||t.match(/vimeo/i),f=Object(c.useCallback)((function(e){u(e)}),[u]),m=Object(c.useCallback)((function(){d&&(n(i),r("IM_TRACK_VIDEO_SELECTOR_SAVE_URL"))}),[i]);return l.a.createElement("div",{className:"embed-video-input-container bg-faint cta-card row"},l.a.createElement("div",{className:"embed-header"},l.a.createElement("h5",null,l.a.createElement(p.FormattedMessage,{id:"EMBED_TITLE"})),l.a.createElement("p",{className:"gray"},l.a.createElement(p.FormattedMessage,{id:"EMBED_DESCRIPTION"}))),l.a.createElement("div",{className:"embed-input"},l.a.createElement(og.a,{value:i,onChange:f}),l.a.createElement(Ko.a,{className:"btn",design:"primary",size:"large","data-aid":ig,text:l.a.createElement(p.FormattedMessage,{id:"SAVE"}),disabled:!d,onClick:m})))}n(140);function cg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var lg=function(e){I()(n,e);var t=cg(n);function n(e){var r;return v()(this,n),r=t.call(this,e),R()(E()(r)),r}return y()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.trackEvent,n=e.onModalOpen,r=e.bbConfig,a=e.ventureId,o=e.websiteId,i=e.websiteType,s=e.accountId,c=e.rootDomain,l=e.market,u=e.tracker,d=e.appName,p=e.assetContainerId,f=e.getUser;n(Object(P.merge)({},r,{ventureId:a,websiteId:o,websiteType:i,accountId:s,rootDomain:c,market:l,tracker:u,appName:d,assetContainerId:p})),t("IM_TRACK_VIDEO_SELECTOR_OPEN"),f()}},{key:"handleOnEmbedLinkSaved",value:function(e){(0,this.props.onItemsSelectedCallback)([{videoUrl:e}])}},{key:"render",value:function(){var e=this.props,t=e.bbConfig,n=e.onModalCloseCallback,r=e.onOpenMediaManager,a=e.trackEvent,o=e.vimeoUser,i=!o.accountType,s=Object(P.get)(t,"featureFlags.enableVideoSelectorModalUploads",!1)&&o.convertedOn,c=s?"VIDEO_CTA_MODAL_HEADER":"VIDEO_CTA_MODAL_HEADER_LINK_ONLY";return i?l.a.createElement(qf.a,{onClose:n,id:"im-video-cta-selector-modal-loader"},l.a.createElement("div",{className:"spinner-container"},l.a.createElement(M.a,{size:"lg"}))):l.a.createElement(qf.a,{className:"video-cta-modal",onClose:n,id:"im-video-cta-selector-modal",title:l.a.createElement(p.FormattedMessage,{id:c})},s&&l.a.createElement(rg,{handleOpenMediaManager:r,trackEvent:a}),l.a.createElement(sg,{onSave:this.handleOnEmbedLinkSaved,trackEvent:a}))}}]),n}(c.Component),ug=Object(f.connect)((function(e){return{vimeoUser:qs(e)}}),(function(e){return{trackEvent:function(t,n){e(ma({eventName:t,data:n}))},onModalOpen:function(t){e(xr(t))},getUser:function(){e(Yr())}}}))(lg),dg=n(44),pg=n(37),fg=n.n(pg),mg=jt()(["NOT_STARTED","STARTED","SUCCESS","FAIL"]),hg=jt()(["IMAGE_UPLOAD","IMAGES_LOAD","VIDEOS_LOAD","VIDEOS_LOAD_MORE","VIDEOS_LOAD_STATS","VIDEO_REFRESH","VIDEO_UPDATE_PRIVACY","VIDEO_DELETE","VIDEOS_LOAD_USER","VIDEOS_REMOVE_USER_CONNECTION","VIDEOS_CONVERT_USER","VIDEOS_CREATE_UPLOAD","VIDEOS_PUSH_UPLOAD","IMAGES_DELETE","IMAGES_UPDATE","STOCK_IMAGES_LOAD","STOCK_IMAGES_SEARCH","STOCK_IMAGES_NEXTPAGE","STOCK_VIDEOS_LOAD","STOCK_VIDEOS_SEARCH","WEBSITES_LOAD","VENTURES_LOAD","V7_WEBSITES_LOAD","VENTURE_IMAGES_LOAD","GC_SITE_IMAGES_LOAD","V7_SITE_IMAGES_LOAD","SITE_IMAGES_COPY","SSO_SOCIAL_ACCESS_TOKEN_GET","SSO_SOCIAL_AUTH_URL_GET","FB_PAGES_LOAD","FB_ALBUMS_LOAD","FB_PHOTOS_LOAD","FB_ACCESS_TOKEN_VALIDATE","PLAN_FEATURES_GET","SHARED_WIDGETS_FEATURES_GET","HEADER_WIDGET_UPDATE","IG_AUTHORIZED_CHECK","IG_CONNECTED_CHECK","IG_POSTS_LOAD","IG_LISTING_LOAD","EXPERIMENTS_LOAD","PRODUCTS_LOAD","VIMEO_GET_LINK","VENTURE_LOAD","USER_GET","VENTURE_LOGO_UPDATE"]),gg=function(){return Object.keys(hg).reduce((function(e,t){return e[t]={status:mg.NOT_STARTED,error:{}},e}),{})},vg=function(e,t){var n=t.key,r=t.status,a=t.payload,o=void 0===a?{}:a;return e[n]={status:r,error:r===mg.FAIL?o:{}},e},bg=n(63),yg=n.n(bg);function Og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Og(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _g={async:!0,cache:!0,encode:"icase",tokenize:"full",doc:{id:"id",field:["originalFilename","altText","flattenedReferences"]},depth:3,worker:!1},Ig=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.searchApi,r=void 0===n?new yg.a(_g):n;v()(this,e),this._localSearchIndex=r}var t,n,r;return y()(e,[{key:"indexResource",value:(r=id()(ad.a.mark((function e(t){var n,r,a,o,i;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.resource,r=t.resourceName,a=t.resourceIndexFields,o=Array.isArray(n)?n:Object.values(n),i=o.map((function(e){return Eg(Eg({},Object(P.pick)(e,a)),{},{resourceName:r})})),e.prev=3,e.next=6,this._localSearchIndex.add(i);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),this._localSearchIndex=new yg.a(_g),e.next=13,this._localSearchIndex.add(i);case 13:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return r.apply(this,arguments)})},{key:"search",value:(n=id()(ad.a.mark((function e(t){var n,r;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.next=3,this._localSearchIndex.search(n);case 3:return r=e.sent,e.abrupt("return",r.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resourceName,r=t.id;return r?(Object.prototype.hasOwnProperty.call(e,n)?e[n].add(r):e[n]=new Set([r]),e):e}),{}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"remove",value:(t=id()(ad.a.mark((function e(t){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._localSearchIndex.remove(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Sg=n(104);function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k()(e);if(t){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w()(this,n)}}var Cg=function(e){I()(n,e);var t=kg(n);function n(e){var r,a=e.message,o=Io()(e,["message"]);return v()(this,n),r=t.call(this,a),Object.assign(E()(r),Tg({name:"ApiError"},o)),r}return n}(n.n(Sg)()(Error)),xg=function(e){throw e.response?new Cg(Tg({source:"server",message:e.message},e.response)):e.request?new Cg({source:"client",message:"Network Error"}):new Cg({source:"unknown",message:"Unknown Error"})};function Ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pg=function(e){var t=e.method,n=void 0===t?"GET":t,r=e.headers,a=void 0===r?{}:r,o=Dg(Dg({},Io()(e,["method","headers"])),{},{method:n,headers:a,withCredentials:!0});return yt()(o).catch(xg)};function jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lg=function(e){var t=e.headers,n=void 0===t?{}:t,r=Io()(e,["headers"]),a=Fu();return a&&(n["BB-IM-Live-Version"]=a),Pg(Mg(Mg({},r),{},{headers:n}))};function Rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ng(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rg(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ug=function(e){var t=e.rootDomain,n=e.assetByContainerVersion,r=e.containerId,a=e.queryParams,o=void 0===a?{}:a;return el(t)+"".concat(n,"/asset/").concat(r)+(Object(P.isEmpty)(o)?"":"?"+Object(P.map)(o,(function(e,t){return"".concat(t,"=").concat(e)})).join("&"))},Fg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetByContainerVersion,n=void 0===t?"v1":t,r=e.assetContainerId;return{load:{key:hg.IMAGES_LOAD,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.folders,i=void 0===o?"/":o,s=e.includeDeleted,c=void 0!==s&&s,l=e.lastSyncedAt,u=Ng({folders:i,includeDeleted:c},r?{assetContainerId:r}:{});return isNaN(l)?u.includeDeleted=!1:u.lastSyncedAt=l,Lg({url:Ug({rootDomain:t,containerId:a,assetByContainerVersion:n}),params:u})}},upload:{key:hg.IMAGE_UPLOAD,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.data,i=e.numberOfImages,s=e.totalFileSize,c=e.appName,l=e.basePath,u=e.width,d=e.height,p=e.opts,f=void 0===p?{}:p,m=Ng({numberOfImages:i,totalFileSize:s,basePath:l,width:u,height:d},r?{assetContainerId:r}:{});return"ols"===c&&(m.source=c),Lg(Ng(Ng({},f),{},{method:"POST",url:Ug({rootDomain:t,containerId:a,assetByContainerVersion:n}),data:o,params:m}))}},delete:{key:hg.IMAGES_DELETE,makeRequest:function(e){var t=e.rootDomain,r=e.containerId,a=e.extractedAssetContainerId,o=e.images,i=e.appName,s=e.opts;return Lg(Ng(Ng({},void 0===s?{}:s),{},{method:"DELETE",url:Ug({rootDomain:t,containerId:r,assetByContainerVersion:n}),data:o,params:{appName:i,fileCount:o.length,assetContainerId:a}}))}},update:{key:hg.IMAGES_UPDATE,makeRequest:function(e){var t=e.rootDomain,a=e.assetId,o=e.containerId,i=e.update,s="v1"===n?"".concat(el(t),"v1/websites/").concat(o,"/assets/").concat(a):"".concat(el(t),"v2/venture/").concat(o,"/asset/").concat(a);return Lg(Ng({method:"PATCH",url:s,data:i},r?{params:{assetContainerId:r}}:{}))}},copy:{key:hg.SITE_IMAGES_COPY,makeRequest:function(e){var t=e.rootDomain,a=e.containerId,o=e.images,i=e.type,s=o.map((function(e){var t=e.url,n=e.eTag,r=e.originalFilename;return{url:t,eTag:n,filename:e.filename,size:e.size,width:e.width,height:e.height,originalFilename:r||""}})),c="".concat(el(t)).concat(n,"/asset/").concat(a,"/import");return Lg({url:c,method:"POST",params:Ng({basePath:"/",type:i},r?{assetContainerId:r}:{}),data:s})}}}},Vg=function(e,t){return{keywords:e,limit:t}};function Bg(e){return e=ol(e),"https://categories.api.".concat(e,"/v4/photos/combinedsearch")}var Gg={load:{key:hg.STOCK_IMAGES_LOAD,makeRequest:function(e){var t=e.market,n=e.businessCategory,r=e.rootDomain,a=e.pageSize;return Pg({url:Bg(r),params:{market:t,category:n,limit:a}})}},search:{key:hg.STOCK_IMAGES_SEARCH,makeRequest:function(e){var t=e.market,n=e.rootDomain,r=e.query,a=e.pageSize,o=Vg(r,a);return o.market=t,Pg({url:Bg(n),params:o})}},nextPage:{key:hg.STOCK_IMAGES_NEXTPAGE,makeRequest:function(e){return Pg({url:e})}}};function zg(e){return e=ol(e),"https://categories.api.".concat(e,"/v4")}function Hg(e){return"".concat(zg(e),"/videos/collections/widgets_stock_videos")}function Kg(e,t,n){return"".concat(zg(n),"/categories/").concat(e,"/latest/").concat(t,"/videos")}function Wg(e){return"".concat(zg(e),"/videos/elasticsearch")}var qg={load:{key:hg.STOCK_VIDEOS_LOAD,makeRequest:function(e){var t=e.market,n=e.businessCategory,r=e.rootDomain,a=e.fixedResults;return Pg({url:void 0!==a&&a?Hg(r):Kg(t,n,r)})}},search:{key:hg.STOCK_VIDEOS_SEARCH,makeRequest:function(e){var t=e.market,n=e.rootDomain,r=e.query,a=e.pageSize,o=Vg(r,a);return o.language=t&&t.split("-")[0]||"en",Pg({url:Wg(n),params:o})}}};function Yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xg=hg.WEBSITES_LOAD,Qg=hg.VENTURES_LOAD,$g=hg.VENTURE_IMAGES_LOAD,Zg=hg.GC_SITE_IMAGES_LOAD,Jg=hg.V7_SITE_IMAGES_LOAD,ev=hg.V7_WEBSITES_LOAD,tv=function(e){var t=e.rootDomain,n=e.route;return el(t)+n},nv={loadSites:{key:Xg,makeRequest:function(e){var t=e.rootDomain;return Lg({url:tv({rootDomain:t,route:"v1/website"})})}},loadVentures:{key:Qg,makeRequest:function(e){var t=e.rootDomain,n=e.customerId;return Lg(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yg(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:tv({rootDomain:t,route:"v2/ventures"})},n?{params:{customerId:n}}:{}))}},loadV7Sites:{key:ev,makeRequest:function(e){var t=e.rootDomain;return Lg({url:tv({rootDomain:t,route:"v1/website"}),params:{type:Ae}})}},loadVentureImages:{key:$g,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return Lg({url:tv({rootDomain:t,route:"v2/asset/".concat(n)}),params:{folders:[mt,ht,gt].join("|")}})}},loadGCSiteImages:{key:Zg,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return Lg({url:tv({rootDomain:t,route:"v1/asset/".concat(n)}),params:{folders:[mt,ht,gt].join("|")}})}},loadV7SiteImages:{key:Jg,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return Lg({url:tv({rootDomain:t,route:"v2/sources/v7/".concat(n,"/assets")})})}}};function rv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ov=function(e){var t=e.params,n=void 0===t?{}:t,r=Io()(e,["params"]);return ui()&&(n.timestamp=(new Date).getTime()),Pg(av(av({},r),{},{params:n}))},iv=hg.SSO_SOCIAL_ACCESS_TOKEN_GET,sv=hg.SSO_SOCIAL_AUTH_URL_GET,cv=JSON.stringify(["manage_pages","publish_pages","public_profile","read_insights","pages_read_engagement"]),lv={getSocialAccessToken:{key:iv,makeRequest:function(e){var t=e.rootDomain,n=e.socialProvider;return ov({url:"".concat(tl(t),"/api/idp/my/social_connections/").concat(n,"/access_token")})}},getSocialAuthUrl:{key:sv,makeRequest:function(e){var t=e.rootDomain,n=e.socialProvider,r={app:e.app,path:e.appSocialMediaAuthPath,scope:cv},a=Object(P.get)(window,"location.href","").match(/:(\d+)/),o=a&&a[1];return o&&(r.port=o),ov({url:"".concat(tl(t),"/api/idp/my/social_connections/").concat(n,"/authorization_url"),params:r})}}},uv=hg.FB_PAGES_LOAD,dv=hg.FB_ALBUMS_LOAD,pv=hg.FB_PHOTOS_LOAD,fv=hg.FB_ACCESS_TOKEN_VALIDATE,mv=hg.IG_AUTHORIZED_CHECK,hv={validateFBAccessToken:{key:fv,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken;return ov({url:"".concat(rl(t),"/v1/fb/validate_token"),params:{access_token:n}})}},loadFBPages:{key:uv,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken;return Pg({url:"".concat(rl(t),"/v2/fb/pages"),params:{access_token:n}})}},loadFBAlbums:{key:dv,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken,r=e.pageId,a=e.pageSize,o=e.after;return Pg({url:"".concat(rl(t),"/v2/fb/pages/").concat(r,"/albums"),params:{access_token:n,fields:"id,name,picture,count",limit:a,after:o}})}},loadFBPhotos:{key:pv,makeRequest:function(e){var t=e.rootDomain,n=e.accessToken,r=e.albumId,a=e.pageSize,o=e.after;return Pg({url:"".concat(rl(t),"/v2/fb/albums/").concat(r,"/photos"),params:{access_token:n,limit:a,after:o}})}},checkIGConnected:{key:hg.IG_CONNECTED_CHECK,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Pg({url:"".concat(al(t),"/v1/provider/instagram/method/canGetConnection"),data:{accountId:n},method:"POST"})}},checkIGAuthorized:{key:mv,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Pg({url:"".concat(al(t),"/v1/provider/instagram/method/isAuthorized"),data:{accountId:n,payload:{methods:["connect","getPosts"]}},method:"POST"})}},loadIGPosts:{key:hg.IG_POSTS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.accountId,r=e.nextPostsPageUrl,a={accountId:n,payload:{}};return r&&(a.payload.next=r),Pg({url:"".concat(al(t),"/v1/provider/instagram/method/getPosts"),data:a,method:"POST"})}},loadIGListing:{key:hg.IG_LISTING_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Pg({url:"".concat(al(t),"/v1/provider/instagram/method/getListing"),data:{accountId:n},method:"POST"})}}};function gv(e){return(gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bv(e,t){return!t||"object"!==gv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yv(e){var t="function"==typeof Map?new Map:void 0;return(yv=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ov(e,arguments,Iv(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_v(r,e)})(e)}function Ov(e,t,n){return(Ov=Ev()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&_v(a,n.prototype),a}).apply(null,arguments)}function Ev(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _v(e,t){return(_v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iv(e){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_v(e,t)}(r,e);var t,n=(t=r,function(){var e,n=Iv(t);if(Ev()){var r=Iv(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return bv(this,e)});function r(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(vv(this,r),(t=n.call(this,e)).originalRequest=o,t.originalResponse=i,t.causingError=a,null!=a&&(e+=", caused by ".concat(a.toString())),null!=o){var s=o.getHeader("X-Request-ID")||"n/a",c=o.getMethod(),l=o.getURL(),u=i?i.getStatus():"n/a",d=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(l,", response code: ").concat(u,", response text: ").concat(d,", request id: ").concat(s,")")}return t.message=e,t}return r}(yv(Error));var wv=n(105),Tv=n(106),kv=n.n(Tv),Cv=!1;function xv(e){Cv&&console.log(e)}function Av(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Av(Object(n),!0).forEach((function(t){Pv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Av(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Mv={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},Lv=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,r=[{key:"terminate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if("function"==typeof n||"function"==typeof r)throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");var a=Uv("DELETE",t,n),o=a.send();return o.then((function(e){if(204!==e.getStatus())throw new Sv("tus: unexpected response while terminating upload",null,a,e)})).catch((function(r){if(r instanceof Sv||(r=new Sv("tus: failed to terminate upload",r,a,null)),!Fv(r,0,n))throw r;var o=n.retryDelays[0],i=n.retryDelays.slice(1),s=Dv({},n,{retryDelays:i});return new Promise((function(e){return setTimeout(e,o)})).then((function(){return e.terminate(t,s)}))}))}}],(n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var n=this.options.retryDelays;null==n||"[object Array]"===Object.prototype.toString.call(n)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(n){return xv(null==n?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(n)),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,n=this._size=this._source.size,r=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,o=function(e,t,n){for(var r=Math.floor(e/t),a=[],o=0;o<t;o++)a.push({start:r*o,end:r*(o+1)});return a[t-1].end=e,n&&a.forEach((function(e,t){e.uploadUrl=n[t]||null})),a}(this._source.size,a,this._parallelUploadUrls);this._parallelUploadUrls=new Array(o.length);var i,s=o.map((function(a,i){var s=0;return t._source.slice(a.start,a.end).then((function(c){var l=c.value;return new Promise((function(c,u){var d=Dv({},t.options,{uploadUrl:a.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:Dv({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:c,onError:u,onProgress:function(e){r=r-s+e,s=e,t._emitProgress(r,n)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[i]=p.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===o.length&&t._saveUploadInUrlStorage()}}),p=new e(l,d);p.start(),t._parallelUploads.push(p)}))}))}));Promise.all(s).then((function(){(i=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=Rv(t.options.metadata);return""!==e&&i.setHeader("Upload-Metadata",e),t._sendRequest(i,null)})).then((function(e){if(Nv(e.getStatus(),200)){var n=e.getHeader("Location");null!=n?(t.url=Vv(t.options.endpoint,n),xv("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(i,e,"tus: invalid or missing Location header")}else t._emitHttpError(i,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?(xv("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(xv("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):(xv("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t,n){var r=this;if("function"==typeof n)throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new Sv(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),Fv(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=Rv(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(Nv(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=Vv(e.options.endpoint,r),xv("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!Nv(r,200))return Nv(r,400)&&e._removeFromUrlStorage(),423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var a=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(a))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=parseInt(n.getHeader("Upload-Length"),10);if(!isNaN(o)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),a===o)return e._emitProgress(o,o),void e._emitSuccess();e._offset=a,e._performUpload()}else e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){Nv(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset "+t._offset,n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,a=n.done;return t.options.uploadLengthDeferred&&a&&(t._size=t._offset+(r&&r.size?r.size:0),e.setHeader("Upload-Length",t._size)),null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=Uv(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"function"==typeof this.options.onBeforeRequest&&this.options.onBeforeRequest(e),e.send(n).then((function(n){return"function"==typeof t.options.onAfterResponse&&t.options.onAfterResponse(e,n),n}))}}])&&jv(t.prototype,n),r&&jv(t,r),e}();function Rv(e){var t=[];for(var n in e)t.push(n+" "+wv.Base64.encode(e[n]));return t.join(",")}function Nv(e,t){return e>=t&&e<t+100}function Uv(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var a=n.headers||{};for(var o in a)r.setHeader(o,a[o]);if(n.addRequestId){var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",i)}return r}function Fv(e,t,n){var r,a=e.originalResponse?e.originalResponse.getStatus():0,o=!Nv(a,400)||409===a||423===a;return null!=n.retryDelays&&t<n.retryDelays.length&&null!=e.originalRequest&&o&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function Vv(e,t){return new kv.a(t,e).toString()}Lv.defaultOptions=Mv;var Bv=Lv;function Gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&Gv(t.prototype,n),r&&Gv(t,r),e}();function Hv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kv=!1;try{Kv="localStorage"in window;localStorage.setItem("tusSupport",localStorage.getItem("tusSupport"))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;Kv=!1}var Wv=Kv,qv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var a=JSON.parse(localStorage.getItem(r));a.urlStorageKey=r,t.push(a)}catch(e){}}return t}}])&&Hv(t.prototype,n),r&&Hv(t,r),e}();function Yv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qv(e,t,n){return t&&Xv(e.prototype,t),n&&Xv(e,n),e}var $v=function(){function e(){Yv(this,e)}return Qv(e,[{key:"createRequest",value:function(e,t){return new Zv(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Zv=function(){function e(t,n){Yv(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Qv(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new Jv(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Jv=function(){function e(t){Yv(this,e),this._xhr=t}return Qv(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),eb=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};var tb=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};function nb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ab(e,t,n){return t&&rb(e.prototype,t),n&&rb(e,n),e}var ob=function(){function e(t){nb(this,e),this._file=t,this.size=t.size}return ab(e,[{key:"slice",value:function(e,t){if(tb())return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}]),e}(),ib=function(){function e(t,n){nb(this,e),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return ab(e,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+sb(this._buffer);if(this._done||r){var a=this._getDataFromBuffer(e,t),o=null==a&&this._done;return Promise.resolve({value:a,done:o})}return this._reader.read().then((function(r){var a=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=a:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,a),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===sb(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function sb(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var cb=function(){function e(){nb(this,e)}return ab(e,[{key:"openFile",value:function(e,t){return eb()&&e&&void 0!==e.uri?(n=e.uri,new Promise((function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(e){t(e)},r.open("GET",n),r.send()}))).then((function(e){return new ob(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e)})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new ob(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new ib(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}]),e}();function lb(e){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ub(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pb(e,t){return(pb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fb(e,t){return!t||"object"!==lb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function hb(e){return(hb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gb(Object(n),!0).forEach((function(t){bb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yb=vb({},Bv.defaultOptions,{httpStack:new $v,fileReader:new cb,urlStorage:Wv?new qv:new zv,fingerprint:function(e,t){return eb()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),Ob=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pb(e,t)}(i,e);var t,n,r,a,o=(t=i,function(){var e,n=hb(t);if(mb()){var r=hb(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return fb(this,e)});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ub(this,i),t=vb({},yb,{},t),o.call(this,e,t)}return n=i,a=[{key:"terminate",value:function(e,t,n){return t=vb({},yb,{},t),Bv.terminate(e,t,n)}}],(r=null)&&db(n.prototype,r),a&&db(n,a),i}(Bv),Eb=window,_b=Eb.XMLHttpRequest,Ib=Eb.Blob;_b&&Ib&&Ib.prototype.slice;function Sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tb=function(e){var t=e.rootDomain;return"".concat(el(t),"v1/video")},kb=function(e){var t=e.rootDomain,n=e.websiteId,r=e.page,a=void 0===r?1:r,o=e.perPage,i=void 0===o?100:o,s=e.search,c={page:a,perPage:i};return s&&s.length>0&&(c.search=s),n&&(c.websiteId=n),Lg({method:"GET",url:Tb({rootDomain:t}),params:c})},Cb={load:{key:hg.VIDEOS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.perPage,a=void 0===r?100:r,o=e.search;return kb({rootDomain:t,websiteId:n,perPage:a,search:o})}},loadMore:{key:hg.VIDEOS_LOAD_MORE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.page,a=e.perPage,o=void 0===a?100:a,i=e.search;return kb({rootDomain:t,websiteId:n,page:r,perPage:o,search:i})}},loadStats:{key:hg.VIDEOS_LOAD_STATS,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.managedUserId;return Lg({method:"GET",url:"".concat(Tb({rootDomain:t}),"/stats"),params:wb({managedUserId:r},n?{websiteId:n}:{})})}},refresh:{key:hg.VIDEO_REFRESH,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return Lg({method:"GET",url:Tb({rootDomain:t}),params:wb({videoId:r},n?{websiteId:n}:{})})}},updatePrivacy:{key:hg.VIDEO_UPDATE_PRIVACY,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return Lg(wb({method:"PATCH",url:"".concat(Tb({rootDomain:t}),"/").concat(r)},n?{params:{websiteId:n}}:{}))}},delete:{key:hg.VIDEO_DELETE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoId;return Lg(wb({method:"DELETE",url:"".concat(Tb({rootDomain:t}),"/").concat(r)},n?{params:{websiteId:n}}:{}))}},getUser:{key:hg.VIDEOS_LOAD_USER,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return Lg(wb({method:"GET",url:Tb({rootDomain:t})+"/user"},n?{params:{websiteId:n}}:{}))}},removeUserConnection:{key:hg.VIDEOS_REMOVE_USER_CONNECTION,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return Lg(wb({method:"DELETE",url:Tb({rootDomain:t})+"/user/accesstoken"},n?{params:{websiteId:n}}:{}))}},getLink:{key:hg.VIMEO_GET_LINK,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.redirectURI,a=e.state,o=e.linkType;return Lg({method:"GET",url:"".concat(Tb({rootDomain:t}),"/link/").concat(o),params:wb({redirectURI:r,state:a},n?{websiteId:n}:{})})}},create:{key:hg.VIDEOS_CREATE_UPLOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.videoFile,a=e.videoDescription,o=void 0===a?null:a;return Lg(wb({method:"POST",url:Tb({rootDomain:t}),data:{videoName:r.name,videoSize:r.size,videoDescription:o}},n?{params:{websiteId:n}}:{}))}},push:{key:hg.VIDEOS_PUSH_UPLOAD,makeRequest:function(e){var t=e.uploadLink,n=e.videoFile,r=e.errorCallback,a=e.progressCallback,o=e.completeCallback;return new Ob(n,{endpoint:"none",uploadUrl:t,uploadSize:n.size,retryDelays:[0,1e3,3e3,5e3],onError:r,onProgress:a,onSuccess:o,headers:{Accept:"application/vnd.vimeo.*+json;version=3.4"}}).start(),Promise.resolve({data:{}})}}},xb={getPlanFeatures:{key:hg.PLAN_FEATURES_GET,makeRequest:function(e){var t=e.rootDomain,n=e.accountId;return Pg({url:"".concat(nl(t),"/accounts/").concat(n,"/features")})}},getSharedWidgets:{key:hg.SHARED_WIDGETS_FEATURES_GET,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId;return Pg({url:"".concat(nl(t),"/websites/").concat(n,"/sharedWidgets")})}},updateHeaderWidget:{key:hg.HEADER_WIDGET_UPDATE,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.data;return Pg({method:"PATCH",url:"".concat(nl(t),"/websites/").concat(n),data:r})}}};function Ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Db(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ab(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pb={load:{key:hg.EXPERIMENTS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.placement;return Lg({url:"".concat(el(t),"v1/experiments"),params:Db({},n&&{placement:n})})}}},jb=function(e){var t=e.rootDomain,n=e.websiteId;return"".concat(function(e){var t=e.rootDomain,n=e.websiteId;return"https://".concat(n,".onlinestore.").concat(Zc(t))}({rootDomain:t,websiteId:n}),"/api/v2/products")},Mb={load:{key:hg.PRODUCTS_LOAD,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.keywords,a=void 0===r?"":r,o=e.market,i=void 0===o?"en":o,s=e.page,c=void 0===s?1:s,l=e.pageSize,u={page:c,per_page:void 0===l?50:l,"q[descend_by_created_at]":e.sortOrder===ft};return a&&Object.assign(u,{"q[keywords]":a,"q[locale]":i}),Pg({url:jb({rootDomain:t,websiteId:n}),params:u})}},fetch:{key:hg.PRODUCTS_FETCH,makeRequest:function(e){var t=e.rootDomain,n=e.websiteId,r=e.id;return Pg({url:"".concat(jb({rootDomain:t,websiteId:n}),"/").concat(r)})}}},Lb=hg.VENTURE_LOAD,Rb=hg.VENTURE_LOGO_UPDATE,Nb=function(e){var t=e.version;return{getVentureById:{key:Lb,makeRequest:function(e){var n=e.rootDomain,r=e.id;return Pg({method:"GET",url:"".concat(el(n)).concat(t,"/venture/").concat(r)})}},updateVentureLogoUrl:{key:Rb,makeRequest:function(e){var t=e.rootDomain,n=e.id,r=e.overwrite,a=e.logoUrl;Pg({method:"PATCH",url:"".concat(el(t),"v2/venture/").concat(n),params:{overwrite:r},data:{logoUrl:a}})}}}},Ub={get:{key:hg.USER_GET,makeRequest:function(e){var t=e.rootDomain,n=e.containerId;return Lg({url:"".concat(el(t),"v2/user/").concat(n,"/")})}}},Fb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.assetByContainerVersion,n=e.assetContainerId;return{Keys:hg,Statuses:mg,images:Fg({assetByContainerVersion:t,assetContainerId:n}),stockImages:Gg,stockVideos:qg,otherSites:nv,sso:lv,social:hv,videos:Cb,vnext:xb,experiments:Pb,products:Mb,venture:Nb({version:t}),user:Ub}};function Vb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vb(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gb=function(){return{rootDomain:"",ventureId:"",websiteId:"",accountId:"",market:"",businessCategory:"",callbacks:{onItemsSelected:null,onModalClose:null,onBackToTopButtonClick:null},featureFlags:{},ffEnabledForPerf:"",showStockVideos:!1,uploads:{},goAppName:"",gdBranded:!0,addSources:[],removeSources:[],placement:"",pageSize:100,photoshootId:"",mediaTypes:[],selectedMediaType:it,urls:{},searchClient:null,searchDebounce:500,renderMode:"",infopaneSettings:{},hivemind:{},timeToHideUploading:6e4,videoStatusRefreshRate:5e3,socialMediaAuthCallbackUrl:"",vimeoHelpLink:"https://godaddy.com",timeToStopRefreshingVideo:36e5,venturePrimaryDomain:""}};function zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zb(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kb=hg.IMAGES_LOAD,Wb=hg.IMAGES_DELETE,qb=hg.SITE_IMAGES_COPY,Yb=hg.IMAGE_UPLOAD,Xb=hg.IMAGES_UPDATE,Qb=Mt.IM_API_STATUS_CHANGE,$b=Mt.IM_IMAGES_STAGE,Zb=Mt.IM_IMAGE_PROGRESS,Jb=Mt.IM_MODAL_HIDE,ey=Mt.IM_SWITCH_TAB,ty=Mt.IM_IMAGES_SORT,ny=Mt.IM_IMAGES_UPLOADED,ry=Mt.IM_IMAGES_DELETED,ay=Mt.IM_IMAGE_METADATA_UPDATED,oy=Mt.IM_IMAGE_SELECTED_METADATA_UPDATED,iy=Mt.IM_OPEN_MODAL,sy=Mt.IM_OPEN_UPLOAD_NOTIFICATION,cy=Mt.IM_CLOSE_UPLOAD_NOTIFICATION,ly=Mt.IM_IMAGES_RESET_RECENT,uy=function(){return{key:"images",uploadProgress:-1,staged:{},uploaded:[],olsImages:[],isSearching:!1,uploadedImagesFetched:!1,isLoadingUploadedImages:!1,recentUploadedImages:[],uploadedOrder:ft,fromLocalStorage:!1,fivSource:null,firstLaunchBeaconSuffix:"",isSavingMetadata:!1,mediaTypes:[it],showSlowUploadNotification:!1,deletedAllUploaded:!1}},dy=function(e){var t=Object.keys(e);return t.reduce((function(t,n){return t+e[n].uploadProgress||0}),0)/t.length},py=function(e,t){var n=e.requestId,r=e.uploadProgress;return t.staged[n]=Hb(Hb({},t.staged[n]),{},{uploadProgress:r}),Hb(Hb({},t),{},{uploadProgress:dy(t.staged)})},fy=function(e,t){var n=Object.keys(e).length,r=t.stagingCount>0?t.hasExistingSelection:t.uploaded.some((function(e){return e.isSelected}));return Hb(Hb({},t),{},{staged:Hb(Hb({},t.staged),e),stagingCount:Object.keys(t.staged).length+n,uploadProgress:1,recentlyStagedCount:n,hasExistingSelection:r})},my=function(e){var t=Object.keys(e);return t.length&&t.every((function(t){return e[t].uploadProgress>=100}))?{staged:{},uploadProgress:-1,showSlowUploadNotification:!1}:{staged:e,uploadProgress:dy(e)}},hy=function(e){return e.updatedAt||e.lastModified},gy=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.requestId,o=t.uploadedOrder,i=Object(P.toArray)(e),s=o===ft?i.concat(t.uploaded):t.uploaded.concat(i);n=Ss(i[0])?o===ft?i.concat(t.olsImages):t.olsImages.concat(i):t.olsImages;var c=t.stagingCount-1,l=a?Hb(Hb({},t.staged),{},h()({},a,Hb(Hb({},t.staged[a]),{},{uploadProgress:100}))):t.staged,u=my(l);return Hb(Hb(Hb({},t),u),{},{uploaded:s,olsImages:n,stagingCount:c,recentUploadedImages:e})},vy=function(e,t){var n=e.deletedDocumentNames,r=Object(P.filter)(t.uploaded,(function(e){return!Object(P.includes)(n,e.filename)})),a=Object(P.filter)(t.olsImages,(function(e){return!Object(P.includes)(n,e.filename)})),o=0===r.length;return Hb(Hb({},t),{},{uploaded:r,olsImages:a,deletedAllUploaded:o})},by=function(e,t,n){var r,a=e.image,o=e.metadata,i=t.olsImages,c=t.uploaded,l="ols"===a.basePath?[i,"olsImages"]:[c,"uploaded"],u=s()(l,2),d=u[0],p=u[1],f=d.findIndex((function(e){return e.imageUrl===a.imageUrl}));return d[f]=Object(P.merge)(d[f],o),Hb(Hb({},t),{},(r={},h()(r,p,gs()(d)),h()(r,"isSavingMetadata",n),r))},yy=function(e,t){var n=e.key,r=e.status,a=e.payload;if(r===mg.SUCCESS)switch(n){case Kb:return function(e,t){var n=Array.isArray(t)?t:t.images,r=e.mediaTypes;Object(P.isEmpty)(n)||(n=Object(P.filter)(n,(function(e){return r.includes(e.mediaType)})));var a=t.deleteList,o=t.upsertList,i=t.fromLocalStorage,s=t.firstLaunchBeaconSuffix;if(i&&n&&Object(P.isEmpty)(n))return e;if(a&&o){if(!Object(P.isEmpty)(e.uploaded)&&Object(P.isEmpty)(a)&&Object(P.isEmpty)(o))return Hb(Hb({},e),{},{isLoadingUploadedImages:!1});var c=Object(P.keyBy)([].concat(gs()(e.uploaded),gs()(e.olsImages)),(function(e){return e.id}));a.forEach((function(e){Object.prototype.hasOwnProperty.call(c,e)&&delete c[e]})),o.forEach((function(e){var t=hd(e);r.includes(t.mediaType)&&(c[e.id]=t)})),n=Object(P.values)(c)}var l=ws(Cs(n,e.uploadedOrder,hy));return Hb(Hb({},e),{},{uploaded:l.gcImages,uploadedImagesFetched:!0,isLoadingUploadedImages:!1,olsImages:l.olsImages,fromLocalStorage:i,firstLaunchBeaconSuffix:s})}(t,a);case Wb:return vy(a,t);case Xb:return Hb(Hb({},t),{},{isSavingMetadata:!1});case qb:return Hb(Hb({},t),{},{uploaded:Object(P.toArray)(a).concat(t.uploaded)})}if(r===mg.STARTED)switch(n){case Kb:return Hb(Hb({},t),{},{isLoadingUploadedImages:!0})}if(r===mg.FAIL&&n===Yb){var o=t.staged,i=my(o);return Hb(Hb({},t),i)}return t};function Oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oy(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _y=function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs;if(r===mg.SUCCESS)switch(n){case hg.STOCK_IMAGES_LOAD:var i=sd.getStockImagesCacheKey({market:o[0].market,businessCategory:o[0].businessCategory}),s=Object(P.toArray)(a.result);return Ey(Ey({},t),{},{categoryStockImages:Ey(Ey({},t.categoryStockImages),{},h()({},i,s))});case hg.STOCK_VIDEOS_LOAD:var c=sd.getStockVideosCacheKey({market:o[0].market,businessCategory:o[0].businessCategory}),l=Object(P.toArray)(a.result);return Ey(Ey({},t),{},{categoryStockVideos:Ey(Ey({},t.categoryStockVideos),{},h()({},c,l))})}return t},Iy={IM_TRACK_OPEN_MODAL:{mixpanel:["image library open"],traffic2:["modal_open","impression"]},IM_TRACK_VIDEO_SELECTOR_OPEN:{mixpanel:["media manager video selector open"],traffic2:["video_selector_modal_open","impression"]},IM_TRACK_CLOSE_MODAL:{mixpanel:["image library close"],traffic2:["modal_close","impression"]},IM_TRACK_THUMBNAIL_CLICK:{mixpanel:["image library thumbnail click"],traffic2:["thumbnail","click"]},IM_TRACK_INSERT_BUTTON_CLICK:{mixpanel:["image library insert button click"],traffic2:["insert_button","click"]},IM_TRACK_DELETE_BUTTON_CLICK:{mixpanel:["image library delete button click"],traffic2:["delete_button","click"]},IM_TRACK_UPLOAD_BUTTON_CLICK:{mixpanel:["image library upload button click"],traffic2:["upload_button","click"]},IM_TRACK_DRAG_AND_DROP:{mixpanel:["image library drag and drop"],traffic2:["drag_and_drop_area","impression"]},IM_TRACK_BROWSE_STOCK_BUTTON_CLICK:{mixpanel:["image library browse stock button click"],traffic2:["browse_stock_media_button","click"]},IM_TRACK_CANCEL_BUTTON_CLICK:{mixpanel:["image library cancel button click"],traffic2:["cancel_button","click"]},IM_TRACK_STOCK_IMAGE_SEARCH_BUTTON_CLICK:{mixpanel:["image library stock image search button click"],traffic2:["stock_image_search_button","click"]},IM_TRACK_STOCK_VIDEO_SEARCH_BUTTON_CLICK:{mixpanel:["image library stock video search button click"],traffic2:["stock_video_search_button","click"]},IM_TRACK_INDEX_COLLECTION_CLICK:{mixpanel:["image library back to all media breadcrumb click"],traffic2:["back_to_all_media_breadcrumb","click"]},IM_TRACK_MY_UPLOADS_COLLECTION_CLICK:{mixpanel:["image library most recent collection click"],traffic2:["most_recent_collection","click"]},IM_TRACK_STOCK_MEDIA_COLLECTION_CLICK:{mixpanel:["image library stock media collection click"],traffic2:["stock_media_collection","click"]},IM_TRACK_MY_SITES_COLLECTION_CLICK:{mixpanel:["image library my sites collection click"],traffic2:["my_sites_collection","click"]},IM_TRACK_FACEBOOK_COLLECTION_CLICK:{mixpanel:["image library facebook collection click"],traffic2:["facebook_collection","click"]},IM_TRACK_INSTAGRAM_COLLECTION_CLICK:{mixpanel:["image library instagram collection click"],traffic2:["instagram_collection","click"]},IM_TRACK_OLS_UPLOADS_COLLECTION_CLICK:{mixpanel:["image library ols uploads collection click"],traffic2:["ols_collection","click"]},IM_TRACK_LOGO_UPLOADS_COLLECTION_CLICK:{mixpanel:["image library logo uploads collection click"],traffic2:["logo_collection","click"]},IM_TRACK_WSC_UPLOADS_COLLECTION_CLICK:{mixpanel:["image library wsc uploads collection click"],traffic2:["wsc_collection","click"]},IM_TRACK_COVER_UPLOADS_COLLECTION_CLICK:{mixpanel:["image library cover uploads collection click"],traffic2:["cover_uploads_collection","click"]},IM_TRACK_PHOTOSHOOT_COLLECTION_CLICK:{mixpanel:["image library photoshoot collection click"],traffic2:["photoshoot_collection","click"]},IM_TRACK_VIEW_MOST_RECENT_GALLERY_CLICK:{mixpanel:["image library most recent gallery drilldown click"],traffic2:["most_recent_gallery_drilldown","click"]},IM_TRACK_FULL_VIEW_OPEN:{mixpanel:["image library full view open"],traffic2:["full_view_open","impression"]},IM_TRACK_FULL_VIEW_CLOSE:{mixpanel:["image library full view close"],traffic2:["full_view_close","impression"]},IM_TRACK_FULL_VIEW_INSERT_BUTTON_CLICK:{mixpanel:["image library full view insert button click"],traffic2:["full_view_insert_button","click"]},IM_TRACK_FULL_VIEW_DELETE_BUTTON_CLICK:{mixpanel:["image library full view delete button click"],traffic2:["full_view_delete_button","click"]},IM_TRACK_WARNING_DISPLAYED_SMALL_IMAGE:{mixpanel:["image library warning displayed small image"],traffic2:["warning_displayed_small_image","impression"]},IM_TRACK_FACEBOOK_CONNECT_CLICK:{mixpanel:["image library Facebook connect button click"],traffic2:["facebook_connect_button","click"]},IM_TRACK_FACEBOOK_AUTH_COMPLETE:{mixpanel:["image library Facebook auth complete"],traffic2:["facebook_auth_complete","impression"]},IM_TRACK_FACEBOOK_HELP_BUBBLE_CLICK:{mixpanel:["image library Facebook help bubble clicked"],traffic2:["facebook_help_bubble","click"]},IM_TRACK_INSTAGRAM_CONNECT_CLICK:{mixpanel:["image library Instagram left rail connect button click"],traffic2:["instagram_connect_button","click"]},IM_TRACK_INSTAGRAM_DASHBOARD_LINK_CLICK:{mixpanel:["image library Instagram dashboard connect link click"],traffic2:["instagram_dashboard_connect_link","click"]},IM_TRACK_INSTAGRAM_PAGE_CLICK:{mixpanel:["image library Instagram page click"],traffic2:["instagram_page","impression"]},IM_TRACK_UPLOADED_SORT:{mixpanel:["image library date uploaded sort"],traffic2:["by_date_uploaded_sort","click"]},IM_TRACK_DOWNLOAD_BUTTON_CLICK:{mixpanel:["image library download"],traffic2:["download_button","click"]},IM_TRACK_PHOTO_DETAILS_OPEN:{mixpanel:["image library photo details open"],traffic2:["photo_details_open","impression"]},IM_TRACK_UPLOADED_IMAGES_SEARCH:{mixpanel:["image library my uploads tab search"],traffic2:["my_uploads_search","click"]},IM_TRACK_SEARCH:{mixpanel:["image library search"],traffic2:["search","click"]},IM_TRACK_FULL_IMAGE_VIEW_UPDATE_HEADER:{mixpanel:["image library FIV update header click"],traffic2:["fiv_update_header_button","click"]},IM_TRACK_FULL_IMAGE_VIEW_EDIT_CLICK:{mixpanel:["image library FIV popup edit website CTA click"],traffic2:["fiv_edit_website_cta","click"]},IM_TRACK_FULL_IMAGE_VIEW_ALT_TEXT_CHANGE:{mixpanel:["image library FIV alt text change"]},IM_TRACK_VIMEO_UPLOAD_LIMIT_MODAL_IMPRESSION:{mixpanel:["media manager vimeo upload exceeds limit modal impression"]},IM_TRACK_VIMEO_UPGRADE_CTA_CLICK:{mixpanel:["media manager vimeo upgrade account cta button click"]},IM_TRACK_VIMEO_CONNECT_UPGRADE_CTA_CLICK:{mixpanel:["media manager vimeo connect and upgrade account cta button click"]},IM_TRACK_VIMEO_CONNECT_CTA_CLICK:{mixpanel:["media manager vimeo connect account cta button click"]},IM_TRACK_VIMEO_BANNER_CLICK:{mixpanel:["media manager vimeo banner click"]},IM_TRACK_VIMEO_EDIT_CTA_LINK_CLICK:{mixpanel:["media manager vimeo edit cta click in FIV"]},IM_TRACK_VIMEO_EDIT_CTA_ICON_CLICK:{mixpanel:["media manager vimeo edit cta click from a thumbnail"]},IM_TRACK_VIMEO_SHADOW_FIRST_UPLOAD:{traffic2:["shadow_first_upload","impression"]},IM_TRACK_OVER_EDIT_CTA_CLICK:{mixpanel:["media manager over edit cta click"],traffic2:["over_edit_cta","click"]},IM_TRACK_OVER_THUMBNAIL_EDIT_CTA_CLICK:{mixpanel:["media manager over edit thumbnail cta click"],traffic2:["over_edit_thumbnail_cta","click"]},IM_TRACK_STUDIO_CREATE_CTA_CLICK:{mixpanel:["media manager studio image creation cta click"],traffic2:["studio_create_cta","click"]},IM_TRACK_SEARCH_NO_RESULTS:{mixpanel:["media manager search no results found"]},IM_TRACK_SEARCH_RESULTS_FOUND:{mixpanel:["media manager search results found"]},IM_TRACK_SLOW_UPLOAD_NOTIFICATION_OPEN:{mixpanel:["media manager upload taking too long notification open"]},IM_TRACK_MISSING_VIDEO_THUMBNAIL:{mixpanel:["media manager transcoded video missing thumbnail"]},IM_TRACK_VIMEO_CREATE_CTA_CLICK:{mixpanel:["media manager video create cta click"],traffic2:["video_create","click"]},IM_TRACK_VIMEO_OFF_SITE_REDIRECT:{mixpanel:["media manager vimeo create offsite redirect"]},IM_TRACK_VIMEO_OFF_SITE_REDIRECT_COMPLETE:{mixpanel:["media manager vimeo offsite redirect complete"]},IM_TRACK_OVER_CANVAS_CLOSE:{mixpanel:["media manager over canvas close"],traffic2:["studio_canvas_close","impression"]},IM_TRACK_OVER_CANVAS_COMPLETE:{mixpanel:["media manager over canvas complete"],traffic2:["studio_canvas_complete","impression"]},IM_TRACK_STUDIO_LOGO_CREATE_COMPLETE:{mixpanel:["media manager studio logo create complete"],traffic2:["studio_logo_create_complete","impression"]},IM_UPLOAD_COMPLETE:{mixpanel:["image library upload complete"],traffic2:["upload_complete","impression"]},IM_TRACK_LOGO_UPLOAD_COMPLETE:{mixpanel:["image library logo upload complete"],traffic2:["logo_upload_complete","impression"]},IM_TRACK_VIDEO_START:{mixpanel:["media manager video context start"]},IM_TRACK_LOGO_CREATE_CLICK:{mixpanel:["image library logo create click"],traffic2:["logo_create","click"]},IM_TRACK_VIDEO_SELECTOR_SAVE_URL:{mixpanel:["media manager video selector modal submit video url from link form"],traffic2:["video_selector_save_url","click"]},IM_TRACK_VIDEO_SELECTOR_OPEN_MEDIA_LIBRARY:{mixpanel:["media manager video selector modal click on CTA to add/create video"],traffic2:["video_selector_cta","click"]},IM_TRACK_BG_PROMO_DISPLAY:{mixpanel:["media manager bg removal promo display"]},IM_TRACK_INCORRECT_FILE_UPLOADED:{mixpanel:["media manager incorrect file uploaded"],traffic2:["incorrect_file_uploaded","impression"]},IM_TRACK_POST_LOGO_WAM_CLICK:{mixpanel:["image library post logo WAM CTA click"],traffic2:["post_logo_wam_cta","click"]}},Sy=Object.keys(Iy).reduce((function(e,t){var n=Iy[t];if(n.traffic2){var r=n.traffic2[1];n.traffic2=["".concat("pandc.brandbook.media_library",".").concat(n.traffic2.join(".")),r]}return Object.assign(e,h()({},t,n))}),{}),wy=hg.SHARED_WIDGETS_FEATURES_GET,Ty=mg.SUCCESS,ky=Mt.IM_API_STATUS_CHANGE,Cy=Mt.IM_OPEN_MODAL,xy=Mt.IM_OPEN_VIDEO_SELECTOR_MODAL,Ay=Bi()?"mobile":"desktop",Dy=function(){return{tracker:null,appName:"",appSocialMediaAuthPath:"/socialMediaAuth",placement:"",appNameSubdomainMappings:{website:"websites",blog:"blogging",dashboard:"dashboard",ola:"ola",ols:"onlinestore"},headerWidget:{},device:Ay}},Py=function(e,t){t.tracker&&!e.tracker&&(t.tracker.updateEventMap(Sy),t.tracker.trackEvent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=Object(P.merge)({appName:t.appName,Application:t.appName,placement:t.placement,selectedMediaType:t.selectedMediaType,device:Ay},n);t.tracker.track(e,r)}})},jy=function(e,t){var n=e.key,r=e.status,a=e.payload;if(r!==Ty)return t;switch(n){case wy:var o=a.find((function(e){return"HEADER"===e.type}));return Object(P.merge)({},t,{headerWidget:o});default:return t}};function My(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ly(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?My(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ry(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ny(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uy=hg.VENTURE_LOAD,Fy=hg.GC_SITE_IMAGES_LOAD,Vy=hg.WEBSITES_LOAD,By=hg.VENTURES_LOAD,Gy=hg.V7_WEBSITES_LOAD,zy=hg.VENTURE_IMAGES_LOAD,Hy=hg.V7_SITE_IMAGES_LOAD,Ky=hg.SITE_IMAGES_COPY,Wy=Mt.IM_API_STATUS_CHANGE,qy=Mt.IM_SITE_IMAGES_LOAD,Yy=Mt.IM_IMAGES_COPY,Xy=Mt.IM_INSERT_ITEMS,Qy=Mt.IM_CONTAINER_MANIFEST_POPULATE,$y=Mt.IM_VIEWABLE_SITES_NEXTPAGE,Zy=Mt.IM_OPEN_MODAL,Jy=mg.SUCCESS,eO=mg.FAIL,tO=mg.STARTED,nO=function(){return{key:"otherSites",websites:[],websitesLoaded:!1,selectedWebsiteId:null,isLoadingImages:!1,isCopyingImages:!1,hasPhotoshoot:!1,hasOthersites:!1,currentMaxWebsiteViewableIndex:99,mediaTypes:[it],currentVentureId:null}};function rO(e,t){var n=e.domainName&&e.domainName.toUpperCase(),r=t.domainName&&t.domainName.toUpperCase();return n<r?-1:n>r?1:0}var aO=["name"];var oO=function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs;if(r===eO)return function(e,t){var n=e.key,r=e.requestArgs;switch(n){case Ky:return Ly(Ly({},t),{},{isCopyingImages:!1});case Fy:case zy:var a=r[0].containerId,o=t.websites.map((function(e){return e.id!==a?e:Ly(Ly({},e),{},{imagesLoaded:!0,images:[]})}));return Ly(Ly({},t),{},{websites:o,isLoadingImages:!1});default:return t}}({key:n,requestArgs:o},t);if(n===zy||n===Fy||n===Hy)return function(e,t){var n=e.status,r=e.payload,a=e.requestArgs;if(n===tO)return Ly(Ly({},t),{},{isLoadingImages:!0});if(n===Jy){var o=t.selectedWebsiteId,i=a[0].containerId,s=t.mediaTypes,c=t.websites.map((function(e){if(e.id!==i)return e;Be.includes(e.type)&&(o=e.id);var t=Object(P.isEmpty)(s)?r:r.filter((function(e){return s.includes(e.mediaType)}));return Ly(Ly({},e),{},{imagesLoaded:!0,images:t})}));return Ly(Ly({},t),{},{websites:c,selectedWebsiteId:o,isLoadingImages:!1})}return Ly(Ly({},t),{},{isLoadingImages:!1})}({status:r,payload:a,requestArgs:o},t);if(r!==Jy)return t;switch(n){case Uy:return Ly(Ly({},t),{},{currentVentureId:a.id});case Vy:var i=a.filter((function(e){return e.id!==o[0].containerId})).sort(rO),c=-1!==i.findIndex((function(e){return Be.includes(e.type)})),l=-1!==i.findIndex((function(e){return"photoshoot"===e.type}));return Ly(Ly({},t),{},{websites:i,websitesLoaded:!0,hasPhotoshoot:l,hasOthersites:c});case By:var u=a.ventures&&a.ventures.filter((function(e){return e.id!==t.currentVentureId})).map((function(e){return Ly(Ly({},e),{},{type:"venture"})}));if(u){var d=function(e,t){var n,r=new Map(e.map((function(e){return[e.id,e]}))),a=new Map(t.map((function(e){return[e.id,e]}))),o=[],i=new Map,c=e.filter((function(e){return!a.has(e.id)})).map((function(e){return e.id})),l=Ry(a);try{var u=function(){var e=s()(n.value,2),t=e[0],a=e[1];r.has(t)?aO.forEach((function(e){a[e]!==r.get(t)[e]&&i.set(t,Ly(h()({},e,a[e]),i.get(t)))})):o.push(a)};for(l.s();!(n=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}return{venturesToAdd:o,venturesToUpdate:i,ventureIdsToRemove:c}}(t.websites.filter((function(e){return"venture"===e.type})),u),p=d.venturesToAdd,f=d.venturesToUpdate,m=d.ventureIdsToRemove;if(Object(P.isEmpty)(p)&&Object(P.isEmpty)(f)&&Object(P.isEmpty)(m))return Ly(Ly({},t),{},{websitesLoaded:!0,hasOthersites:!Object(P.isEmpty)(t.websites)});var g,v=t.websites.filter((function(e){return!m.includes(e.id)})),b=Ry(f);try{var y=function(){for(var e=s()(g.value,2),t=e[0],n=e[1],r=v.find((function(e){return e.id===t})),a=0,o=Object.entries(n);a<o.length;a++){var i=s()(o[a],2),c=i[0],l=i[1];r[c]=l}};for(b.s();!(g=b.n()).done;)y()}catch(e){b.e(e)}finally{b.f()}return v=[].concat(gs()(v),gs()(p)),Ly(Ly({},t),{},{websites:v,websitesLoaded:!0,hasOthersites:!Object(P.isEmpty)(v)})}return Ly(Ly({},t),{},{websitesLoaded:!0,hasOthersites:!Object(P.isEmpty)(t.websites)});case Gy:return Object(P.isEmpty)(a)?Ly(Ly({},t),{},{websitesLoaded:!0,hasOthersites:!Object(P.isEmpty)(t.websites)}):Ly(Ly({},t),{},{websites:[].concat(gs()(t.websites),gs()(a.sort(rO))),websitesLoaded:!0,hasOthersites:!0});default:return t}};function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cO=hg.FB_PAGES_LOAD,lO=hg.FB_ALBUMS_LOAD,uO=hg.FB_PHOTOS_LOAD,dO=hg.IG_POSTS_LOAD,pO=hg.IG_AUTHORIZED_CHECK,fO=hg.IG_CONNECTED_CHECK,mO=hg.IG_LISTING_LOAD,hO=hg.SSO_SOCIAL_ACCESS_TOKEN_GET,gO=mg.SUCCESS,vO=mg.STARTED,bO=Mt.IM_SOCIAL_AUTH_URL_POPULATE,yO=Mt.IM_SOCIAL_ACCESS_TOKEN_POPULATE,OO=Mt.IM_API_STATUS_CHANGE,EO=Mt.IM_SOCIAL_FB_PAGE_SWITCH,_O=Mt.IM_SOCIAL_FB_ALBUM_SWITCH,IO=Mt.IM_SOCIAL_FB_LOAD_START,SO=Mt.IM_SOCIAL_FB_LOAD_END,wO=Mt.IM_SOCIAL_SWITCH_PROVIDER,TO=Mt.IM_SOCIAL_IG_LOAD_START,kO=Mt.IM_SOCIAL_IG_LOAD_END,CO=function(){var e;return e={key:"socialMedia"},h()(e,Me,{auth:{accessToken:"",authUrl:"",accessTokenInitFetched:!1},selectedPageId:null,selectedAlbumId:null,pages:{},coverPhotos:[],isLoading:!1,isLoadingNextPhotos:!1,isLoadingAlbum:!1}),h()(e,Le,{connected:null,authorized:null,posts:[],nextPostsPageUrl:"",name:"",listingId:"",isLoading:!1,hasPostsFetched:!1}),h()(e,"selectedProvider",Me),e},xO=function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs;if(r===vO)switch(n){case uO:return t[Me].selectedAlbumId?Object(P.merge)({},t,h()({},Me,{isLoadingNextPhotos:!0})):Object(P.merge)({},t,h()({},Me,{isLoadingAlbum:!0}));case hO:var i=o[0].socialProvider;return t[i].auth.accessTokenInitFetched?t:Object(P.merge)({},t,h()({},i,{auth:{accessTokenInitFetched:!0}}));default:return t}if(r!==gO)return t;switch(n){case cO:var s=a.data,c=void 0===s?[]:s;return Object(P.merge)({},t,h()({},Me,{pagesLoaded:!0,pages:Object(P.keyBy)(c,(function(e){return e.id}))}));case lO:var l=o[0].pageId,u=t[Me],d=u.pages,p=u.coverPhotos,f=a.data,m=void 0===f?[]:f,g=a.paging,v=(g=void 0===g?{}:g).next,b=g.cursors,y=(b=void 0===b?{}:b).after,O=Object.assign(d[l],{albumsLoaded:!0,albumsAllLoaded:!v,albums:Object(P.reduce)(m,(function(e,t){return e[t.id]={id:t.id,name:t.name,count:t.count,coverPhoto:t.picture.data&&t.picture.data.url,photos:[]},t.picture.data&&p.push({imageUrl:t.picture.data.url}),e}),{})});y&&(O.after=y);var E=sO(sO({},d),{},h()({},l,O));return Object(P.merge)({},t,h()({},Me,{pages:E,selectedPageId:l,selectedAlbumId:null,coverPhotos:p}));case uO:var _=o[0].albumId,I=t[Me],S=I.selectedPageId,w=I.pages;if(!S)return t;var T=a.data,k=void 0===T?{}:T,C=a.paging,x=(C=void 0===C?{}:C).next,A=C.cursors,D=(A=void 0===A?{}:A).after,j=D?sO(sO({},w[S].albums[_].photos),k):k,M=Object.keys(j).map((function(e){return j[e]})),L=sO(sO({},w[S].albums[_]),{},{photosLoaded:!0,photosAllLoaded:!x,photos:M});D&&(L.after=D);var R=Object(P.merge)({},w,h()({},S,{albums:h()({},_,L)}));return Object(P.merge)({},t,h()({},Me,{pages:R,selectedAlbumId:_,isLoadingNextPhotos:!1,isLoadingAlbum:!1}));case dO:var N=a.posts,U=a.next;return Object(P.merge)({},t,h()({},Le,{posts:t[Le].posts.concat(N),hasPostsFetched:!0,nextPostsPageUrl:U||""}));case pO:var F=Object(P.get)(a,"payload.ok",null);return Object(P.merge)({},t,h()({},Le,{authorized:F}));case fO:var V=Object(P.get)(a,"payload.ok",null);return Object(P.merge)({},t,h()({},Le,{connected:V}));case mO:var B=a.payload,G=B.additionalData.username,z=B.listingId;return Object(P.merge)({},t,h()({},Le,{name:G,listingId:z}));default:return t}},AO=hg.PLAN_FEATURES_GET,DO=mg.SUCCESS,PO=Mt.IM_API_STATUS_CHANGE,jO=function(e,t){var n=e.key,r=e.status,a=e.payload;if(r!==DO)return t;switch(n){case AO:return Object(P.merge)({},t,{planFeatures:a});default:return t}};function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MO(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RO=function(){return{selectedItemsById:new Map,fivIndex:-1,anchor:null}};function NO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NO(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FO="unlisted",VO="anybody";var BO=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(e)||!e.length)return null;var r=e.sort((function(e,t){return e.height-t.height}));if(n){var a=r.find((function(e){return e.height>=t&&e.width>=n}));if(a)return a}var o=r.find((function(e){return e.height>=t}));return o||r[r.length-1]};function GO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GO(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var HO=hg.VIDEOS_LOAD,KO=hg.VIDEOS_LOAD_MORE,WO=hg.VIDEOS_LOAD_STATS,qO=hg.VIDEOS_LOAD_USER,YO=hg.VIDEOS_CREATE_UPLOAD,XO=hg.STOCK_VIDEOS_LOAD,QO=hg.STOCK_VIDEOS_SEARCH,$O=hg.VIDEO_REFRESH,ZO=hg.VIDEO_UPDATE_PRIVACY,JO=hg.VIDEO_DELETE,eE=Mt.IM_API_STATUS_CHANGE,tE=Mt.IM_STOCK_VIDEOS_POPULATE,nE=Mt.IM_VIDEO_PROGRESS,rE=Mt.IM_VIDEO_UPLOAD_COMPLETE,aE=Mt.IM_VIDEOS_SEARCH,oE=Mt.IM_VIDEOS_EDIT,iE=Mt.IM_STOCK_VIDEOS_RESET,sE=Mt.IM_VIDEOS_REFRESH_START,cE=Mt.IM_VIDEOS_REFRESH_END,lE=Mt.IM_OPEN_MODAL,uE=Mt.IM_VIMEO_SHOW_MODAL,dE=Mt.IM_VIMEO_HIDE_MODAL,pE=Mt.IM_IMAGES_SORT,fE=Mt.IM_VIDEO_STAGE,mE=Mt.IM_VIDEOS_RESET_RECENT,hE=function(e){var t=null,n=Bi()?160:175,r=e.download?e.download.filter((function(e){return"source"===e.type}))[0]:null;r&&(t=n*(r.width/r.height),e.width=r.width,e.height=r.height);var a=BO(e.thumbnails,n,t),o=Object(P.get)(e,"privacy.view"),i=Object(P.get)(e,"privacy.embed"),s=o===FO,c=e.link&&e.link.split("/"),l=null;return c&&s&&(l=c.pop()),zO(zO({},e),{},{id:c&&c.slice(-1)[0],imageUrl:a.link,url:a.link,urlHash:l,mediaType:st,sourceType:Re,dimensions:{width:a.width,height:a.height},privacy:{embed:i,view:o}})},gE=function(e,t){return e.filter((function(e){var n=new Date-new Date(Object(P.get)(e,"created_time"));return"public"===Object(P.get)(e,"privacy.embed")&&("uploading"!==Object(P.get)(e,"status")||n<t)&&!Object(P.isEmpty)(e.thumbnails)&&Array.isArray(e.thumbnails)})).map(hE)};function vE(e,t){return e.sort((function(e,n){var r=new Date(e.modified_time),a=new Date(n.modified_time);return t===ft?a-r:r-a}))}var bE=function(){return{key:"videos",uploadedVideos:[],uploadedVideosFetched:!1,uploadLink:null,currentVideoFileUpload:null,vimeoDraftCount:null,vimeoCreateCount:null,isSearching:!1,isLoadingMoreVideos:!1,isRefreshingVideos:!1,stockVideos:[],videoUploadProgress:0,totalVideosLoaded:0,totalVideosInAccount:0,vimeoUser:{},uploadedVideosSearchQuery:"",timeToHideUploading:6e4,vimeoModalType:vc,editVideoId:null,isVimeoLoading:!0,recentlyUploadedVideos:[]}},yE=function(e,t){var n=e.key,r=e.status,a=e.payload,o=e.requestArgs,i=void 0===o?[]:o;if(r===mg.SUCCESS)switch(n){case HO:case KO:return function(e,t,n){if(!e)return zO({},n);var r=e.videos;r&&Array.isArray(r)||(r=[]);var a=gE(r,n.timeToHideUploading),o=zO(zO({},n),{},{uploadedVideos:vE(t===HO?a:n.uploadedVideos.concat(a),ft),uploadedVideosFetched:!0,isLoadingMoreVideos:!1,isVimeoLoading:!1}),i=r.length-a.length;return o.totalVideosLoaded+=a.length,t===HO&&(o.totalVideosInAccount=e.paging.total),o.totalVideosInAccount-=i,o}(a,n,t);case qO:return zO(zO({},t),{},{vimeoUser:{accountType:a.account,createdTime:a.created_time,managedUserId:a.managedUserId,link:a.link,uploadQuota:a.upload_quota,convertedOn:a.converted_on},reconnectRequired:!1});case WO:return zO(zO({},t),{},{vimeoCreateCount:a.createdVideos,vimeoDraftCount:a.drafts});case YO:var s=a.upload_link;return zO(zO({},t),{},{uploadLink:s});case XO:case QO:var c=Object(P.toArray)(a.result);return zO(zO({},t),{},{stockVideos:c,stockVideosQuery:i[0]&&i[0].query||"",uploadedVideosFetched:!0,isSearching:!1});case $O:return function(e,t){if(!e||!e.videos||!Array.isArray(e.videos)||Object(P.isEmpty)(e.videos))return zO({},t);var n=e.videos,r=gE(n,t.timeToHideUploading);if(Object(P.isEmpty)(r))return zO({},t);var a=r[0],o=t.uploadedVideos.findIndex((function(e){return e.id===a.id})),i=t.uploadedVideos.slice();return i[o]=a,zO(zO({},t),{},{uploadedVideos:i})}(a,t);case ZO:var l=t.uploadedVideos.findIndex((function(e){return e.id===a.videoId})),u=gs()(t.uploadedVideos);return u[l].privacy.view=a.privacy.view,zO(zO({},t),{},{uploadedVideos:u});case JO:var d=t.uploadedVideos.filter((function(e){return e.id!==a.videoId}));return zO(zO({},t),{},{uploadedVideos:d,totalVideosLoaded:t.totalVideosLoaded-1,totalVideosInAccount:t.totalVideosInAccount-1});default:return t}if(r===mg.STARTED)switch(n){case HO:return zO(zO({},t),{},{isVimeoLoading:!0});case KO:return zO(zO({},t),{},{isLoadingMoreVideos:!0});case QO:return zO(zO({},t),{},{isSearching:!0});default:return t}if(r===mg.FAIL){var p={uploadedVideosFetched:!0,isLoadingMoreVideos:!1,isVimeoLoading:!1};switch(n){case XO:return zO(zO({},t),{},{stockVideos:[],stockVideosQuery:i[0]&&i[0].query||"",uploadedVideosFetched:!0,isSearching:!1});case HO:case KO:return zO(zO({},t),p);case qO:var f=a&&403===a.status;return zO(zO(zO({},t),p),{},{reconnectRequired:f});case $O:return function(e,t){var n=e.uploadedVideos.findIndex((function(e){var n;return e.id===(t[0]&&(null===(n=t[0])||void 0===n?void 0:n.videoId)||"")}));if(-1===n)return e;var r=gs()(e.uploadedVideos);return r[n].status="refresh_error",zO(zO({},e),{},{uploadedVideos:r})}(t,i);default:return t}}return t},OE=function(e,t){var n=hE(t);return e.uploadedVideos.find((function(e){return e.id===n.id}))?{}:{uploadedVideos:[n].concat(e.uploadedVideos),totalVideosInAccount:e.totalVideosInAccount+1,totalVideosLoaded:e.totalVideosLoaded+1}},EE=function(e){return null==e},_E=function(e,t){var n=e.vimeoUser.uploadQuota;return t&&n?Object(P.merge)({},n,{lifetime:{free:EE(n.lifetime.free)?null:n.lifetime.free-t,used:EE(n.lifetime.used)?null:n.lifetime.used+t},periodic:{free:EE(n.periodic.free)?null:n.periodic.free-t,used:EE(n.periodic.used)?null:n.periodic.used+t},space:{free:EE(n.space.free)?null:n.space.free-t,used:EE(n.space.used)?null:n.space.used+t}}):n};function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wE=Mt.IM_ASSET_SEARCH,TE=Mt.IM_ASSET_SEARCH_DONE,kE=Mt.IM_MODAL_HIDE,CE=Mt.IM_VIDEOS_SEARCH;function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DE=function(){return{selectedCollection:Qe}},PE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DE(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;switch(n){case Mt.IM_COLLECTION_VIEW_SET_CURRENT:return AE(AE({},e),{},{selectedCollection:r});default:return e}},jE=n(45),ME=n.n(jE);var LE=function(e,t){var n=new RegExp("".concat(t,"/(").concat("[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}",")/")),r=e.match(n);return r&&r[1]},RE=["id","containerKey","filename","createdAt","updatedAt","lastModified","dimensions","eTag","originalFilename","size","altText","references","contentType","sources","dify"];var NE=function(e){var t=e.data,n=e.containerKey,r=e.assetBaseDataUrl;if(n)t.containerKey=n;else{var a=LE(t.dataUrl,r);t.containerKey=ME()(a)}return Object(P.pick)(t,RE)},UE=n(47),FE=n.n(UE);var VE=function e(t){if("object"!==FE()(t)||null===t)return t;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n}var a,o={};if(t instanceof Error)return{message:(a=t).message,stack:a.stack,status:a.status};for(var i=Object.keys(t),s=0;s<i.length;s++)o[i[s]]=e(t[i[s]]);return o},BE=function(e){return kt(e).debug},GE=function(e){var t=kt(e),n=t.config,r=n.ventureId,a=n.websiteId,o=n.accountId,i=n.market,s=n.businessCategory,c=n.mediaTypes,l=n.featureFlags,u=n.hivemind,d=n.renderMode,p=t.appOptions,f=p.appName,m=p.device,h=p.placement,g=t.images,v=g.fromLocalStorage,b=g.uploadedImagesFetched,y=t.products.productsFetched,O=t.videos.uploadedVideosFetched,E=t.debug,_=t.api;return{ventureId:r,websiteId:a,accountId:o,market:i,businessCategory:s,mediaTypes:c,featureFlags:l,hivemind:u,renderMode:d,appName:f,device:m,placement:h,fromLocalStorage:v,uploadedImagesFetched:b,uploadedVideosFetched:O,productsFetched:y,debugMeta:VE(E),api:_}};function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KE(e){return{error:e}}function WE(e,t,n){return(0,e.makeRequest)(t).then(n).catch(KE)}var qE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shouldWriteToLocalStorage,r=t.api,a=t.assetContainerId;v()(this,e),this.shouldWriteToLocalStorage=Boolean(n),this.api=r,this._assetContainerId=a,R()(this)}var t,n,r,a,o,i,s,c;return y()(e,[{key:"getContainerKey",value:function(e){return ME()(this._assetContainerId||e)}},{key:"getUploadedImageThruApi",value:function(e){var t=e.rootDomain,n=e.containerId,r=e.folders,a=Date.now();return WE(this.api.images.load,{rootDomain:t,containerId:n,folders:r},(function(e){var t=e.data;return{data:{lastSyncedAt:a,images:gd(t),upsertList:t,deleteList:[]}}}))}},{key:"_getDiff",value:(c=id()(ad.a.mark((function e(t){var n,r,a,o,i,s,c,l,u,d,p,f,m,h;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootDomain,r=t.containerId,a=t.folders,o=t.lastSyncedAt,i=t.originalData,e.prev=1,s=Date.now(),c=[],l=[],e.next=7,WE(this.api.images.load,{rootDomain:n,containerId:r,folders:a,includeDeleted:!0,lastSyncedAt:o});case 7:if(u=e.sent,d=u.data,!(p=u.error)){e.next=12;break}return e.abrupt("return",KE(p));case 12:for(f=Object(P.keyBy)(i,(function(e){return e.id})),m=0;m<d.length;m++)(h=d[m]).isDeleted?h.isDeleted&&Object.prototype.hasOwnProperty.call(f,h.id)&&l.push(h.id):c.push(h);return e.abrupt("return",{data:{lastSyncedAt:s,upsertList:c,deleteList:l}});case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",KE(e.t0));case 20:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return c.apply(this,arguments)})},{key:"getUploadedImagesFromLS",value:(s=id()(ad.a.mark((function e(t){var n,r,a,o,i,s,c,l,u,d,p;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,r=t.assetBaseUrl,a=t.assetBaseDataUrl,e.prev=1,e.next=4,this.getAssetContainerIds(n);case 4:return o=e.sent,i=o.assetContainerIds,s=o.containerIdLoopkup,e.next=9,Promise.all(i.map((function(e){return Lh(ME()(e))})));case 9:return c=e.sent,l=c.reduce((function(e,t){var n=t.images,r=t.lastSyncedAt;return r&&(e.lastSyncedAt=r),n&&n.length&&(e.images=[].concat(gs()(e.images||[]),gs()(n))),e}),{}),u=l.images,d=void 0===u?[]:u,p=l.lastSyncedAt,e.abrupt("return",{data:{lastSyncedAt:p,images:bd(d,{containerId:this._assetContainerId||n,assetBaseUrl:r,assetBaseDataUrl:a,containerIdLoopkup:s}),fromLocalStorage:!0,firstLaunchBeaconSuffix:p?fh:mh}});case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",KE(e.t0));case 17:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return s.apply(this,arguments)})},{key:"getAssetContainerIds",value:(i=id()(ad.a.mark((function e(t){var n,r,a,o,i;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getContainerManifest(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return n=e.t0,r=n.assetContainerIds,a=void 0===r?[]:r,o=gs()(new Set([].concat(gs()(a),[t]))),i=o.reduce((function(e,t){return e[ME()(t)]=t,e}),{}),e.abrupt("return",{assetContainerIds:o,containerIdLoopkup:i});case 14:return e.prev=14,e.t1=e.catch(0),e.abrupt("return",KE(e.t1));case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return i.apply(this,arguments)})},{key:"getUploadedImagesDiffAndSyncLS",value:(o=id()(ad.a.mark((function e(t,n){var r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O,E,_,I,S;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assetBaseDataUrl,a=t.rootDomain,o=t.containerId,i=t.folders,s=t.images,c=t.lastSyncedAt,l=n.getState,(u=n.dispatch)(to("in getUploadedImagesDiffAndSyncLS call")),e.prev=3,p=this.getContainerKey(o),!c){e.next=13;break}return this.shouldWriteToLocalStorage=!0,e.next=9,this._getDiff({rootDomain:a,containerId:o,folders:i,lastSyncedAt:c,originalData:s});case 9:d=e.sent,u(to("got diff with lastSyncedAt ".concat(c))),e.next=21;break;case 13:return e.next=15,this.getUploadedImageThruApi({rootDomain:a,containerId:o,folders:i});case 15:d=e.sent,f=d.data,m=(f=void 0===f?{}:f).images,h=void 0===m?[]:m,u(to("got diff without lastSyncedAt")),this.shouldWriteToLocalStorage||(this.shouldWriteToLocalStorage=Ts(h));case 21:return v=(g=d).data,b=(v=void 0===v?{}:v).upsertList,y=void 0===b?[]:b,O=v.deleteList,E=void 0===O?[]:O,_=v.lastSyncedAt,I=g.error,S=c?fh:this.shouldWriteToLocalStorage?mh:hh,!I&&this.shouldWriteToLocalStorage&&this._syncLs({containerId:o,containerKey:p,lastSyncedAt:_,upsertList:y.map((function(e){return NE({data:e,assetBaseDataUrl:r})})),assetContainerIds:gs()(new Set(y.reduce((function(e,t){var n=t.dataUrl,a=LE(n,r);return a&&e.push(a),e}),[]))),deleteList:E,getState:l,dispatch:u}),e.abrupt("return",{data:{upsertList:y,deleteList:E,fromLocalStorage:!1,firstLaunchBeaconSuffix:S},error:I});case 29:return e.prev=29,e.t0=e.catch(3),u(to({message:"failed to call getUploadedImagesDiffAndSyncLS",error:e.t0})),e.abrupt("return",KE(e.t0));case 33:case"end":return e.stop()}}),e,this,[[3,29]])}))),function(e,t){return o.apply(this,arguments)})},{key:"_syncLs",value:(a=id()(ad.a.mark((function e(t){var n,r,a,o,i,s,c,l,u,d;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.containerKey,r=t.containerId,a=t.lastSyncedAt,o=t.upsertList,i=t.assetContainerIds,s=t.deleteList,c=t.getState,l=t.dispatch,u=o.length,d=s.length,!i||!i.length){e.next=12;break}return e.prev=4,e.next=7,this.setContainerManifest(r,{assetContainerIds:i});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),l(Ja({error:e.t0,message:"failed to sync asset container ids in container manifest",meta:HE(HE({},GE(c())),{},{assetContainerIds:i})}));case 12:return e.abrupt("return",Rh({containerKey:n,lastSyncedAt:a,upsertList:o,deleteList:s}).then((function(){var e=c(),t=BE(e),n=t.timeout,r=t.startedAt,a=Date.now()-r;a>n&&l(Ja({message:"sync ls successfully by using ".concat(a," ms"),meta:HE(HE({},GE(e)),{},{timeElapsed:a,upsertListLength:u,deleteListLength:d})}))})).catch((function(e){l(Ja({error:e,message:"failed to sync assets data in local storage",meta:HE(HE({},GE(c())),{},{upsertListLength:u,deleteListLength:d})}))})));case 13:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(e){return a.apply(this,arguments)})},{key:"addUploadedImages",value:function(e){var t=this,n=e.containerId,r=e.originalFilename;return WE(this.api.images.upload,e,(function(e){var a=gd(e.data,r);if(!t.shouldWriteToLocalStorage)return Promise.resolve({data:a});var o=t.getContainerKey(n),i=e.data.map((function(e){return HE(HE({},NE({data:e,containerKey:o})),{},{originalFilename:r})}));return Nh(i).then((function(){return{data:a}})).catch((function(){return{data:a}}))}))}},{key:"addImportedImages",value:function(e){var t=e.containerId,n=e.assets;if(!this.shouldWriteToLocalStorage||!Array.isArray(n))return Promise.resolve();var r=this.getContainerKey(t),a=n.map((function(e){return NE({data:e,containerKey:r})}));return Nh(a)}},{key:"updateUploadedImage",value:function(e){var t=this,n=e.containerId,r=e.assetId,a=e.update,o=void 0===a?{}:a;return WE(this.api.images.update,e,(function(){if(!t.shouldWriteToLocalStorage)return Promise.resolve({data:null});var e=t.getContainerKey(n);return Gh(r).then(function(){var t=id()(ad.a.mark((function t(n){var r;return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return r=Object(P.merge)(n,o.metadata),t.next=4,Bh(NE({data:r,containerKey:e}));case 4:return t.abrupt("return",{data:r});case 5:return t.abrupt("return",{data:null});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return{data:null}}))}))}},{key:"deleteUploadedImages",value:function(e){var t=this,n=e.rootDomain,r=e.extractedAssetContainerId,a=e.containerId,o=e.images,i=e.docs,s=e.appName;return WE(this.api.images.delete,{rootDomain:n,extractedAssetContainerId:r,containerId:a,images:o,appName:s},(function(e){var n={data:HE(HE({},e.data),{},{docs:i})};return t.shouldWriteToLocalStorage?Uh(i.map((function(e){return e.id}))).then((function(){return n})).catch((function(){return n})):Promise.resolve(n)})).catch((function(){return{data:{deletedDocumentNames:o,updatedWidgets:[],docs:i}}}))}},{key:"getContainerManifest",value:function(e){var t=this.getContainerKey(e);return Fh(t)}},{key:"setContainerManifest",value:(r=id()(ad.a.mark((function e(t,n){var r,a,o,i,s,c,l;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getContainerKey(t),e.next=3,this.getContainerManifest(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:return a=e.t0,o=n.assetContainerIds,i=Io()(n,["assetContainerIds"]),s=a.assetContainerIds,c=Io()(a,["assetContainerIds"]),l=Object(P.merge)(c,i),(o||s)&&(l.assetContainerIds=gs()(new Set([].concat(gs()(s||[]),gs()(o||[]))))),e.abrupt("return",Vh(HE(HE({},l),{},{containerKey:r})));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getVenturesFromLS",value:(n=id()(ad.a.mark((function e(t){var n,r;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,e.prev=1,e.next=4,this.getContainerManifest(n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return r=e.t0,e.abrupt("return",{data:{ventures:r.ventures?r.ventures:[]}});case 11:return e.prev=11,e.t1=e.catch(1),e.abrupt("return",KE(e.t1));case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return n.apply(this,arguments)})},{key:"getVenturesFromApiAndSyncLS",value:(t=id()(ad.a.mark((function e(t){var n,r,a,o,i,s;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.containerId,r=t.rootDomain,a=t.assetContainerId,e.prev=1,e.next=4,WE(this.api.otherSites.loadVentures,{rootDomain:r,assetContainerId:a},(function(e){return{data:{ventures:e.data.ventures}}}));case 4:return o=e.sent,i=o.data.ventures,s=void 0===i?[]:i,this.setContainerManifest(n,{ventures:s}),e.abrupt("return",{data:{ventures:s}});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",KE(e.t0));case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return t.apply(this,arguments)})}]),e}();function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function e_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e_(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var n_=Mt.IM_SET_VIDEO_FLYOUT,r_=hg.VENTURE_LOAD,a_=mg.SUCCESS,o_=Mt.IM_API_STATUS_CHANGE,i_=hg.USER_GET,s_=mg.SUCCESS,c_=Mt.IM_API_STATUS_CHANGE,l_=n(2),u_=ad.a.mark(h_);function d_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d_(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=n.type,a=n.payload,o=(a=void 0===a?{}:a).sourceType,i=a.action,s=a.notifyResult;if("SOURCE_NOTIFY"!==r||o!==e)return t;var c=s.changeState,l=s.inProgress,u=c?c(t):t;switch(i){case nd:return p_(p_({},u),{},{isSearching:l});case"NEXTPAGE":return p_(p_({},u),{},{isLoadingNext:l,isLoadingNextStock:l});default:return p_(p_({},u),{},{isSearching:!1,isLoadingNext:!1,isLoadingNextStock:!1})}}function m_(e,t){var n=e.getState,r=e.dispatch,a=t.payload,o=a.sourceKey,i=a.action,s=a.payload,c=Hd(o);switch(i){case td:c.get(s,{getState:n,dispatch:r});break;case nd:c.search(s,{getState:n,dispatch:r});break;case"NEXTPAGE":c.nextPage(s,{getState:n,dispatch:r})}}function h_(e){var t,n;return ad.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.getState,n=e.dispatch,r.next=3,Object(l_.takeLatest)("SOURCE_INVOKE",m_,{getState:t,dispatch:n});case 3:case"end":return r.stop()}}),u_)}var g_=function(e){return f_.bind(null,e)};function v_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v_(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y_,O_=Mt.IM_TRACE_AUDIT_EVENT_START,E_=Mt.IM_TRACE_AUDIT_EVENT_END,__=Mt.IM_SPAQ_INIT,I_=Mt.IM_SPAQ_LOG_DONE,S_=g_("STOCKIMAGES"),w_=g_("PRODUCTS"),T_=h()({},"ImageManager",Object(dg.combineReducers)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gg(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_API_STATUS_CHANGE:return vg(e,r);default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gb(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_OPEN_VIDEO_SELECTOR_MODAL:case Mt.IM_OPEN_MODAL:case Mt.IM_STOCK_IMAGES_RESET:case Mt.IM_STOCK_IMAGES_SEARCH:var a=Object(P.pick)(r,Object.keys(Gb()));if(e.searchClient||(a.searchClient=new Ig),!e.api){var o=r.ventureId?"v2":"v1";a.api=Fb(o)}var i=Object(P.merge)({},e,a);return Object(P.isEmpty)(a.mediaTypes)||(i.mediaTypes=a.mediaTypes),i;case Mt.IM_API_STATUS_CHANGE:var s=r.status,c=r.key,l=r.payload;return c===hg.EXPERIMENTS_LOAD&&s===mg.SUCCESS?Bb(Bb({},e),{},{hivemind:l}):c===hg.VIDEOS_LOAD_USER?Bb(Bb({},e),{},{featureFlags:Bb(Bb({},e.featureFlags),{},{enableVimeo:s!==mg.FAIL})}):e;default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uy(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Qb:return yy(r,e);case $b:return fy(r,e);case Zb:return py(r,e);case Jb:return Hb(Hb({},e),{},{selectedTabIndex:0,deletedAllUploaded:!1});case ey:return Hb(Hb({},e),{},{selectedTabIndex:r.tabIndex});case ty:return r&&r!==e.uploadedOrder?Hb(Hb({},e),{},{uploaded:Cs(e.uploaded,r,hy),uploadedOrder:r,olsImages:Cs(e.olsImages,r,hy)}):e;case ny:var a=r.newImages,o=r.requestId;return gy(a,e,{requestId:o});case ry:return vy(r,e);case ay:var i=!0;return by(r,e,i);case oy:var s=!1;return by(r,e,s);case sy:return Hb(Hb({},e),{},{showSlowUploadNotification:!0});case cy:return Hb(Hb({},e),{},{showSlowUploadNotification:!1});case iy:var c=r.mediaTypes;return Object(P.isEmpty)(c)||c.length===e.mediaTypes.length&&c.every((function(t){return e.mediaTypes.includes(t)}))&&e.mediaTypes.every((function(e){return c.includes(e)}))?Hb(Hb({},e),{},{recentUploadedImages:[],recentlyStagedCount:0}):Hb(Hb({},e),{},{uploaded:[],mediaTypes:c,recentUploadedImages:[],recentlyStagedCount:0});case ly:return Hb(Hb({},e),{},{recentUploadedImages:[],recentlyStagedCount:0});default:return e}},cache:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categoryStockImages:{},categoryStockVideos:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_API_STATUS_CHANGE:return _y(r,e);default:return e}},appOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dy(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case xy:case Cy:Py(e,r);var a=Object(P.pick)(r,Object.keys(Dy()));return Object(P.merge)({},e,a);case ky:return jy(r,e);default:return e}},otherSites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nO(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Wy:return oO(r,e);case qy:return Ly(Ly({},e),{},{selectedWebsiteId:r.containerId});case Yy:return Ly(Ly({},e),{},{isCopyingImages:!0});case Xy:return Ly(Ly({},e),{},{isCopyingImages:!1});case Qy:return Ly(Ly({},e),{},{hasOthersites:r.hasOthersites,hasPhotoshoot:r.hasPhotoshoot});case $y:if(e.currentMaxWebsiteViewableIndex===e.websites.length-1)return e;var a=Math.min(e.websites.length-1,e.currentMaxWebsiteViewableIndex+100);return Ly(Ly({},e),{},{currentMaxWebsiteViewableIndex:a});case Zy:var o=r.mediaTypes;return Ly(Ly({},e),{},{mediaTypes:Object(P.isEmpty)(o)?e.mediaTypes:o});default:return e}},socialMedia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:CO(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case yO:var a=r.socialProvider,o=r.accessToken;return Object(P.merge)({},e,h()({},a,{auth:{accessToken:o}}));case bO:var i=r.socialProvider,s=r.authUrl;return Object(P.merge)({},e,h()({},i,{auth:{authUrl:s}}));case EO:var c=r.pageId;return Object(P.merge)({},e,h()({},Me,{selectedPageId:c,selectedAlbumId:null}));case _O:var l=r.albumId;return Object(P.merge)({},e,h()({},Me,{selectedAlbumId:l}));case OO:return xO(r,e);case IO:return Object(P.merge)({},e,h()({},Me,{isLoading:!0}));case SO:return Object(P.merge)({},e,h()({},Me,{isLoading:!1}));case wO:return sO(sO({},e),{},{selectedProvider:r.socialProvider});case TO:return Object(P.merge)({},e,h()({},Le,{isLoading:!0}));case kO:return Object(P.merge)({},e,h()({},Le,{isLoading:!1}));default:return e}},planFeatures:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{planFeatures:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case PO:return jO(r,e);default:return e}},selection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RO(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_SELECTION_CLEAR_ALL:case Mt.IM_MODAL_HIDE:return RO();case Mt.IM_API_STATUS_CHANGE:var a=r.key,o=r.status;return a===hg.IMAGES_DELETE&&o===mg.SUCCESS?RO():e;case Mt.IM_TOGGLE_FIV:var i=r.index;return LO(LO({},e),{},{fivIndex:i});case Mt.IM_SELECTION_MULTI_SELECT:var s=new Map(e.selectedItemsById),c=r;c.forEach((function(e){s.delete(e.id)||s.set(e.id,e)}));var l=c[c.length-1],u=s.has(l.id)?l:null;return LO(LO({},e),{},{selectedItemsById:s,anchor:u});case Mt.IM_SELECTION_RANGE_SELECT:var d=r.items,p=r.selectionLimit,f=r.allowUnlimitedSelect,m=e.selectedItemsById;if(!f&&p>=0&&m.size===p)return e;for(var h=d[d.length-1],g=!m.has(h.id),v=new Map(m),b=null,y=0;y<d.length&&(f||-1===p||v.size<p);y++)g?(v.set(d[y].id,d[y]),b=d[y]):v.delete(d[y].id);return LO(LO({},e),{},{selectedItemsById:v,anchor:g?b:null});default:return e}},perfBeacon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFirstBeacon:!0,isPerfEndTracked:!1,isLoadingVenture:null},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case Mt.IM_PERF_TRACK_END_DONE:return UO(UO({},e),{},{isPerfEndTracked:!0,isFirstBeacon:!1});case Mt.IM_OPEN_MODAL:return UO(UO({},e),{},{isPerfEndTracked:!1});case Mt.IM_PERF_LOAD_VENTURE:return UO(UO({},e),{},{isLoadingVenture:!0});case Mt.IM_PERF_LOAD_VENTURE_END:return UO(UO({},e),{},{isLoadingVenture:!1});default:return e}},videos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bE(),t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case eE:return yE(r,e);case iE:return zO(zO({},e),{},{stockVideosQuery:""});case tE:return zO(zO({},e),{},{stockVideos:r,stockVideoNextPageUrl:""});case nE:return zO(zO({},e),{},{videoUploadProgress:r});case rE:var a=zO(zO({},e),{},{videoUploadProgress:0,currentVideoFileUpload:null,uploadLink:null,recentlyUploadedVideos:[].concat(gs()(e.recentlyUploadedVideos),[r])});if(!r)return a;var o=r.videoSize,i=r.stagingVideo,s=OE(e,i),c=_E(e,o);return zO(zO(zO({},a),s),{},{vimeoUser:zO(zO({},e.vimeoUser),{},{uploadQuota:c})});case aE:return zO(zO({},e),{},{uploadedVideosSearchQuery:r.search,stockVideosQuery:r.search});case fE:return zO(zO({},e),{},{currentVideoFileUpload:r});case oE:return zO(zO({},e),{},{editVideoId:r});case sE:return zO(zO({},e),{},{isRefreshingVideos:!0});case cE:return zO(zO({},e),{},{isRefreshingVideos:!1});case lE:return zO(zO({},e),{},{timeToHideUploading:r.timeToHideUploading,recentlyUploadedVideos:[]});case uE:return zO(zO({},e),{},{vimeoModalType:r.modalType,editVideoId:r.videoId});case dE:return zO(zO({},e),{},{vimeoModalType:vc});case pE:return zO(zO({},e),{},{uploadedVideos:vE(e.uploadedVideos,r)});case mE:return zO(zO({},e),{},{recentlyUploadedVideos:[]});default:return e}},products:w_,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case wE:var a=r.searchText;return SE(SE({},e),{},{pendingSearchText:a});case TE:var o=r.searchResults;return SE(SE({},e),{},{searchResults:o,searchText:e.pendingSearchText,pendingSearchText:null});case CE:return SE(SE({},e),{},{searchText:r.search});case kE:return{};default:return e}},collections:PE,appContext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{api:null,localDataStore:null,assetContainerId:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_OPEN_VIDEO_SELECTOR_MODAL:case Mt.IM_OPEN_MODAL:if(e.api)return e;var a=r.ventureId,o=r.websiteId,i=r.accountId,s=r.urls.assetBaseUrl,c=a?"v2":"v1",l=a||o||i,u=Fb({assetByContainerVersion:c,assetContainerId:l});return{api:u,localDataStore:new qE({api:u,assetBaseUrl:s,assetContainerId:l}),assetContainerId:l};case Mt.IM_ASSET_CONTAINER_ID_SET:return r.assetContainerId===e.assetContainerId?e:XE(XE({},e),{},{assetContainerId:r.assetContainerId});default:return e}},assetDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;switch(n){case Mt.IM_DIMENSIONS_BATCH_RETRIEVED:return r.reduce((function(e,t){var n=t.id,r=t.localDimensions;return $E($E({},e),{},h()({},n,r))}),e);default:return e}},debug:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startedAt:0,timeout:0,stack:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Mt.IM_OPEN_MODAL:return JE(JE({},e),{},{timeout:Object(P.get)(r,"debug.timeoutBeforeLog",2e4),startedAt:Date.now()});case Mt.IM_DEBUG:var a=Date.now()-e.startedAt;return"string"==typeof r?JE(JE({},e),{},{stack:e.stack.concat({timeElapsed:a,message:r})}):"object"===FE()(r)?JE(JE({},e),{},{stack:e.stack.concat(JE({timeElapsed:a},r))}):e;default:return e}},onboarding:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flyoutIsOpen:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case n_:return t_(t_({},e),{},{flyoutIsOpen:r});default:return e}},venture:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ventureId:null,businessName:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=(r=void 0===r?{}:r).key,o=r.status,i=r.payload;return n===o_&&a===r_&&o===a_?{ventureId:i.id,businessName:i.name}:e},stockImages:S_,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=(r=void 0===r?{}:r).key,o=r.status,i=r.payload;return n===c_&&a===i_&&o===s_?i:e},spaq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{server:{},client:{enabled:!1,timeout:1e4,traces:{}},logged:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case __:return b_(b_({},e),{},{server:b_({},r.server),client:b_(b_({},e.client),r.client)});case O_:var a,o=r.name,i=Io()(r,["name"]);return o?((null===(a=e.client.traces)||void 0===a?void 0:a[o])||(e.client.traces[o]=b_(b_({},i),{},{start:Date.now()})),e):e;case E_:var s,c,l=r.name,u=Io()(r,["name"]);if(!l)return e;if(!(null===(s=e.client.traces)||void 0===s||null===(c=s[l])||void 0===c?void 0:c.end)){var d=Date.now();e.client.traces[l]=b_(b_(b_({},e.client.traces[l]),u),{},{end:d,timeConsumed:d-e.client.traces[l].start})}return e;case I_:return b_(b_({},e),{},{logged:!0});default:return e}}})),k_=n(107),C_=n.n(k_),x_=ad.a.mark(R_),A_=hg.VIDEOS_LOAD_USER,D_=hg.VIDEOS_LOAD,P_=hg.VIDEOS_LOAD_MORE,j_=hg.VIDEOS_CONVERT_USER,M_=hg.VIDEOS_CREATE_UPLOAD,L_=hg.GC_SITE_IMAGES_LOAD;function R_(e,t,n){var r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.key,a=e.makeRequest,c.prev=1,c.next=4,Object(l_.put)(Ar(r,mg.STARTED,{},[t]));case 4:return c.next=6,Object(l_.call)(a,t||null);case 6:return o=c.sent,i=o.data,"function"==typeof n&&(i=n(i)),c.next=11,Object(l_.put)(Ar(r,mg.SUCCESS,i,[t]));case 11:return c.abrupt("return",{data:i});case 14:if(c.prev=14,c.t0=c.catch(1),s=r.split("_")[0],!(401===c.t0.status&&[A_,D_,P_,j_,M_,L_].includes(r))&&!["SSO","FB"].includes(s)){c.next=21;break}return c.next=21,Object(l_.put)(Ja({error:c.t0,message:"Received ".concat(c.t0.status||"unknown"," status from failed request of key ").concat(r)}));case 21:return c.next=23,Object(l_.put)(Ar(r,mg.FAIL,c.t0,[t]));case 23:return c.abrupt("return",{data:{},error:c.t0});case 24:case"end":return c.stop()}}),x_,null,[[1,14]])}var N_=(y_={},h()(y_,it,"imageCount"),h()(y_,ct,"pdfCount"),h()(y_,st,"videoCount"),h()(y_,lt,"documentCount"),h()(y_,dt,"productCount"),h()(y_,"OTHER","unCategorized"),y_);function U_(e){var t,n=e.totalCount;return t={emptyState:0===n},h()(t,N_[dt],n),h()(t,"totalCount",n),t}function F_(e,t){var n,r=Array.isArray(e)?e.length:0;return n={emptyState:0===r},h()(n,N_[t],r),h()(n,"totalCount",r),n}function V_(e){var t,n;if(!e)return n={emptyState:!0},h()(n,N_.VIDEO,0),h()(n,"totalCount",0),n;var r=e.totalVideosInAccount,a=e.hasUploaded,o=e.vimeoUser,i=void 0===o?{}:o,s=e.vimeoCreateCount,c=e.vimeoDraftCount;return t={emptyState:!a},h()(t,N_.VIDEO,r),h()(t,"totalCount",r),h()(t,"vimeoUserConverted",Boolean(i.convertedOn)),h()(t,"vimeoCreateCount",s),h()(t,"vimeoDraftCount",c),h()(t,"vimeoUploadCount",(r||0)-(s||0)),t}function B_(e){var t;if(!Array.isArray(e))return{emptyState:!0,totalCount:0};for(var n=0,r=0,a=0,o=0,i=0,s=e.length,c=0;c<s;c++)switch(e[c].mediaType){case it:n++;break;case st:a++;break;case ct:r++;break;case lt:o++;break;default:i++}return t={emptyState:0===e.length,totalCount:s},h()(t,N_.IMAGE,n),h()(t,N_.VIDEO,a),h()(t,N_.PDF,r),h()(t,N_.WORD,o),h()(t,N_.OTHER,i),t}var G_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$i;return function(n){if(t!==$i)return B_(n);switch(e){case st:return V_(n);case dt:return U_(n);default:return F_(n,e)}}},z_=ad.a.mark(Q_),H_=ad.a.mark($_),K_=ad.a.mark(Z_),W_=ad.a.mark(J_),q_=ad.a.mark(eI);function Y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y_(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q_(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,g,v,b,y,O,E,_,I,S;return ad.a.wrap((function(w){for(;;)switch(w.prev=w.next){case 0:return n=e.payload,r=n.eventName,a=n.data,o=void 0===a?{}:a,i=n.perfStart,s=void 0!==i&&i,c=n.perfEnd,l=void 0!==c&&c,w.next=3,Object(l_.select)(js);case 3:return u=w.sent,d=u.inWebsiteContext,w.next=7,Object(l_.select)(Ms);case 7:if(p=w.sent,f=p.tracker,m=p.appName,d||"vnext-dashboard"===m){w.next=12;break}return w.abrupt("return");case 12:if(f&&f.trackEvent){w.next=14;break}return w.abrupt("return");case 14:return w.next=16,Object(l_.select)(js);case 16:return g=w.sent,v=g.featureFlags,b=void 0===v?{}:v,y=g.placement,w.next=22,Object(l_.select)(Bs);case 22:return O=w.sent,E=O.uploadedImages,_=O.hasUploaded,w.next=27,Object(l_.select)(Bl);case 27:I=w.sent,S=Object.keys(I).reduce((function(e,t){return X_(X_({},e),{},h()({},t,I[t].cohortId))}),{}),f.trackEvent(r,X_(X_((t={"Enabled BB Feature Flags":Object.keys(b).filter((function(e){return b[e]}))},h()(t,"total file count",Object(P.get)(E,"length","N/A")),h()(t,"has uploaded",Boolean(_)),h()(t,"placement",y),t),S),o),s,l);case 30:case"end":return w.stop()}}),z_)}function $_(){var e,t,n,r,a,o,i,s,c,l,u,d,p;return ad.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(l_.select)(js);case 2:if(e=f.sent,t=e.mediaTypes,n=e.selectedMediaType,r=e.renderMode,a=e.isWebsitelessContainer,!St(t,st)){f.next=13;break}return f.next=10,Object(l_.select)(Qs);case 10:o=f.sent,f.next=30;break;case 13:if(!St(t,dt)){f.next=19;break}return f.next=16,Object(l_.select)(Ns);case 16:o=f.sent,f.next=30;break;case 19:return f.next=21,Object(l_.select)(Bs);case 21:if(i=f.sent,s=i.uploadedImages,o=s,!wt(t)){f.next=30;break}return f.next=27,Object(l_.select)(Qs);case 27:c=f.sent,l=c.uploadedVideos,o=o.concat(l);case 30:if(u=G_(n,r)(o),d=X_({"total uploads":u.totalCount,indexedDBSupported:!!window.indexedDB,selectedMediaType:t.length>1?t:n,isWebsitelessContainer:a},u),!St(t,it)){f.next=40;break}return f.next=35,Object(l_.select)($s);case 35:return p=f.sent,d["over images count"]=p.length,f.next=39,Object(l_.select)(tc);case 39:d.hasPhotoshoot=f.sent.hasPhotoshoot;case 40:return d.mediaContext=r===Qi?"mixed":d.selectedMediaType,f.next=43,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_OPEN_MODAL",data:d}});case 43:case"end":return f.stop()}}),H_)}function Z_(){var e,t,n;return ad.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l_.select)(Bs);case 2:return e=r.sent,t=e.uploadedImages,n=t.length>0?"IM_TRACK_SEARCH_RESULTS_FOUND":"IM_TRACK_SEARCH_NO_RESULTS",r.next=7,Object(l_.call)(Q_,{payload:{eventName:n}});case 7:case"end":return r.stop()}}),K_)}function J_(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.delay)(e);case 2:return t.next=4,Object(l_.call)($_);case 4:case"end":return t.stop()}}),W_)}function eI(e){var t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l_.takeEvery)(Mt.IM_TRACK,Q_);case 2:return a.next=4,Object(l_.takeLatest)(Mt.IM_ASSET_SEARCH_DONE,Z_);case 4:if(t=e.bbConfig,n=(t=void 0===t?{}:t).usageTrackingDelay,r=void 0===n?5e3:n,!St(e.mediaTypes,dt)){a.next=10;break}return a.next=10,Object(l_.takeLatest)(Mt.IM_TRACK_USAGE,J_,r);case 10:case"end":return a.stop()}}),q_)}var tI=ad.a.mark(aI);function nI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nI(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aI(e,t){var n,r,a,o,i,s,c,l=arguments;return ad.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:for(n=l.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=l[a];return u.next=3,Object(l_.put)(Ar(e,mg.STARTED,{},r));case 3:return u.next=5,Object(l_.put)(to("call ".concat(e," from local storage started")));case 5:return u.next=7,l_.call.apply(void 0,[t].concat(r));case 7:if(o=u.sent,i=o.error,s=o.data,!i){u.next=30;break}return c="call ".concat(e," api from local storage failed"),u.next=13,Object(l_.put)(Ar(e,mg.FAIL,i,r));case 13:return u.next=15,Object(l_.put)(to({message:c,error:i}));case 15:return u.t0=l_.put,u.t1=Ja,u.t2=i,u.t3=c,u.t4=rI,u.t5={},u.next=23,Object(l_.select)(GE);case 23:return u.t6=u.sent,u.t7=(0,u.t4)(u.t5,u.t6),u.t8={error:u.t2,message:u.t3,meta:u.t7},u.t9=(0,u.t1)(u.t8),u.next=29,(0,u.t0)(u.t9);case 29:return u.abrupt("return",o);case 30:return u.next=32,Object(l_.put)(Ar(e,mg.SUCCESS,s,r));case 32:return u.next=34,Object(l_.put)(to("call ".concat(e," from local storage successfully")));case 34:return u.abrupt("return",o);case 35:case"end":return u.stop()}}),tI)}var oI,iI=ad.a.mark(sI);function sI(e,t,n){return ad.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,setTimeout((function(){x.a.addMessage({title:l.a.createElement(p.IntlProvider,e,t),content:l.a.createElement(p.IntlProvider,e,n),icon:"error",fadeTime:2e3,id:"Media library growl"})}),10);case 2:case"end":return r.stop()}}),iI)}function cI(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function lI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uI=ad.a.mark(ZI),dI=ad.a.mark(JI),pI=ad.a.mark(eS),fI=ad.a.mark(tS),mI=ad.a.mark(nS),hI=ad.a.mark(rS),gI=ad.a.mark(aS),vI=ad.a.mark(oS),bI=ad.a.mark(iS),yI=ad.a.mark(sS),OI=ad.a.mark(cS),EI=ad.a.mark(lS),_I=ad.a.mark(uS),II=ad.a.mark(dS),SI=ad.a.mark(pS),wI=ad.a.mark(gS),TI=ad.a.mark(vS),kI=ad.a.mark(bS),CI=ad.a.mark(yS),xI=ad.a.mark(OS),AI=ad.a.mark(ES),DI=Mt.IM_API_STATUS_CHANGE,PI=Mt.IM_VIDEOS_UPLOAD,jI=Mt.IM_VIDEOS_DELETE,MI=Mt.IM_VIDEOS_LOAD,LI=Mt.IM_VIDEOS_LOAD_MORE,RI=Mt.IM_VIDEOS_GET_USER,NI=Mt.IM_VIDEOS_SEARCH,UI=Mt.IM_VIMEO_GET_LINK,FI=Mt.IM_VIDEO_REFRESH,VI=Mt.IM_VIDEOS_TRIGGER_LOAD_MORE,BI=Mt.IM_VIDEOS_USER_RECONNECT,GI=Mt.IM_INSERT_ITEMS,zI=hg.VIDEO_DELETE,HI=hg.VIDEO_REFRESH,KI=hg.VIDEO_UPDATE_PRIVACY,WI=uc.VIMEO_CONVERT,qI=uc.VIMEO_CONVERT_CREATE,YI=uc.VIMEO_CREATE,XI=uc.VIMEO_EDIT,QI=uc.VIMEO_UPGRADE,$I=(oI={},h()(oI,WI,"convert"),h()(oI,qI,"convertcreate"),h()(oI,XI,"edit"),h()(oI,QI,"upgrade"),h()(oI,YI,"create"),oI);function ZI(){var e,t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l_.select)(js);case 2:return e=o.sent,t=e.rootDomain,n=e.websiteId,o.next=7,Object(l_.select)(Ps);case 7:return r=o.sent,a=r.api,o.next=11,Object(l_.call)(R_,a.videos.getUser,{rootDomain:t,websiteId:n});case 11:return o.abrupt("return",o.sent);case 12:case"end":return o.stop()}}),uI)}function JI(e){var t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,Object(l_.select)(js);case 3:return n=s.sent,r=n.rootDomain,a=n.websiteId,s.next=8,Object(l_.select)(Ps);case 8:return o=s.sent,i=o.api,s.next=12,Object(l_.call)(R_,i.videos.delete,{rootDomain:r,websiteId:a,videoId:t});case 12:case"end":return s.stop()}}),dI)}function eS(){var e,t,n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(l_.select)(js);case 2:return e=i.sent,t=e.rootDomain,n=e.websiteId,r=e.pageSize,i.next=8,Object(l_.select)(Ps);case 8:return a=i.sent,o=a.api,i.next=12,Object(l_.call)(R_,o.videos.load,{rootDomain:t,websiteId:n,perPage:r},vd);case 12:return i.next=14,Object(l_.spawn)(oS);case 14:case"end":return i.stop()}}),pI)}function tS(e){var t,n,r,a,o,i,s,c,l,u,d;return ad.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.page,r=t.pageSize,p.next=3,Object(l_.select)(js);case 3:return a=p.sent,o=a.rootDomain,i=a.websiteId,p.next=8,Object(l_.select)(Qs);case 8:if(s=p.sent,c=s.isLoadingMoreVideos,l=s.uploadedVideosSearchQuery,!c){p.next=13;break}return p.abrupt("return");case 13:return p.next=15,Object(l_.select)(Ps);case 15:return u=p.sent,d=u.api,p.next=19,Object(l_.call)(R_,d.videos.loadMore,{rootDomain:o,websiteId:i,page:n,perPage:r,search:l},vd);case 19:case"end":return p.stop()}}),fI)}function nS(e){var t,n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(l_.select)(js);case 2:return t=i.sent,n=t.rootDomain,r=t.websiteId,i.next=7,Object(l_.select)(Ps);case 7:return a=i.sent,o=a.api,i.next=11,Object(l_.call)(R_,o.videos.loadStats,{rootDomain:n,websiteId:r,managedUserId:e});case 11:case"end":return i.stop()}}),mI)}function rS(e){var t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,s.next=3,Object(l_.select)(js);case 3:return n=s.sent,r=n.rootDomain,a=n.websiteId,s.next=8,Object(l_.select)(Ps);case 8:return o=s.sent,i=o.api,s.next=12,Object(l_.call)(R_,i.videos.refresh,{rootDomain:r,websiteId:a,videoId:t},vd);case 12:case"end":return s.stop()}}),hI)}function aS(e){var t,n;return ad.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.videoId,r.next=3,Object(l_.select)(Ms);case 3:n=r.sent,n.tracker.trackEvent("IM_TRACK_MISSING_VIDEO_THUMBNAIL",{videoId:t});case 6:case"end":return r.stop()}}),gI)}function oS(){var e,t,n,r,a,o,i,s,c,l,u;return ad.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(l_.select)(js);case 2:return e=d.sent,t=e.videoStatusRefreshRate,d.next=6,Object(l_.select)(Qs);case 6:if(n=d.sent,!n.isRefreshingVideos){d.next=10;break}return d.abrupt("return");case 10:return d.next=12,Object(l_.put)(aa());case 12:return d.next=14,Object(l_.select)(Ys);case 14:r=d.sent,a=new Set;case 16:if(Object(P.isEmpty)(r)){d.next=47;break}o=cI(r),d.prev=18,o.s();case 20:if((i=o.n()).done){d.next=30;break}if(s=i.value,a.has(s.id)){d.next=28;break}if(c=s.status,l=s.imageUrl,u=void 0===l?"":l,"available"!==c||!fi(u)){d.next=28;break}return a.add(s.id),d.next=28,Object(l_.spawn)(aS,{videoId:s.id});case 28:d.next=20;break;case 30:d.next=35;break;case 32:d.prev=32,d.t0=d.catch(18),o.e(d.t0);case 35:return d.prev=35,o.f(),d.finish(35);case 38:return d.next=40,Object(l_.all)(r.map((function(e){return Object(l_.call)(rS,{payload:e.id})})));case 40:return d.next=42,Object(l_.delay)(t);case 42:return d.next=44,Object(l_.select)(Ys);case 44:r=d.sent,d.next=16;break;case 47:return d.next=49,Object(l_.put)(oa());case 49:case"end":return d.stop()}}),vI,null,[[18,32,35,38]])}function iS(){var e,t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l_.select)(Ms);case 2:return e=s.sent,t=e.tracker,s.next=6,Object(l_.select)(qs);case 6:return n=s.sent,r=n.managedUserId,s.next=10,Object(l_.call)(nS,r);case 10:return s.next=12,Object(l_.select)(qs);case 12:a=s.sent,o=a.vimeoDraftCount,i=a.vimeoCreateCount,t.trackEvent("IM_TRACK_VIMEO_CREATE_CTA_CLICK",{vimeoDraftCount:o,vimeoCreateCount:i});case 16:case"end":return s.stop()}}),bI)}function sS(){var e;return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.call)(ZI);case 2:if((e=t.sent).error){t.next=8;break}return t.next=6,Object(l_.call)(eS);case 6:return t.next=8,Object(l_.call)(nS,Object(P.get)(e,["data","managedUserId"]));case 8:return t.next=10,Object(l_.call)($_);case 10:case"end":return t.stop()}}),yI)}function cS(e){var t,n,r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(l_.select)(js);case 3:return n=c.sent,r=n.pageSize,a=n.rootDomain,o=n.websiteId,c.next=9,Object(l_.select)(Ps);case 9:return i=c.sent,s=i.api,c.next=13,Object(l_.call)(R_,s.videos.load,{rootDomain:a,websiteId:o,perPage:r,search:t.search},vd);case 13:case"end":return c.stop()}}),OI)}function lS(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g,v,b,y,O,E,_;return ad.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:return n=t.payload,r=n.redirectAction,a=n.videoId,I.next=3,Object(l_.select)(Ms);case 3:if(i=I.sent,s=i.tracker,o=r===WI&&a?$I[XI]:$I[r],r!==YI){I.next=18;break}return I.next=9,Object(l_.spawn)(iS);case 9:return I.next=11,Object(l_.select)(qs);case 11:if(c=I.sent,u=c.convertedOn,d=c.currentCreateCount,u||!(d>0)){I.next=18;break}return I.next=17,Object(l_.put)(Qr({modalType:"connect and create"}));case 17:return I.abrupt("return");case 18:return f=window.open("","_blank"),I.next=21,Object(l_.select)(js);case 21:return m=I.sent,h=m.rootDomain,g=m.websiteId,v=m.socialMediaAuthCallbackUrl,I.next=27,Object(l_.select)(Ps);case 27:return b=I.sent,y=b.api,I.next=31,Object(l_.call)(R_,y.videos.getLink,{rootDomain:h,websiteId:g,redirectURI:v+"/"+r.toLowerCase(),state:window.location.origin,linkType:o});case 31:if(O=I.sent,E=O.data,!O.error){I.next=39;break}return f.close(),I.next=38,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"VIMEO_CANNOT_CONNECT_MESSAGE"}));case 38:return I.abrupt("return");case 39:if(s.trackEvent("IM_TRACK_VIMEO_OFF_SITE_REDIRECT",{eventType:r}),_=new URL(E),r!==QI){I.next=45;break}_.searchParams.append("link","upgrade"),I.next=49;break;case 45:if(!a){I.next=49;break}return I.next=48,Object(l_.put)(Kr(a));case 48:_.searchParams.append("link","videos/".concat(a));case 49:f.location.href=_.href;case 50:case"end":return I.stop()}}),EI)}function uS(e,t){var n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.payload,i.next=3,Object(l_.put)(qr());case 3:r=cI(n),i.prev=4,r.s();case 6:if((a=r.n()).done){i.next=15;break}return o=a.value,i.next=10,Object(l_.call)(dS,e,{payload:o});case 10:if(!i.sent){i.next=13;break}return i.abrupt("break",15);case 13:i.next=6;break;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(4),r.e(i.t0);case 20:return i.prev=20,r.f(),i.finish(20);case 23:case"end":return i.stop()}}),_I,null,[[4,17,20,23]])}function dS(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g;return ad.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return n=t.payload,v.next=3,Object(l_.put)(fo(n));case 3:return v.next=5,Object(l_.select)(js);case 5:return r=v.sent,a=r.rootDomain,o=r.websiteId,v.next=10,Object(l_.select)(Ps);case 10:return i=v.sent,s=i.api,v.next=14,Object(l_.call)(R_,s.videos.create,{rootDomain:a,websiteId:o,videoFile:n});case 14:if(c=v.sent,u=c.error,d=c.data,!u){v.next=26;break}return v.next=20,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:n.name}}));case 20:return v.next=22,Object(l_.put)(na());case 22:return f=n.mediaType,m=n.type,h=n.name,g=n.size,v.next=25,Object(l_.put)(Ja({message:"Fail to get vimeo upload link",error:u,meta:{mediaType:f,type:m,name:h,size:g}}));case 25:return v.abrupt("return",!1);case 26:if(!d.maxUploadsReached){v.next=33;break}return v.next=30,Object(l_.put)(Qr({modalType:"upgrade"}));case 30:return v.next=32,Object(l_.put)(na());case 32:return v.abrupt("return",!0);case 33:return v.next=35,Object(l_.call)(gS,{i18nContent:e,videoFile:n,stagingVideo:d});case 35:return v.abrupt("return",!1);case 36:case"end":return v.stop()}}),II)}function pS(e){var t,n,r,a,o,i,s,c;return ad.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload,!e.closeChannel){u.next=20;break}if(n=t.uploadChannel,r=t.videoSize,a=t.stagingVideo,o=t.errorInfo,n.close(),!o){u.next=12;break}return i=o.i18nContent,s=o.videoName,u.next=8,Object(l_.put)(na());case 8:return u.next=10,Object(l_.call)(sI,i,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:s}}));case 10:u.next=18;break;case 12:return u.next=14,Object(l_.call)(bS);case 14:return u.next=16,Object(l_.put)(na({videoSize:r,stagingVideo:a}));case 16:return u.next=18,Object(l_.spawn)(oS);case 18:u.next=23;break;case 20:return c=t.percentage,u.next=23,Object(l_.put)(ta(c));case 23:case"end":return u.stop()}}),SI)}function fS(e,t,n){e.put({payload:{uploadChannel:e,errorInfo:{i18nContent:t,videoName:n}},closeChannel:!0})}function mS(e,t,n){var r=(t/n*100).toFixed(2);e.put({payload:{percentage:r}})}function hS(e,t,n){var r=t.size;e.put({payload:{uploadChannel:e,videoSize:r,stagingVideo:n},closeChannel:!0})}function gS(e){var t,n,r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.i18nContent,n=e.videoFile,r=e.stagingVideo,c.next=3,Object(l_.call)(pg.channel);case 3:return a=c.sent,o=r.upload_link,c.next=7,Object(l_.takeEvery)(a,pS);case 7:return c.next=9,Object(l_.select)(Ps);case 9:return i=c.sent,s=i.api,c.next=13,Object(l_.call)(R_,s.videos.push,{uploadLink:o,videoFile:n,errorCallback:fS.bind(null,a,t,n.name),progressCallback:mS.bind(null,a),completeCallback:hS.bind(null,a,n,r)});case 13:case"end":return c.stop()}}),wI)}function vS(e,t){var n,r,a,o,i,s;return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload,r=n.key,a=n.status,o=n.payload,a!==mg.SUCCESS){e.next=24;break}e.t0=r,e.next=e.t0===zI?5:e.t0===HI?10:e.t0===KI?16:23;break;case 5:return e.next=7,Object(l_.put)(Aa());case 7:return e.next=9,Object(l_.call)(ZI);case 9:return e.abrupt("break",24);case 10:if(!o||!o.videoDeleted){e.next=15;break}return e.next=13,Object(l_.put)(oa());case 13:return e.next=15,Object(l_.call)(eS);case 15:return e.abrupt("break",24);case 16:return e.next=18,Object(l_.select)(ac);case 18:return i=e.sent,s=i.selectedItems,e.next=22,Object(l_.put)({type:GI,payload:{selectedItems:s}});case 22:return e.abrupt("break",24);case 23:return e.abrupt("return");case 24:case"end":return e.stop()}}),TI)}function bS(){var e,t;return ad.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l_.select)(Qs);case 2:if(e=n.sent,0!==e.totalVideosInAccount){n.next=12;break}return n.next=7,Object(l_.select)(qs);case 7:if(t=n.sent,t.convertedOn){n.next=12;break}return n.next=12,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_VIMEO_SHADOW_FIRST_UPLOAD"}});case 12:case"end":return n.stop()}}),kI)}function yS(){var e,t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l_.select)(js);case 2:return e=s.sent,s.next=5,Object(l_.select)(Qs);case 5:if(t=s.sent,n=t.totalVideosLoaded,r=t.totalVideosInAccount,a=t.uploadedVideosSearchQuery,n!==r){s.next=11;break}return s.abrupt("return");case 11:return o=Math.min(e.pageSize,100),i=Math.round(n/o)+1,s.next=15,Object(l_.put)(Hr({page:i,pageSize:o,search:a}));case 15:case"end":return s.stop()}}),CI)}function OS(){var e,t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l_.select)(js);case 2:return e=o.sent,t=e.rootDomain,n=e.websiteId,o.next=7,Object(l_.select)(Ps);case 7:return r=o.sent,a=r.api,o.next=11,Object(l_.call)(R_,a.videos.removeUserConnection,{rootDomain:t,websiteId:n});case 11:return o.next=13,Object(l_.call)(sS);case 13:return o.next=15,Object(l_.put)(Xr({redirectAction:WI}));case 15:case"end":return o.stop()}}),xI)}function ES(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.takeEvery)(DI,vS,e);case 2:return t.next=4,Object(l_.takeEvery)(PI,uS,e);case 4:return t.next=6,Object(l_.takeEvery)(jI,JI);case 6:return t.next=8,Object(l_.takeEvery)(LI,tS);case 8:return t.next=10,Object(l_.takeEvery)(RI,ZI);case 10:return t.next=12,Object(l_.takeEvery)(MI,eS);case 12:return t.next=14,Object(l_.takeEvery)(NI,cS);case 14:return t.next=16,Object(l_.takeEvery)(UI,lS,e);case 16:return t.next=18,Object(l_.takeEvery)(FI,rS);case 18:return t.next=20,Object(l_.takeLatest)(BI,OS);case 20:return t.next=22,Object(l_.takeEvery)(VI,yS);case 22:case"end":return t.stop()}}),AI)}var _S=function(e){var t=e.imageUrl,n=e.isExternal,r=void 0!==n&&n,a=e.id;return new Promise((function(e){var n=new Image;n.onload=function(){e({localDimensions:{width:n.width,height:n.height},id:a})},n.onerror=function(){e({localDimensions:{width:200,height:175},id:a})},n.src=r?t:pi(t)}))};function IS(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return SS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function SS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wS=ad.a.mark(xS),TS=ad.a.mark(AS),kS=ad.a.mark(DS),CS=ad.a.mark(PS);function xS(e){var t;return ad.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l_.all)(e);case 2:return t=n.sent,n.next=5,Object(l_.put)(Ka(t));case 5:case"end":return n.stop()}}),wS)}function AS(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=void 0===t?[]:t,r=[],h.next=4,Object(l_.select)(sc);case 4:a=h.sent,o=IS(n),h.prev=6,o.s();case 8:if((i=o.n()).done){h.next=22;break}if(s=i.value,c=s.id,l=s.imageUrl,u=s.sourceType,d=s.dimensions,p=s.mediaType,f=a[c],![it,st].includes(p)){h.next=20;break}if(d||f){h.next=20;break}if(m=u===Me||u===Le||u===Ae,r.push(Object(l_.call)(_S,{imageUrl:l,isExternal:m,id:c})),10!==r.length){h.next=20;break}return h.next=19,Object(l_.call)(xS,r);case 19:r=[];case 20:h.next=8;break;case 22:h.next=27;break;case 24:h.prev=24,h.t0=h.catch(6),o.e(h.t0);case 27:return h.prev=27,o.f(),h.finish(27);case 30:if(!(r.length>0)){h.next=33;break}return h.next=33,Object(l_.call)(xS,r);case 33:return h.next=35,Object(l_.put)(Wa());case 35:case"end":return h.stop()}}),TS,null,[[6,24,27,30]])}function DS(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.call)(AS,{payload:e});case 2:case"end":return t.stop()}}),kS)}function PS(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(Mt.IM_PAGE_DIMENSIONS_GET,AS);case 2:case"end":return e.stop()}}),CS)}var jS=ad.a.mark(qS),MS=ad.a.mark(YS),LS=ad.a.mark(XS),RS=ad.a.mark(QS),NS=ad.a.mark(ZS),US=ad.a.mark(JS);function FS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FS(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BS=Mt.IM_API_STATUS_CHANGE,GS=Mt.IM_SITE_IMAGES_LOAD,zS=Mt.IM_IMAGES_COPY_INSERT,HS=Mt.IM_LOAD_OTHER_MEDIA,KS=hg.SITE_IMAGES_COPY,WS=mg.FAIL;function qS(){var e,t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Object(l_.select)(js);case 2:return e=h.sent,t=e.rootDomain,n=e.containerId,r=e.featureFlags,a=(r=void 0===r?{}:r).enableLocalStorage,h.next=10,Object(l_.select)(tc);case 10:if(o=h.sent,!o.websitesLoaded){h.next=14;break}return h.abrupt("return");case 14:return h.next=16,Object(l_.select)(Ps);case 16:return i=h.sent,s=i.api,c=i.localDataStore,l=i.assetContainerId,h.next=22,Object(l_.select)(Fl);case 22:if(u=h.sent,d=u.difyCustomerId,!a||d){h.next=40;break}return h.next=27,Object(l_.call)(aI,s.otherSites.loadVentures.key,c.getVenturesFromLS,{containerId:n,assetContainerId:l});case 27:if(f=h.sent,f.error){h.next=35;break}return h.next=32,Object(l_.call)(aI,s.otherSites.loadVentures.key,c.getVenturesFromApiAndSyncLS,{containerId:n,rootDomain:t,assetContainerId:l});case 32:p=h.sent,h.next=38;break;case 35:return h.next=37,Object(l_.call)(R_,s.otherSites.loadVentures,{rootDomain:t});case 37:p=h.sent;case 38:h.next=43;break;case 40:return h.next=42,Object(l_.call)(R_,s.otherSites.loadVentures,VS({rootDomain:t},d?{customerId:d}:{}));case 42:p=h.sent;case 43:if(!((m=p.data.ventures)&&m.length<=1)){h.next=47;break}return h.next=47,Object(l_.put)(La(wl));case 47:return h.next=49,Object(l_.call)(R_,s.otherSites.loadV7Sites,{rootDomain:t});case 49:case"end":return h.stop()}}),jS)}function YS(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.containerId,r=t.type,g.next=3,Object(l_.select)(js);case 3:return a=g.sent,o=a.rootDomain,g.next=7,Object(l_.select)(tc);case 7:if(i=g.sent,s=i.websites,!(c=s.find((function(e){return e.id===n})))||c.imagesLoaded){g.next=24;break}return g.next=13,Object(l_.select)(Ps);case 13:return u=g.sent,d=u.api,l={},h()(l,xe,"loadGCSiteImages"),h()(l,"venture","loadVentureImages"),h()(l,Ne,"loadGCSiteImages"),h()(l,Ae,"loadV7SiteImages"),p=l,g.next=18,Object(l_.call)(R_,d.otherSites[p[r]]||d.otherSites.loadGCSiteImages,{rootDomain:o,containerId:n},Ed.bind(null,r));case 18:if(f=g.sent,m=f.data,f.error){g.next=24;break}return g.next=24,Object(l_.call)(DS,m);case 24:case"end":return g.stop()}}),MS)}function XS(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g,v,b,y,O,E,_,I;return ad.a.wrap((function(S){for(;;)switch(S.prev=S.next){case 0:if(n=t.payload,r=n.images,a=n.type,Ge.includes(a)){S.next=3;break}return S.abrupt("return");case 3:return S.next=5,Object(l_.select)(js);case 5:return o=S.sent,i=o.containerId,s=o.rootDomain,c=o.featureFlags,u=(c=void 0===c?{}:c).enableLocalStorage,S.next=13,Object(l_.select)(Ls);case 13:if(d=S.sent,f=d.uploaded,m=$S(r,f),h=m.nonExistingImages,g=m.selectedImages,0!==h.length){S.next=20;break}return S.next=19,g;case 19:return S.abrupt("return",S.sent);case 20:return S.next=22,Object(l_.all)(h.map((function(e){return e.dimensions?null:Object(l_.call)(Bc,{imageUrl:e.url})})));case 22:return v=S.sent,b=h.map((function(e,t){return VS(VS({},e),e.dimensions||v[t].dimensions||{})})),S.next=26,Object(l_.select)(Ps);case 26:return y=S.sent,O=y.api,E=y.localDataStore,S.prev=29,S.next=32,Object(l_.call)(R_,O.images.copy,{containerId:i,rootDomain:s,images:b,type:a},gd);case 32:if(_=S.sent,I=_.data,!u){S.next=37;break}return S.next=37,Object(l_.spawn)(E.addImportedImages,{containerId:i,assets:I});case 37:return S.next=39,[].concat(gs()(g),gs()(I));case 39:return S.abrupt("return",S.sent);case 42:return S.prev=42,S.t0=S.catch(29),S.next=46,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"INSERT_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"INSERT_ERROR_MESSAGE"}));case 46:case"end":return S.stop()}}),LS,null,[[29,42]])}function QS(e,t){var n;return ad.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l_.call)(XS,e,t);case 2:return n=r.sent,r.next=5,Object(l_.put)(ua({selectedItems:n}));case 5:case"end":return r.stop()}}),RS)}function $S(e,t){var n=[],r=[];return e.forEach((function(e){if(e.filename){var a=t.find((function(t){return e.eTag?e.eTag===t.eTag:e.filename===t.filename}));a?r.push(a):n.push(e)}else n.push(e)})),{nonExistingImages:n,selectedImages:r}}function ZS(e){var t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.key,n=e.status,r=e.payload,t!==KS||n!==WS){a.next=4;break}return a.next=4,Object(l_.put)(Ja({message:"Received ".concat(r.status||"unknown"," status from failed request to ").concat(t),error:r}));case 4:case"end":return a.stop()}}),NS)}function JS(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.takeEvery)(HS,qS);case 2:return t.next=4,Object(l_.takeEvery)(BS,ZS);case 4:return t.next=6,Object(l_.takeEvery)(GS,YS);case 6:return t.next=8,Object(l_.takeEvery)(zS,QS,e);case 8:case"end":return t.stop()}}),US)}var ew=function(e,t){var n=t[e],r=new RegExp("([a-zA-Z0-9]+.)".concat(n)),a=Object(P.get)(window,"location.href","").match(r);return a&&a.length&&a[0]||n},tw=ad.a.mark(hw),nw=ad.a.mark(gw),rw=ad.a.mark(vw),aw=ad.a.mark(bw),ow=ad.a.mark(yw),iw=ad.a.mark(Ow),sw=ad.a.mark(Ew),cw=ad.a.mark(_w),lw=Mt.IM_SOCIAL_ACCESS_TOKEN_GET,uw=Mt.IM_SOCIAL_FB_ALBUMS_LOAD,dw=Mt.IM_SOCIAL_FB_PHOTOS_LOAD,pw=Mt.IM_SOCIAL_IG_POST_LOAD,fw=Mt.IM_SOCIAL_SWITCH_PROVIDER,mw=function(e){return e.includes("manage_pages")||e.includes("pages_read_engagement")};function hw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y;return ad.a.wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return t=e.socialProvider,O.next=3,Object(l_.select)(nc);case 3:if(n=O.sent,r=n.selectedProvider,a=n[Me],o=a.auth.accessToken,i=a.selectedPageId,s=o,r===Me){O.next=11;break}return O.abrupt("return");case 11:if(!s||!i){O.next=13;break}return O.abrupt("return");case 13:return O.next=15,Object(l_.put)(Ta());case 15:return O.next=17,Object(l_.select)(js);case 17:return c=O.sent,l=c.rootDomain,O.next=21,Object(l_.select)(Ps);case 21:if(u=O.sent,d=u.api,s){O.next=29;break}return O.next=26,Object(l_.call)(R_,d.sso.getSocialAccessToken,{rootDomain:l,socialProvider:t});case 26:p=O.sent,f=p.data,s=Object(P.get)(f,"data.access_token",null);case 29:if(s){O.next=35;break}return O.next=32,Object(l_.call)(gw,{rootDomain:l,socialProvider:t});case 32:return O.next=34,Object(l_.put)(ka());case 34:return O.abrupt("return");case 35:return O.next=37,Object(l_.call)(R_,d.social.validateFBAccessToken,{rootDomain:l,accessToken:s});case 37:if(m=O.sent,h=m.data.data,g=(h=void 0===h?{}:h).isValid,v=h.scopes,b=void 0===v?[]:v,g&&mw(b)){O.next=47;break}return O.next=44,Object(l_.call)(gw,{rootDomain:l,socialProvider:t});case 44:return O.next=46,Object(l_.put)(ka());case 46:return O.abrupt("return");case 47:return O.next=49,Object(l_.put)(ga({accessToken:s,socialProvider:t}));case 49:return O.next=51,Object(l_.call)(vw,{payload:{accessToken:s}});case 51:if(!((y=O.sent).length>0)){O.next=55;break}return O.next=55,Object(l_.call)(bw,{payload:{accessToken:s,pageId:y[0].id}});case 55:return O.next=57,Object(l_.put)(ka());case 57:return O.next=59,Object(l_.call)(Ow);case 59:case"end":return O.stop()}}),tw)}function gw(e){var t,n,r,a,o,i,s,c,l,u,d;return ad.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.rootDomain,n=e.socialProvider,p.next=3,Object(l_.select)(Ms);case 3:return r=p.sent,a=r.appName,o=r.appSocialMediaAuthPath,i=r.appNameSubdomainMappings,s={socialProvider:n,rootDomain:t,app:ew(a,i),appSocialMediaAuthPath:o},p.next=10,Object(l_.select)(Ps);case 10:return c=p.sent,l=c.api,p.next=14,Object(l_.call)(R_,l.sso.getSocialAuthUrl,s);case 14:return u=p.sent,d=u.data.data,p.next=18,Object(l_.put)(va({socialProvider:n,authUrl:d}));case 18:case"end":return p.stop()}}),nw)}function vw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O;return ad.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload.accessToken,E.next=3,Object(l_.select)(js);case 3:return n=E.sent,r=n.rootDomain,a=n.accountId,o=n.inWebsiteContext,E.next=9,Object(l_.select)(nc);case 9:if(i=E.sent,s=i[Le],c=s.connected,l=s.authorized,u=i[Me],d=u.pagesLoaded,p=u.pages,!d){E.next=18;break}return E.abrupt("return",p);case 18:return E.next=20,Object(l_.select)(Ps);case 20:if(f=E.sent,m=f.api,!o||!a){E.next=45;break}if(E.prev=23,null!==(h=c)){E.next=30;break}return E.next=28,Object(l_.call)(R_,m.social.checkIGConnected,{rootDomain:r,accountId:a});case 28:g=E.sent,h=g.data.payload.ok;case 30:if(null!==(v=l)){E.next=36;break}return E.next=34,Object(l_.call)(R_,m.social.checkIGAuthorized,{rootDomain:r,accountId:a});case 34:b=E.sent,v=b.data.payload.ok;case 36:if(!h||!v){E.next=39;break}return E.next=39,Object(l_.call)(R_,m.social.loadIGListing,{rootDomain:r,accountId:a});case 39:E.next=45;break;case 41:return E.prev=41,E.t0=E.catch(23),E.next=45,Object(l_.put)(Ja({message:"Fail to connect IG with social-sdk api",error:E.t0}));case 45:return E.next=47,Object(l_.call)(R_,m.social.loadFBPages,{rootDomain:r,accessToken:t});case 47:return y=E.sent,O=y.data,E.abrupt("return",Object(P.get)(O,"data",[]));case 50:case"end":return E.stop()}}),rw,null,[[23,41]])}function bw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.accessToken,r=t.pageId,a=t.after,h.next=3,Object(l_.select)(js);case 3:return o=h.sent,i=o.rootDomain,s=o.pageSize,h.next=8,Object(l_.select)(nc);case 8:if(c=h.sent,l=c[Me].pages,u=c.selectedProvider,d=l[r]||{},p=d.albumsLoaded,!(d.albumsAllLoaded||p&&!a)){h.next=20;break}return h.next=16,Object(l_.put)(_a({pageId:r}));case 16:if(u===Me){h.next=19;break}return h.next=19,Object(l_.put)(ba(Me));case 19:return h.abrupt("return");case 20:return h.next=22,Object(l_.select)(Ps);case 22:return f=h.sent,m=f.api,h.next=26,Object(l_.call)(R_,m.social.loadFBAlbums,{rootDomain:i,accessToken:n,pageId:r,pageSize:s,after:a});case 26:if(u===Me){h.next=29;break}return h.next=29,Object(l_.put)(ba(Me));case 29:case"end":return h.stop()}}),aw)}function yw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return ad.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.accessToken,r=t.albumId,a=t.after,g.next=3,Object(l_.select)(js);case 3:return o=g.sent,i=o.rootDomain,s=o.pageSize,g.next=8,Object(l_.select)(nc);case 8:if(c=g.sent,l=c[Me],u=l.pages,d=l.selectedPageId,p=u[d].albums[r],f=p.photosLoaded,!(p.photosAllLoaded||f&&!a)){g.next=17;break}return g.next=16,Object(l_.put)(Ia({albumId:r}));case 16:return g.abrupt("return");case 17:return g.next=19,Object(l_.select)(Ps);case 19:return m=g.sent,h=m.api,g.next=23,Object(l_.call)(R_,h.social.loadFBPhotos,{rootDomain:i,accessToken:n,albumId:r,pageSize:s,after:a},yd);case 23:case"end":return g.stop()}}),ow)}function Ow(){var e,t,n,r,a,o,i,s,c,l,u,d,p,f;return ad.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Object(l_.select)(nc);case 2:return e=m.sent,t=e[Le],n=t.hasPostsFetched,r=t.connected,a=t.authorized,o=t.nextPostsPageUrl,i=e[Me].auth.accessToken,m.next=11,Object(l_.select)(js);case 11:if(s=m.sent,c=s.rootDomain,l=s.accountId,s.inWebsiteContext&&l&&r&&a&&i){m.next=17;break}return m.abrupt("return");case 17:if(n&&!o){m.next=32;break}return m.next=20,Object(l_.put)(Oa());case 20:return m.next=22,Object(l_.select)(Ps);case 22:return u=m.sent,d=u.api,m.next=26,Object(l_.call)(R_,d.social.loadIGPosts,{rootDomain:c,accountId:l,nextPostsPageUrl:o},Od);case 26:return p=m.sent,f=p.data.posts,m.next=30,Object(l_.call)(DS,f);case 30:return m.next=32,Object(l_.put)(Ea());case 32:case"end":return m.stop()}}),iw)}function Ew(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payload.socialProvider!==Le){t.next=4;break}return t.next=4,Object(l_.call)(Ow);case 4:case"end":return t.stop()}}),sw)}function _w(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(lw,hw);case 2:return e.next=4,Object(l_.takeEvery)(uw,bw);case 4:return e.next=6,Object(l_.takeEvery)(dw,yw);case 6:return e.next=8,Object(l_.takeEvery)(pw,Ow);case 8:return e.next=10,Object(l_.takeEvery)(fw,Ew);case 10:case"end":return e.stop()}}),cw)}var Iw=ad.a.mark(Tw),Sw=ad.a.mark(kw),ww=Mt.IM_OPEN_MODAL;function Tw(){var e,t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l_.select)(js);case 2:if(e=o.sent,t=e.rootDomain,n=e.accountId,e.isWebsitelessContainer){o.next=13;break}return o.next=9,Object(l_.select)(Ps);case 9:return r=o.sent,a=r.api,o.next=13,Object(l_.call)(R_,a.vnext.getPlanFeatures,{rootDomain:t,accountId:n});case 13:case"end":return o.stop()}}),Iw)}function kw(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(ww,Tw);case 2:case"end":return e.stop()}}),Sw)}var Cw=ad.a.mark(Pw),xw=ad.a.mark(jw),Aw=ad.a.mark(Mw);function Dw(e,t){var n=e.permission,r=void 0===n?{}:n;return t&&r.delete||r.download}function Pw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m,h;return ad.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.item,r=t.autoselect,a=t.enableDelete,o=t.selectionLimit,i=t.preloadParams,g.next=3,Object(l_.select)(ac);case 3:if(s=g.sent,c=s.selectedItemsById,l=s.selectedItems,u=n.id,d=n.imageUrl,i&&((new Image).src="".concat(d).concat(i)),p=c.has(u),f=o>1&&l.length>=o,m=!r&&Dw(n,a),h=[],1!==o||m||p){g.next=15;break}l.length&&h.push(l[0]),g.next=17;break;case 15:if(!f||p||m){g.next=17;break}return g.abrupt("return");case 17:return h.push(n),g.next=20,Object(l_.put)(ja(h));case 20:case"end":return g.stop()}}),Cw)}function jw(e){var t,n,r,a,o,i,s,c,l,u,d,p;return ad.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.item,r=t.dataSource,a=t.enableDelete,o=t.selectionLimit,f.next=4,Object(l_.select)(ac);case 4:if(i=f.sent,s=i.anchor){f.next=10;break}return f.next=9,Object(l_.put)(xa(t));case 9:return f.abrupt("return");case 10:if(-1!==(c=r.findIndex((function(e){return e.id===s.id})))){f.next=15;break}return f.next=14,Object(l_.put)(xa(t));case 14:return f.abrupt("return");case 15:return l=r.findIndex((function(e){return e.id===n.id})),u=Math.min(c,l),d=Math.max(c,l),p=r.slice(u,d+1),c===d&&p.reverse(),f.next=22,Object(l_.put)(Pa({items:p,selectionLimit:o,allowUnlimitedSelect:Dw(n,a)}));case 22:case"end":return f.stop()}}),xw)}function Mw(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeLatest)(Mt.IM_SELECTION_ITEM_CLICKED,Pw);case 2:return e.next=4,Object(l_.takeLatest)(Mt.IM_SELECTION_ITEM_SHIFT_CLICKED,jw);case 4:case"end":return e.stop()}}),Aw)}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nw=ad.a.mark(Gw),Uw=ad.a.mark(zw),Fw=ad.a.mark(Hw),Vw=ad.a.mark(Kw),Bw=ad.a.mark(Ww);function Gw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return ad.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=e.isNewUpload,r=void 0!==n&&n,t=Array.isArray(t)?t:[t],m.next=4,Object(l_.select)(js);case 4:return a=m.sent,o=a.searchClient,m.next=8,Object(l_.select)(Gs);case 8:if(i=m.sent,(0===(s=i.olsImages||[]).length||r)&&(s=ws(t).olsImages),c=new Set(s.map((function(e){return e.id}))),!((l=Object(P.filter)(t,(function(e){return c.has(e.id)}))).length>0)){m.next=16;break}return m.next=16,o.indexResource({resourceName:i.pathToDataSource.join("."),resource:l,resourceIndexFields:["id","altText","originalFilename"]});case 16:return m.next=18,Object(l_.select)(Bs);case 18:if(u=m.sent,(0===(d=u.uploadedImages?u.uploadedImages:[]).length||r)&&(d=ws(t).gcImages),p=new Set(d.map((function(e){return e.id}))),!((f=Object(P.filter)(t,(function(e){return p.has(e.id)})).map((function(e){return e.references&&(e.flattenedReferences=e.references.join()),e}))).length>0)){m.next=26;break}return m.next=26,o.indexResource({resourceName:u.pathToDataSource.join("."),resource:f,resourceIndexFields:["id","altText","originalFilename","flattenedReferences"]});case 26:case"end":return m.stop()}}),Nw)}function zw(e){var t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.searchText,s.next=3,Object(l_.select)(js);case 3:return n=s.sent,r=n.searchClient,s.next=7,r.search({text:t});case 7:return a=s.sent,s.next=10,Object(l_.put)(Ya({searchResults:a}));case 10:if(!t){s.next=14;break}return i=Object(P.get)(a,["images.uploaded","size"],0),s.next=14,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_UPLOADED_IMAGES_SEARCH",data:(o={},h()(o,"search query",t),h()(o,"search results count",i),o)}});case 14:case"end":return s.stop()}}),Uw)}function Hw(e){var t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.docs,a.next=3,Object(l_.select)(js);case 3:return n=a.sent,r=n.searchClient,a.next=7,r.remove(t);case 7:case"end":return a.stop()}}),Fw)}function Kw(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return ad.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,n=t.key,r=t.status,a=t.payload,o=t.requestArgs,m.next=3,Object(l_.select)(js);case 3:if(i=m.sent,s=i.featureFlags,!(void 0===s?{}:s).disableFulltextSearch){m.next=8;break}return m.abrupt("return");case 8:if(r===mg.SUCCESS){m.next=10;break}return m.abrupt("return");case 10:if(n!==hg.IMAGES_LOAD){m.next=23;break}if(!a.upsertList||!a.deleteList){m.next=18;break}return m.next=14,Object(l_.spawn)(Gw,{payload:a.upsertList});case 14:return m.next=16,Object(l_.spawn)(Hw,{payload:{docs:a.deleteList}});case 16:m.next=21;break;case 18:return c=Array.isArray(a)?a:a.images,m.next=21,Object(l_.spawn)(Gw,{payload:c});case 21:m.next=40;break;case 23:if(n!==hg.IMAGE_UPLOAD&&n!==hg.SITE_IMAGES_COPY){m.next=28;break}return m.next=26,Object(l_.spawn)(Gw,{payload:a,isNewUpload:!0});case 26:m.next=40;break;case 28:if(n!==hg.IMAGES_DELETE){m.next=33;break}return m.next=31,Object(l_.spawn)(Hw,{payload:a});case 31:m.next=40;break;case 33:if(n!==hg.IMAGES_UPDATE){m.next=40;break}return l=o[0],u=l.assetId,d=l.update,p=(d=void 0===d?{}:d).metadata,f=Rw({id:u},void 0===p?{}:p),m.next=40,Object(l_.spawn)(Gw,{payload:f});case 40:case"end":return m.stop()}}),Vw)}function Ww(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeLatest)(Mt.IM_ASSET_SEARCH,zw);case 2:return e.next=4,Object(l_.takeLatest)(Mt.IM_API_STATUS_CHANGE,Kw);case 4:case"end":return e.stop()}}),Bw)}var qw=function(e,t,n){return e===Sl||e===wl?e:t?n?"".concat(e,"-").concat(n):e:"".concat(Tl,"-").concat(e)},Yw=ad.a.mark(Jw),Xw=ad.a.mark(eT),Qw=ad.a.mark(tT),$w=ad.a.mark(nT),Zw=ad.a.mark(rT);function Jw(e){var t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,n=t.eventName,r=t.meta,n!==wl){o.next=10;break}return o.next=4,Object(l_.select)(cc);case 4:if(a=o.sent,null===a.isLoadingVenture){o.next=8;break}return o.abrupt("return");case 8:return o.next=10,Object(l_.put)(Ra());case 10:return o.next=12,Object(l_.call)(Ah.beginEvent,qw(n,!0),r);case 12:case"end":return o.stop()}}),Yw)}function eT(e){var t,n,r,a,o,i,s,c,l,u,d,p;return ad.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.payload,n=t.eventName,r=t.meta,n!==wl){f.next=10;break}return f.next=4,Object(l_.select)(cc);case 4:if(a=f.sent,!1!==a.isLoadingVenture){f.next=8;break}return f.abrupt("return");case 8:return f.next=10,Object(l_.put)(Na());case 10:return f.next=12,Object(l_.select)(cc);case 12:if(o=f.sent,i=o.isFirstBeacon,o.isPerfEndTracked&&n!==Sl&&n!==wl){f.next=31;break}return f.next=18,Object(l_.select)(js);case 18:return s=f.sent,c=s.featureFlags,l=s.ffEnabledForPerf,f.next=23,Object(l_.select)(Ls);case 23:return u=f.sent,d=u.firstLaunchBeaconSuffix,p={meta:r},c[l]&&(p.feature=l),f.next=29,Object(l_.call)(Ah.endEvent,qw(n,i,d),p);case 29:return f.next=31,Object(l_.put)(Ua());case 31:case"end":return f.stop()}}),Xw)}function tT(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.call)(Ah.clearAllMarks);case 2:case"end":return e.stop()}}),Qw)}function nT(e){var t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.bbConfig.debug.timeoutBeforeLog,n=void 0===t?2e4:t,o.next=3,Object(l_.delay)(n);case 3:return o.next=5,Object(l_.select)(ic);case 5:if(r=o.sent,!r.uploadedAssetsFetched){o.next=9;break}return o.abrupt("return");case 9:return o.next=11,Object(l_.select)(GE);case 11:return a=o.sent,o.next=14,Object(l_.put)(Ja({message:"Media Lib is in indefinite spin state",meta:a}));case 14:case"end":return o.stop()}}),$w)}function rT(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.takeEvery)(Mt.IM_OPEN_MODAL,nT,e);case 2:return t.next=4,Object(l_.takeEvery)(Mt.IM_PERF_TRACK_BEGIN,Jw);case 4:return t.next=6,Object(l_.takeEvery)(Mt.IM_PERF_TRACK_END,eT);case 6:return t.next=8,Object(l_.takeLatest)(Mt.IM_MODAL_HIDE,tT);case 8:case"end":return t.stop()}}),Zw)}var aT=ad.a.mark(iT),oT=ad.a.mark(sT);function iT(e){var t,n,r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.products,c.next=3,Object(l_.select)(js);case 3:return n=c.sent,r=n.rootDomain,a=n.websiteId,c.next=8,Object(l_.select)(Ps);case 8:return o=c.sent,i=o.api,c.next=12,Object(l_.all)(t.map((function(e){var t=e.id;return Object(l_.call)(R_,i.products.fetch,{rootDomain:r,websiteId:a,id:t},Sd)})));case 12:return s=c.sent,c.next=15,Object(l_.put)(ua({selectedItems:s.map((function(e){return e.data}))}));case 15:case"end":return c.stop()}}),aT)}function sT(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(Mt.IM_INSERT_PRODUCTS,iT);case 2:case"end":return e.stop()}}),oT)}var cT=ad.a.mark(hT),lT=ad.a.mark(gT);function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uT(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pT=Mt.IM_LOGGER_WARN,fT=Mt.IM_LOGGER_ERROR,mT=Mt.IM_LOGGER_INFO;function hT(e,t){var n,r,a,o,i,s,c,l=arguments;return ad.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:{},r=n.payload,a=void 0===r?{}:r,"function"==typeof e){u.next=3;break}return u.abrupt("return");case 3:return o=a.message,i=a.error,s=a.meta,u.next=6,Object(l_.select)(js);case 6:return c=u.sent,u.next=9,Object(l_.call)(Vu,{level:t,message:o,error:i,meta:s,props:dT({postLog:e},c)});case 9:case"end":return u.stop()}}),cT)}function gT(e){var t;return ad.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.postLog,n.next=3,Object(l_.takeEvery)(mT,hT,t,ts);case 3:return n.next=5,Object(l_.takeEvery)(pT,hT,t,ns);case 5:return n.next=7,Object(l_.takeEvery)(fT,hT,t,rs);case 7:case"end":return n.stop()}}),lT)}var vT=ad.a.mark(_T),bT=ad.a.mark(IT);function yT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yT(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ET=Mt.IM_UPDATE_COVER_IMAGE;function _T(e,t){var n,r,a,o,i,c,l,u,d,p,f,m,h,g,v,b,y,O,E,_;return ad.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:if(n=t.payload.image){I.next=3;break}return I.abrupt("return");case 3:if(!He.includes(n.sourceType)){I.next=7;break}return I.next=6,Object(l_.call)(XS,e,{payload:{images:[n],type:n.sourceType}});case 6:n=I.sent[0];case 7:return r=n.imageUrl,I.next=10,Object(l_.select)(Ms);case 10:return a=I.sent,o=a.headerWidget,I.next=14,Object(l_.select)(js);case 14:return i=I.sent,c=i.rootDomain,l=i.websiteId,d={},p=[],I.prev=18,I.next=21,Object(l_.all)([Object(l_.call)(yt.a.get,"".concat(r,"/:/$info")),Object(l_.call)(yt.a.get,"".concat(r,"/:/$colors=mc:10,mn:false,cc:4"))]);case 21:u=I.sent,f=u,m=s()(f,2),d=m[0].data.info,p=m[1].data.colors,I.next=30;break;case 28:I.prev=28,I.t0=I.catch(18);case 30:return h=o.data.background,g=o.id,v=o.pageId,b=Object(P.pick)(h,["filter","overlayAlpha","shrinkFit","treatmentLayout","useFixedHeight"]),y=OT(OT({},b),{},{image:r,alt:"",coordinates:{x:0,y:0},editedAspectRatio:"",height:"",left:"",position:"center",rotation:"",top:"",video:"",width:""}),Object(P.isEmpty)(d)||(y.oWidth=d.width,y.oHeight=d.height),Object(P.isEmpty)(p)||(y.colors=p.map((function(e){return{hex:e.hex,rgb:e.rgb,hsluv:e.hsluv}}))),O={id:l,pages:[{id:v,websiteId:l,widgets:[{data:{background:y},id:g,pageId:v}]}]},I.next=38,Object(l_.select)(Ps);case 38:return E=I.sent,_=E.api,I.next=42,Object(l_.call)(R_,_.vnext.updateHeaderWidget,{rootDomain:c,websiteId:l,data:O});case 42:return I.next=44,Object(l_.put)(ua({selectedItems:[n],placement:je}));case 44:case"end":return I.stop()}}),vT,null,[[18,28]])}function IT(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.takeEvery)(ET,_T,e);case 2:case"end":return t.stop()}}),bT)}var ST=ad.a.mark(CT),wT=ad.a.mark(xT),TT=ad.a.mark(AT),kT=Mt.IM_OPEN_MODAL;function CT(){var e,t,n,r,a,o,i,s,c,l,u;return ad.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(l_.select)(lc);case 2:if(e=d.sent,t=e.ventureId,n=e.businessName,!t||!n){d.next=7;break}return d.abrupt("return");case 7:return d.next=9,Object(l_.select)(Ps);case 9:return r=d.sent,a=r.api,d.next=13,Object(l_.select)(js);case 13:return o=d.sent,i=o.rootDomain,s=o.websiteId,c=o.ventureId,l=o.accountId,u=c||s||l,d.next=21,Object(l_.call)(R_,a.venture.getVentureById,{rootDomain:i,id:u});case 21:case"end":return d.stop()}}),ST)}function xT(){var e,t,n,r,a,o,i;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l_.select)(js);case 2:return e=s.sent,t=e.containerId,n=e.ventureId,r=e.rootDomain,s.next=8,Object(l_.select)(Ps);case 8:return a=s.sent,o=a.api,i=[Object(l_.call)(CT)],t!==n&&i.push(Object(l_.call)(R_,o.user.get,{rootDomain:r,containerId:t})),s.next=14,Object(l_.all)(i);case 14:return s.next=16,Object(l_.put)(ho());case 16:case"end":return s.stop()}}),wT)}function AT(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(kT,xT);case 2:case"end":return e.stop()}}),TT)}var DT=ad.a.mark(MT),PT=ad.a.mark(LT),jT=Mt.IM_INSERT_ITEMS;function MT(e){var t,n,r,a,o,i,s,c,l,u,d,p;return ad.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if((t=e.payload.selectedItems)&&1===t.length){f.next=3;break}return f.abrupt("return");case 3:return f.next=5,Object(l_.select)(js);case 5:return n=f.sent,r=n.placement,a=n.rootDomain,f.next=10,Object(l_.select)(lc);case 10:if(o=f.sent,i=o.ventureId,"LOGO"===r&&i){f.next=14;break}return f.abrupt("return");case 14:return f.next=16,Object(l_.select)(Ps);case 16:return s=f.sent,c=s.api,f.next=20,Object(l_.select)(Ms);case 20:return l=f.sent,u=l.appName,d=t[0],p=d.imageUrl,f.next=26,Object(l_.call)(R_,c.venture.updateVentureLogoUrl,{rootDomain:a,id:i,overwrite:u===Ve,logoUrl:p});case 26:case"end":return f.stop()}}),DT)}function LT(){return ad.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l_.takeEvery)(jT,MT);case 2:case"end":return e.stop()}}),PT)}function RT(e){if(e&&!e.isStockMedia&&e.sourceType!==Re)return Object(P.pick)(e,["altText","references","dify"])}function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NT(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FT=function(e){var t,n=kt(e).spaq;return UT(UT({},n),{},{launchSuccessful:!!(null===(t=n.client.traces[kl])||void 0===t?void 0:t.end)})},VT=ad.a.mark(KT),BT=ad.a.mark(WT),GT=ad.a.mark(qT),zT=ad.a.mark(YT),HT=ad.a.mark(XT);function KT(e){var t;return ad.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l_.select)(FT);case 2:if(t=n.sent,!t.client.enabled){n.next=7;break}return n.next=7,Object(l_.put)(yo(e));case 7:case"end":return n.stop()}}),VT)}function WT(e){var t;return ad.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l_.select)(FT);case 2:if(t=n.sent,!t.client.enabled){n.next=7;break}return n.next=7,Object(l_.put)(Oo(e));case 7:case"end":return n.stop()}}),BT)}function qT(){var e,t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l_.select)(FT);case 2:if(e=a.sent,t=e.logged,n=Io()(e,["logged"]),t){a.next=15;break}if(r={spaq:n},n.launchSuccessful){a.next=11;break}return a.next=10,Object(l_.select)(GE);case 10:r.debug=a.sent;case 11:return a.next=13,Object(l_.put)(Za({message:"[spaq]: perf traces",meta:r}));case 13:return a.next=15,Object(l_.put)(bo());case 15:case"end":return a.stop()}}),GT)}function YT(e){return ad.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l_.delay)(e);case 2:return t.next=4,Object(l_.call)(qT);case 4:case"end":return t.stop()}}),zT)}function XT(e){var t,n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(t=e.bbConfig.spaq)){i.next=4;break}return i.next=4,Object(l_.put)(go(t));case 4:if(n=t.client,r=n.enabled,a=n.timeout,o=void 0===a?1e4:a,!r){i.next=10;break}return i.next=8,Object(l_.spawn)(YT,o);case 8:return i.next=10,Object(l_.takeEvery)(Mt.IM_SPAQ_LOG,qT);case 10:case"end":return i.stop()}}),HT)}var QT=ad.a.mark(JT);function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$T(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JT(e){var t,n,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O,E,_,I,S,w,T,k,C,x,A,D,j,M,L,R;return ad.a.wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.getState,n=e.dispatch,N.next=3,Object(l_.call)(KT,{name:Cl});case 3:return a=!1,N.prev=4,N.next=7,Object(l_.select)(js);case 7:return o=N.sent,i=o.urls,s=i.assetBaseUrl,c=i.assetBaseDataUrl,l=o.featureFlags.enableLocalStorage,u=o.rootDomain,d=void 0===u?"":u,p=o.containerId,f=void 0===p?"":p,m=[mt,ht,gt,vt].join("|"),h={rootDomain:d,containerId:f},N.next=20,Object(l_.select)(Ps);case 20:if(g=N.sent,v=g.api,b=g.localDataStore,y=g.assetContainerId,l){N.next=38;break}return N.next=27,Object(l_.put)(to("calling api to retrieve images when local storage is not enabled"));case 27:return N.next=29,Object(l_.call)(KT,{name:Dl});case 29:return N.next=31,Object(l_.call)(R_,v.images.load,ZT(ZT({},h),{},{folders:m}),gd);case 31:return O=N.sent,E=O.data,_=void 0===E?[]:E,N.next=36,Object(l_.call)(WT,{name:Dl,assetsCount:_.length});case 36:N.next=78;break;case 38:return N.next=40,Object(l_.put)(to("calling ls getUploadedImagesFromLS"));case 40:return N.next=42,Object(l_.call)(KT,{name:xl});case 42:return N.next=44,Object(l_.call)(aI,v.images.load.key,b.getUploadedImagesFromLS,ZT(ZT({},h),{},{assetBaseUrl:s,assetBaseDataUrl:c}));case 44:return I=N.sent,S=I.data,w=(S=void 0===S?{}:S).images,T=S.lastSyncedAt,k=I.error,N.next=50,Object(l_.call)(WT,{name:xl});case 50:if(k){N.next=70;break}return N.next=53,Object(l_.put)(to({message:"calling ls getUploadedImagesDiffAndSyncLS",imagesFromLSLength:w.length,lastSyncedAt:T}));case 53:return N.next=55,Object(l_.call)(KT,{name:Al});case 55:return N.next=57,Object(l_.call)(aI,v.images.load.key,b.getUploadedImagesDiffAndSyncLS,ZT(ZT({},h),{},{folders:m,assetBaseUrl:s,assetBaseDataUrl:c,images:w,lastSyncedAt:T}),{getState:t,dispatch:n});case 57:return(C=N.sent).error&&(a=!0),N.next=61,Object(l_.put)(to({message:"getUploadedImagesDiffAndSyncLS completed",upsertListLength:Object(P.get)(C,"data.upsertList.length"),deleteListLength:Object(P.get)(C,"data.deleteList.length")}));case 61:if(y){N.next=66;break}if(!(x=Object(P.get)(C,"data.assetContainerId"))){N.next=66;break}return N.next=66,Object(l_.put)(po(x));case 66:return N.next=68,Object(l_.call)(WT,{name:Al});case 68:N.next=78;break;case 70:return N.next=72,Object(l_.put)(to({message:"get error on fetching images from LS, switch to api instead",error:k}));case 72:return N.next=74,Object(l_.call)(KT,{name:Dl});case 74:return N.next=76,Object(l_.call)(R_,v.images.load,ZT(ZT({},h),{},{folders:m}),gd);case 76:return N.next=78,Object(l_.call)(WT,{name:Dl});case 78:return N.next=80,Object(l_.select)(Bs);case 80:return A=N.sent,D=A.uploadedImages,N.next=84,Object(l_.put)(to("calling backfillDimensions"));case 84:return N.next=86,Object(l_.call)(DS,D);case 86:return N.next=88,Object(l_.select)(BE);case 88:if(j=N.sent,M=j.startedAt,L=j.timeout,R=Date.now()-M,a||!(R>=L)){N.next=109;break}return N.t0=l_.put,N.t1=r,N.t2=ZT,N.t3=ZT,N.t4={},N.next=100,Object(l_.select)(GE);case 100:return N.t5=N.sent,N.t6=(0,N.t3)(N.t4,N.t5),N.t7={},N.t8={loadAssetElapsedTime:R},N.t9=(0,N.t2)(N.t6,N.t7,N.t8),N.t10={message:"load assets successfully",meta:N.t9},N.t11=N.t1.logWarning.call(N.t1,N.t10),N.next=109,(0,N.t0)(N.t11);case 109:N.next=123;break;case 111:return N.prev=111,N.t12=N.catch(4),N.t13=l_.put,N.t14=r,N.t15=N.t12,N.next=118,Object(l_.select)(GE);case 118:return N.t16=N.sent,N.t17={error:N.t15,message:"Hit error on loading images in saga",meta:N.t16},N.t18=N.t14.logError.call(N.t14,N.t17),N.next=123,(0,N.t13)(N.t18);case 123:return N.next=125,Object(l_.call)(WT,{name:Cl});case 125:case"end":return N.stop()}}),QT,null,[[4,111]])}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nk(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rk(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function rk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ak=ad.a.mark(Bk),ok=ad.a.mark(Gk),ik=ad.a.mark(zk),sk=ad.a.mark(Hk),ck=ad.a.mark(Kk),lk=ad.a.mark(Wk),uk=ad.a.mark(qk),dk=ad.a.mark(Yk),pk=ad.a.mark(Xk),fk=ad.a.mark(Qk),mk=ad.a.mark($k),hk=ad.a.mark(Zk),gk=ad.a.mark(Jk),vk=ad.a.mark(eC),bk=ad.a.mark(tC),yk=ad.a.mark(nC),Ok=ad.a.mark(rC),Ek=ad.a.mark(aC),_k=ad.a.mark(oC),Ik=ad.a.mark(iC),Sk=ad.a.mark(sC),wk=Fa,Tk=Ga,kk=Mt.IM_OPEN_MODAL,Ck=Mt.IM_STOCK_VIDEOS_SEARCH,xk=Mt.IM_STOCK_VIDEOS_RESET,Ak=Mt.IM_IMAGES_UPLOAD,Dk=Mt.IM_IMAGES_LOAD,Pk=Mt.IM_FILES_DELETE,jk=Mt.IM_FILES_UPLOAD,Mk=Mt.IM_IMAGE_METADATA_UPDATED,Lk=Mt.IM_INSERT_ITEMS,Rk=Mt.IM_PRE_INSERT_ITEMS,Nk=Mt.IM_DRAG_DROP_FILES_REJECTED,Uk=Mt.IM_MIXED_ASSET_NEXT_PAGE;function Fk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootDomain,n=void 0===t?"":t,r=e.containerId,a=void 0===r?"":r;return{rootDomain:n,containerId:a}}function Vk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rootDomain,n=e.containerId;return t&&n}function Bk(){var e,t,n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(l_.select)(js);case 2:return e=o.sent,t=e.market,n=e.businessCategory,r=e.rootDomain,a=e.pageSize,o.next=9,Object(l_.call)(Gk,{payload:{market:t,businessCategory:n,rootDomain:r,pageSize:a}});case 9:case"end":return o.stop()}}),ak)}function Gk(e){var t,n,r,a,o,i,s,c,l,u,d,p,f;return ad.a.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(t=e.payload,n=t.market,r=t.businessCategory,a=t.rootDomain,n&&r&&a){m.next=3;break}return m.abrupt("return");case 3:return m.next=5,Object(l_.select)(ec);case 5:if(o=m.sent,i=o.categoryStockVideos,s=sd.getStockVideosCacheKey({market:n,businessCategory:r}),c=i[s],Object(P.isEmpty)(c)){m.next=13;break}return m.next=12,Object(l_.put)(la(c));case 12:return m.abrupt("return",m.sent);case 13:return m.next=15,Object(l_.select)(Ps);case 15:return l=m.sent,u=l.api,m.next=19,Object(l_.call)(R_,u.stockVideos.load,{market:n,businessCategory:r,rootDomain:a,fixedResults:!1},md);case 19:return d=m.sent,p=d.data,f=(p=void 0===p?{}:p).result,m.next=25,Object(l_.call)(DS,f);case 25:case"end":return m.stop()}}),ok)}function zk(e){var t,n,r,a,o,i,s,c,l,u;return ad.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload.query,d.next=3,Object(l_.select)(js);case 3:if(n=d.sent,r=n.market,a=n.rootDomain,o=n.pageSize,r&&a){d.next=9;break}return d.abrupt("return");case 9:return d.next=11,Object(l_.select)(Ps);case 11:return i=d.sent,s=i.api,d.next=15,Object(l_.call)(R_,s.stockVideos.search,{market:r,rootDomain:a,query:t,pageSize:o},md);case 15:return c=d.sent,l=c.data,u=(l=void 0===l?{}:l).result,d.next=21,Object(l_.call)(DS,u);case 21:case"end":return d.stop()}}),ik)}function Hk(e){var t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.event,n=e.requestId,t.total){a.next=3;break}return a.abrupt("return");case 3:return r=Math.round(t.loaded/t.total*100)||1,a.next=6,Object(l_.put)(ea({requestId:n,uploadProgress:r}));case 6:case"end":return a.stop()}}),sk)}function Kk(e){var t,n,r;return ad.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.data,n=e.requestId,t[0].mediaType!==it){a.next=6;break}return r=pi(t[0].imageUrl),a.next=6,Object(l_.call)(Bc,{imageUrl:r});case 6:return a.next=8,Object(l_.put)(wk({newImages:t,requestId:n}));case 8:case"end":return a.stop()}}),ck)}function Wk(e){var t,n,r,a,o,i,s,c,u,d,f,m,h,g,v,b,y,O,E,_,I,S,w,T,k,C;return ad.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=e.rootDomain,n=e.containerId,r=e.requestId,a=e.file,o=e.numberOfImages,i=e.totalFileSize,s=e.enableLocalStorage,c=e.appName,u=e.basePath,d=e.metadata,f=e.i18nContent,x.next=3,Object(l_.call)(pg.channel);case 3:return m=x.sent,x.next=6,Object(l_.select)(Ps);case 6:return h=x.sent,g=h.api,v=h.localDataStore,x.next=11,Object(l_.takeEvery)(m,Hk);case 11:if(b={onUploadProgress:function(e){m.put({event:e,requestId:r})}},y=new C_.a,"ols"===c&&y.append("metadata",JSON.stringify({appName:c})),Object(P.isEmpty)(d)||y.append("mlMetadata",JSON.stringify({metadata:d})),O=a.name||"",y.append("file",a,O),E={rootDomain:t,containerId:n,data:y,requestId:r,opts:b,originalFilename:O,numberOfImages:o,totalFileSize:i,appName:c,basePath:u},I=!1,s){x.next=27;break}return x.next=22,Object(l_.call)(R_,g.images.upload,E,gd);case 22:S=x.sent,(_=S.data)||(I=!0),x.next=34;break;case 27:return x.next=29,Object(l_.call)(aI,g.images.upload.key,v.addUploadedImages,E);case 29:w=x.sent,T=w.data,k=w.error,_=T,k&&(I=!0);case 34:if(!I){x.next=38;break}return x.next=37,Object(l_.call)(sI,f,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_UPLOAD_FAILED",values:{filename:a.name}}));case 37:return x.abrupt("return");case 38:if((C=_[0]).originalFilename===a.name&&C.size===a.size){x.next=42;break}return x.next=42,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_INCORRECT_FILE_UPLOADED"}});case 42:return x.next=44,Object(l_.spawn)(Kk,{data:_,requestId:r});case 44:return x.next=46,m.put(pg.END);case 46:case"end":return x.stop()}}),lk)}function qk(e){var t,n,r,a,o,i,s,c,l;return ad.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.payload,n=t.placement,(r=t.selectedItems)&&0!==r.length){u.next=3;break}return u.abrupt("return");case 3:return u.next=5,Object(l_.select)(js);case 5:if(a=u.sent,(o=n||a.placement)&&[Pe,je,Fe].includes(o.toLowerCase())){u.next=9;break}return u.abrupt("return");case 9:i=nk(r),u.prev=10,i.s();case 12:if((s=i.n()).done){u.next=23;break}if(c=s.value,!(l=RT(c))){u.next=21;break}return l.references=(d=l.references,p=o.toLowerCase(),d?p?d.includes(p)?d:d.concat([p]):d:[p]),u.next=19,Object(l_.call)(Yk,{payload:{image:c,metadata:l}});case 19:return u.next=21,Object(l_.put)(Tk({image:c,metadata:l}));case 21:u.next=12;break;case 23:u.next=28;break;case 25:u.prev=25,u.t0=u.catch(10),i.e(u.t0);case 28:return u.prev=28,i.f(),u.finish(28);case 31:case"end":return u.stop()}var d,p}),uk,null,[[10,25,28,31]])}function Yk(e){var t,n,r,a,o,i,s,c,l,u;return ad.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.image,r=t.metadata,n.id){d.next=3;break}return d.abrupt("return");case 3:return d.next=5,Object(l_.select)(js);case 5:return a=d.sent,d.next=8,Object(l_.select)(Ps);case 8:if(o=d.sent,i=o.api,s=o.localDataStore,c=a.featureFlags,l=(c=void 0===c?{}:c).enableLocalStorage,u=tk(tk({},Fk(a)),{},{assetId:n.id,update:{metadata:Object(P.merge)(n.metadata,r)}}),!l){d.next=20;break}return d.next=18,Object(l_.call)(aI,i.images.update.key,s.updateUploadedImage,u);case 18:d.next=22;break;case 20:return d.next=22,Object(l_.call)(R_,i.images.update,u);case 22:case"end":return d.stop()}}),dk)}function Xk(e){var t,n,r,a,o,i,s,c,l,u,d;return ad.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,n=t.selectedItems,r=t.fromPostLogo,a=void 0!==r&&r,p.next=3,Object(l_.select)(js);case 3:if(o=p.sent,i=o.rootDomain,s=o.websiteId,c=o.placement,!o.featureFlags.enablePreInsert||"social"!==c.toLowerCase()||n[0].mediaType!==st||[FO,VO].includes(n[0].privacy.view)){p.next=15;break}return l=n[0].id,p.next=9,Object(l_.select)(Ps);case 9:return u=p.sent,d=u.api,p.next=13,Object(l_.call)(R_,d.videos.updatePrivacy,{rootDomain:i,websiteId:s,videoId:l});case 13:p.next=17;break;case 15:return p.next=17,Object(l_.put)({type:Lk,payload:{selectedItems:n,fromPostLogo:a}});case 17:case"end":return p.stop()}}),pk)}function Qk(e,t,n){var r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(r=n.uploads,a=r.validMimeTypesRegex,o=r.maxFileSizeMegabytes,i=new RegExp(a),t.type.match(i)){c.next=6;break}return c.next=5,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_ONLY_FILES",values:{filename:t.name}}));case 5:return c.abrupt("return",!1);case 6:if(s=1024*o*1024,!((t&&t.size||0)>s)){c.next=11;break}return c.next=10,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_TOO_LARGE",values:{filename:t.name,maxSizeInMb:o}}));case 10:return c.abrupt("return",!1);case 11:return c.abrupt("return",!0);case 12:case"end":return c.stop()}}),fk)}function $k(e,t){var n,r,a;return ad.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=t.payload,r=0;case 2:if(!(r<n.length)){o.next=9;break}return a=n[r],o.next=6,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_ONLY_FILES",values:{filename:a.name}}));case 6:r++,o.next=2;break;case 9:case"end":return o.stop()}}),mk)}function Zk(e,t){var n,r,a,o,i,s,c;return ad.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:n=t.totalFileSize,r=t.appName,a=t.basePath,o=t.metadata,i=t.i18nContent,s=0;case 2:if(!(s<e.length)){l.next=9;break}return c=e[s],l.next=6,Object(l_.fork)(Wk,tk(tk({},c),{},{totalFileSize:n,numberOfImages:e.length,appName:r,basePath:a,metadata:o,i18nContent:i}));case 6:s++,l.next=2;break;case 9:case"end":return l.stop()}}),hk)}function Jk(){var e,t,n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(l_.select)(js);case 2:return e=i.sent,t=e.uploads,n=(t=void 0===t?{}:t).timeLimit,r=t.percentageThreshold,i.next=8,Object(l_.delay)(n);case 8:return i.next=10,Object(l_.select)(oc);case 10:if(a=i.sent,!((o=a.uploadProgress)<r)){i.next=17;break}return i.next=15,Object(l_.put)(ao());case 15:return i.next=17,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_SLOW_UPLOAD_NOTIFICATION_OPEN",data:{uploadProgress:o}}});case 17:case"end":return i.stop()}}),gk)}function eC(e,t){var n,r,a,o,i,s,c,u,d,f,m,h,g,v,b,y,O,E,_,I,S,w,T,k,C;return ad.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return n=t.payload,x.next=3,Object(l_.select)(js);case 3:return r=x.sent,x.next=6,Object(l_.select)(Fs);case 6:return a=x.sent,o=a.selectedCollection,i=r.uploads,s=i.maxFileCount,c=i.maxFileCountDify,x.next=11,Object(l_.select)(Fl);case 11:if(u=x.sent,d=u.isDifyAgent,f=d?c:s,!(n.length>f)){x.next=18;break}return x.next=17,Object(l_.call)(sI,e,l.a.createElement(p.FormattedMessage,{id:"UPLOAD_FAILED"}),l.a.createElement(p.FormattedMessage,{id:"UPLOAD_ERROR_MAX_FILES",values:{maxFilesCount:f}}));case 17:return x.abrupt("return");case 18:if(m=r.featureFlags.enableLocalStorage,Vk(r)){x.next=21;break}return x.abrupt("return");case 21:return h={},g=[],x.next=25,Object(l_.select)(Ms);case 25:v=x.sent,b=v.appName,y=v.placement,O="ols"===b?ht:mt,_={},(E="LOGO"===y||o===tt?[Pe]:null)&&(_.references=E),I=0;case 33:if(!(I<n.length)){x.next=42;break}return S=n[I],x.next=37,Object(l_.call)(Qk,e,S,r);case 37:x.sent&&(w=D.a.v4(),h[w]={filename:S.name,uploadProgress:0},g.push(tk(tk({},Fk(r)),{},{requestId:w,file:S,enableLocalStorage:m})));case 39:I++,x.next=33;break;case 42:if(!Object.keys(h).length){x.next=45;break}return x.next=45,Object(l_.put)(Rr(h));case 45:if(!g.length){x.next=59;break}return x.next=48,Object(l_.fork)(Jk);case 48:return T=x.sent,k=g.reduce((function(e,t){var n=t.file;return e+=n&&n.size||0}),0),C=D.a.v4(),x.next=53,Object(l_.put)(Ma(Sl,{beaconId:C}));case 53:return x.next=55,Object(l_.call)(Zk,g,{totalFileSize:k,appName:b,basePath:O,metadata:_,i18nContent:e});case 55:return x.next=57,Object(l_.cancel)(T);case 57:return x.next=59,Object(l_.put)(La(Sl,{beaconId:C,totalSize:k,fileCount:g.length}));case 59:case"end":return x.stop()}}),vk)}function tC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,h.next=3,Object(l_.select)(js);case 3:if(n=h.sent,r=n.featureFlags.enableLocalStorage,a=n.urls.assetBaseDataUrl,Vk(n)){h.next=7;break}return h.abrupt("return");case 7:return h.next=9,Object(l_.select)(Ms);case 9:return o=h.sent,i=o.appName,s=t.filter((function(e){return e.mediaType!==st})),c=t.filter((function(e){return e.mediaType===st})),l=Fk(n),h.next=16,Object(l_.select)(Ps);case 16:if(u=h.sent,d=u.api,p=u.localDataStore,!(c.length>0)){h.next=22;break}return h.next=22,Object(l_.all)(c.map((function(e){return Object(l_.put)(ra(e.id))})));case 22:if(!(s.length>0)){h.next=31;break}if(f=s.reduce((function(e,t){var n=t.dataUrl,r=t.filename,o=LE(n,a);return e[o]||(e[o]={imageFileNames:[],docs:[]}),e[o].imageFileNames.push(r),e[o].docs.push(t),e}),{}),m=Object.keys(f),r){h.next=29;break}return h.next=28,Object(l_.all)(m.map((function(e){var t=f[e],n=t.imageFileNames,r=t.docs;return Object(l_.call)(R_,d.images.delete,tk(tk({},l),{},{extractedAssetContainerId:e,images:n,appName:i}),(function(e){return tk(tk({},e),{},{docs:r})}))})));case 28:return h.abrupt("return");case 29:return h.next=31,Object(l_.all)(m.map((function(e){var t=f[e],n=t.imageFileNames,r=t.docs;return Object(l_.call)(aI,d.images.delete.key,p.deleteUploadedImages,tk(tk({},l),{},{extractedAssetContainerId:e,images:n,docs:r,appName:i}))})));case 31:case"end":return h.stop()}}),bk)}function nC(e){var t,n,r,a,o,i,s;return ad.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.rootDomain,c.next=3,Object(l_.select)(js);case 3:if(n=c.sent,r=n.hivemind,(r=void 0===r?{}:r).cohorts){c.next=18;break}return c.next=10,Object(l_.select)(Ms);case 10:return a=c.sent,o=a.placement,c.next=14,Object(l_.select)(Ps);case 14:return i=c.sent,s=i.api,c.next=18,Object(l_.call)(R_,s.experiments.load,tk({rootDomain:t},o&&{placement:o}));case 18:case"end":return c.stop()}}),yk)}function rC(){var e,t,n,r,a,o,i=arguments;return ad.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=e.selectedCollection,n=void 0===t?Qe:t,s.next=3,Object(l_.select)(Dt);case 3:if(r=s.sent,1!==(a=r.activeCollections).length){s.next=10;break}return s.next=8,Object(l_.put)(io(a[0]));case 8:s.next=13;break;case 10:return o=a.includes(n)?n:Qe,s.next=13,Object(l_.put)(io(o));case 13:case"end":return s.stop()}}),Ok)}function aC(e,t){var n,r,a,o,i,s,c,l,u,d,p,f,m,h,g,v,b,y,O,E;return ad.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return n=e.getState,r=e.dispatch,a=t.payload,o=a.rootDomain,i=a.market,s=a.businessCategory,c=a.showStockVideos,_.next=4,Object(l_.select)(js);case 4:return l=_.sent,_.next=7,Object(l_.select)(Ps);case 7:if(u=_.sent,d=u.api,p=l.renderMode,f=l.inWebsiteContext,m=l.featureFlags,h=m.enableVimeo,g=m.enableHivemind,v=l.mediaTypes,b=l.websiteId,!g){_.next=13;break}return _.next=13,Object(l_.spawn)(nC,{payload:{rootDomain:o}});case 13:if(!(y=v.includes(st)&&h)){_.next=17;break}return _.next=17,Object(l_.spawn)(sS);case 17:if(!v.includes(st)||p===Qi||!c){_.next=20;break}return _.next=20,Object(l_.spawn)(Gk,{payload:{market:i,businessCategory:s,rootDomain:o}});case 20:if(!(!St(v,st)&&!St(v,dt))){_.next=32;break}if(!f||p!==Qi){_.next=25;break}return _.next=25,Object(l_.spawn)(R_,d.vnext.getSharedWidgets,{rootDomain:o,websiteId:b});case 25:return _.next=27,Object(l_.select)(Ls);case 27:if(O=_.sent,E=O.uploaded,!Object(P.isEmpty)(E)){_.next=32;break}return _.next=32,Object(l_.call)(JT,{getState:n,dispatch:r});case 32:if(!y){_.next=37;break}return _.next=35,Object(l_.call)(Q_,{payload:{eventName:"IM_TRACK_VIDEO_START"}});case 35:_.next=40;break;case 37:if(St(v,dt)){_.next=40;break}return _.next=40,Object(l_.call)($_);case 40:case"end":return _.stop()}}),Ek)}function oC(e){var t,n,r,a,o,i,s,c,l,u,d,p,f,m;return ad.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).pageId,r=void 0===n?1:n,h.next=5,Object(l_.select)(js);case 5:return a=h.sent,o=a.pageSize,h.next=9,Object(l_.select)(Zs);case 9:return i=h.sent,s=i.uploadedAssets,h.next=13,Object(l_.select)(Qs);case 13:return c=h.sent,l=c.uploadedVideos,u=c.totalVideosInAccount,h.next=18,Object(l_.select)(Bs);case 18:if(d=h.sent,p=d.uploadedImages,f=s.slice(0,o*r).reduce((function(e,t){return t.mediaType===st?e.videoCount++:e.imageCount++,e}),{videoCount:0,imageCount:0}),!(l.length<u&&l.length-f.videoCount<o)){h.next=25;break}return h.next=25,Object(l_.put)(co());case 25:return m=p.slice(f.imageCount,o+f.imageCount),h.next=28,Object(l_.put)(Ha(m));case 28:case"end":return h.stop()}}),_k)}function iC(e){var t,n,r,a,o,i,s,c,l,u,d=arguments;return ad.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:{},n=t.payload,r=n.videos,a=void 0===r?[]:r,o=n.images,i=void 0===o?[]:o,p.next=4,Object(l_.select)(js);case 4:return s=p.sent,c=s.mediaTypes,p.next=8,Object(l_.put)(Fr());case 8:return p.next=10,Object(l_.put)(qr());case 10:if(!a.length||!wt(c)){p.next=23;break}return p.next=13,Object(l_.select)(qs);case 13:if(l=p.sent,u=Lm({files:a,vimeoUser:l,totalVideosInAccount:l.totalVideosInAccount}),u===vc){p.next=23;break}if(!i||!i.length){p.next=20;break}return p.next=20,Object(l_.call)(eC,e,{payload:i});case 20:return p.next=22,Object(l_.put)(Qr({modalType:u}));case 22:return p.abrupt("return");case 23:if(!i.length){p.next=26;break}return p.next=26,Object(l_.put)(Nr(i));case 26:if(!a.length){p.next=29;break}return p.next=29,Object(l_.put)(Br(a));case 29:case"end":return p.stop()}}),Ik)}function sC(e,t){var n,r,a,o;return ad.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.getState,r=t.dispatch,a=e.i18nContent,o=e.postLog,i.next=4,Object(l_.takeEvery)(kk,rC,e);case 4:return i.next=6,Object(l_.takeEvery)(kk,aC,{getState:n,dispatch:r});case 6:return i.next=8,Object(l_.takeLatest)(Ck,zk);case 8:return i.next=10,Object(l_.takeLatest)(xk,Bk);case 10:return i.next=12,Object(l_.takeEvery)(Ak,eC,a);case 12:return i.next=14,Object(l_.takeEvery)(Dk,JT,{getState:n,dispatch:r});case 14:return i.next=16,Object(l_.takeEvery)(Pk,tC);case 16:return i.next=18,Object(l_.takeEvery)(Lk,qk);case 18:return i.next=20,Object(l_.takeEvery)(Rk,Xk);case 20:return i.next=22,Object(l_.takeEvery)(Mk,Yk);case 22:return i.next=24,Object(l_.takeEvery)(Nk,$k,a);case 24:return i.next=26,Object(l_.takeEvery)(Uk,oC);case 26:return i.next=28,Object(l_.takeEvery)(jk,iC,a);case 28:return i.next=30,Object(l_.spawn)(AT);case 30:return i.next=32,Object(l_.spawn)(eI,e);case 32:return i.next=34,Object(l_.spawn)(JS,a);case 34:return i.next=36,Object(l_.spawn)(_w);case 36:return i.next=38,Object(l_.spawn)(IT,a);case 38:return i.next=40,Object(l_.spawn)(kw);case 40:return i.next=42,Object(l_.spawn)(Mw);case 42:return i.next=44,Object(l_.spawn)(rT,e);case 44:return i.next=46,Object(l_.spawn)(PS);case 46:return i.next=48,Object(l_.spawn)(gT,{postLog:o});case 48:return i.next=50,Object(l_.spawn)(Ww);case 50:return i.next=52,Object(l_.spawn)(ES,a);case 52:return i.next=54,Object(l_.spawn)(sT);case 54:return i.next=56,Object(l_.spawn)(h_,{getState:n,dispatch:r});case 56:return i.next=58,Object(l_.spawn)(LT);case 58:return i.next=60,Object(l_.spawn)(XT,e);case 60:case"end":return i.stop()}}),Sk)}var cC,lC=Mt.IM_INSERT_ITEMS,uC=Mt.IM_MODAL_HIDE,dC=Mt.IM_API_STATUS_CHANGE,pC=Mt.IM_IMAGES_UPLOAD,fC=Mt.IM_COLLECTION_VIEW_SET_CURRENT,mC=Mt.IM_FILES_DELETE,hC=hg.VENTURE_IMAGES_LOAD,gC=hg.GC_SITE_IMAGES_LOAD,vC=function(e){return function(t){return function(n){var r=e.getState().ImageManager,a=tu({ImageManager:r}),o=r.appOptions,i=o.appName,s=o.appNameSubdomainMappings,c=r.config,l=c.rootDomain,u=c.enableTagBuilder,d=c.callbacks,p=d.onItemsSelected,f=d.onModalClose,m=d.onImagesUpload,h=d.onApiAuthError,g=d.onCollectionViewChange,v=d.onFilesDelete;switch(n.type){case lC:if(Object(P.isFunction)(p)){var b=n.payload,y=b.selectedItems,O=b.fromPostLogo;p(y.map((function(e){return u&&e.mediaType===st?new pl(e):e.sourceType===Re?(e.imageUrl=BO(e.thumbnails,e.height,e.width).link,e.videoUrl=e.link,Object(P.pick)(e,["altText","filename","imageUrl","videoUrl","mediaType","id","urlHash","width","height"])):e.mediaType===dt?Object(P.pick)(e,["productName","url","images","price","description","descriptionRaw","salePrice"]):Object(P.pick)(e,["altText","filename","imageUrl","videoUrl","mediaType","contentType","size","dimensions","thumbnailUrl"])}))),a&&O||e.dispatch(sa())}break;case uC:Object(P.isFunction)(f)&&f();break;case dC:var E=n.payload,_=E.key,I=E.status,S=E.payload,w=S&&401===S.status;if(!w||_.startsWith("SSO")||I!==mg.FAIL)break;if(w&&[gC,hC].includes(_))break;if(Object(P.isFunction)(h))h();else{var T=encodeURIComponent(window.location.pathname),k=s[i];window.location.href="https://sso.".concat(l,"/?app=").concat(k,"&path=").concat(T)}break;case pC:Object(P.isFunction)(m)&&m(n.payload);break;case mC:Object(P.isFunction)(v)&&v(n.payload);break;case fC:Object(P.isFunction)(g)&&g(n.payload)}t(n)}}};function bC(e){if(cC)return cC;var t=fg()({onError:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.sagaStack,a={level:rs,message:"saga error: ".concat(t.message),error:t,props:e};r&&(a.meta={sagaStack:r}),Vu(a)}}),n=Object(dg.combineReducers)(h()({},"ImageManager",T_.ImageManager));return cC=Object(dg.createStore)(n,Object(dg.applyMiddleware)(t,vC)),t.run(sC,e,cC),cC}function yC(e){var t=Object(c.useState)(e.modalType),n=s()(t,2),r=n[0],a=n[1],i=Object(c.useCallback)((function(){a("MEDIA_MANAGER")}),[a]),u="VIDEO_CTA"===r?ug:tg;return l.a.createElement(p.IntlProvider,e.i18nContent,l.a.createElement(f.Provider,{store:bC(e)},l.a.createElement(u,o()({},e,{id:"im-root",onOpenMediaManager:i}))))}yC.propTypes={modalType:d.a.oneOf(["MEDIA_MANAGER","VIDEO_CTA"])},yC.defaultProps={modalType:"MEDIA_MANAGER"};var OC=yC,EC=Mt.IM_SOCIAL_ACCESS_TOKEN_GET,_C="\n    <script>\n      try {\n        if(window.opener) {\n          window.opener.postMessage('".concat(EC,"', window.location.origin);\n        }\n        window.close();\n      }\n       catch(e) {}\n    <\/script>\n")},function(e,t,n){"use strict";function r(e){return e.split("-")[0]}function a(e){return e.split("-")[1]}function o(e){return["top","bottom"].includes(r(e))?"x":"y"}function i(e){return"y"===e?"height":"width"}function s(e,t,n){let{reference:s,floating:c}=e;const l=s.x+s.width/2-c.width/2,u=s.y+s.height/2-c.height/2,d=o(t),p=i(d),f=s[p]/2-c[p]/2,m="x"===d;let h;switch(r(t)){case"top":h={x:l,y:s.y-c.height};break;case"bottom":h={x:l,y:s.y+s.height};break;case"right":h={x:s.x+s.width,y:u};break;case"left":h={x:s.x-c.width,y:u};break;default:h={x:s.x,y:s.y}}switch(a(t)){case"start":h[d]-=f*(n&&m?-1:1);break;case"end":h[d]+=f*(n&&m?-1:1)}return h}n.r(t),n.d(t,"autoPlacement",(function(){return _})),n.d(t,"detectOverflow",(function(){return u})),n.d(t,"flip",(function(){return I})),n.d(t,"hide",(function(){return T})),n.d(t,"inline",(function(){return P})),n.d(t,"limitShift",(function(){return A})),n.d(t,"offset",(function(){return k})),n.d(t,"shift",(function(){return x})),n.d(t,"size",(function(){return D})),n.d(t,"autoUpdate",(function(){return ce})),n.d(t,"computePosition",(function(){return le})),n.d(t,"getOverflowAncestors",(function(){return ae})),n.d(t,"platform",(function(){return se})),n.d(t,"arrow",(function(){return he})),n.d(t,"useFloating",(function(){return me}));function c(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function l(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function u(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:o,rects:i,elements:s,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:m=!1,padding:h=0}=t,g=c(h),v=s[m?"floating"===f?"reference":"floating":f],b=l(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(v)))||n?v:v.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:d,rootBoundary:p,strategy:u})),y=l(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===f?{...i.floating,x:r,y:a}:i.reference,offsetParent:await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),strategy:u}):i[f]);return{top:b.top-y.top+g.top,bottom:y.bottom-b.bottom+g.bottom,left:b.left-y.left+g.left,right:y.right-b.right+g.right}}const d=Math.min,p=Math.max;function f(e,t,n){return p(e,d(t,n))}const m=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=null!=e?e:{},{x:s,y:l,placement:u,rects:d,platform:p}=t;if(null==n)return{};const m=c(r),h={x:s,y:l},g=o(u),v=a(u),b=i(g),y=await p.getDimensions(n),O="y"===g?"top":"left",E="y"===g?"bottom":"right",_=d.reference[b]+d.reference[g]-h[g]-d.floating[b],I=h[g]-d.reference[g],S=await(null==p.getOffsetParent?void 0:p.getOffsetParent(n));let w=S?"y"===g?S.clientHeight||0:S.clientWidth||0:0;0===w&&(w=d.floating[b]);const T=_/2-I/2,k=m[O],C=w-y[b]-m[E],x=w/2-y[b]/2+T,A=f(k,x,C),D=("start"===v?m[O]:m[E])>0&&x!==A&&d.reference[b]<=d.floating[b];return{[g]:h[g]-(D?x<k?k-x:C-x:0),data:{[g]:A,centerOffset:x-A}}}}),h={left:"right",right:"left",bottom:"top",top:"bottom"};function g(e){return e.replace(/left|right|bottom|top/g,e=>h[e])}function v(e,t,n){void 0===n&&(n=!1);const r=a(e),s=o(e),c=i(s);let l="x"===s?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[c]>t.floating[c]&&(l=g(l)),{main:l,cross:g(l)}}const b={start:"end",end:"start"};function y(e){return e.replace(/start|end/g,e=>b[e])}const O=["top","right","bottom","left"],E=O.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const _=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,i,s,c;const{x:l,y:d,rects:p,middlewareData:f,placement:m,platform:h,elements:g}=t,{alignment:b=null,allowedPlacements:O=E,autoAlignment:_=!0,...I}=e,S=function(e,t,n){return(e?[...n.filter(t=>a(t)===e),...n.filter(t=>a(t)!==e)]:n.filter(e=>r(e)===e)).filter(n=>!e||(a(n)===e||!!t&&y(n)!==n))}(b,_,O),w=await u(t,I),T=null!=(n=null==(o=f.autoPlacement)?void 0:o.index)?n:0,k=S[T];if(null==k)return{};const{main:C,cross:x}=v(k,p,await(null==h.isRTL?void 0:h.isRTL(g.floating)));if(m!==k)return{x:l,y:d,reset:{placement:S[0]}};const A=[w[r(k)],w[C],w[x]],D=[...null!=(i=null==(s=f.autoPlacement)?void 0:s.overflows)?i:[],{placement:k,overflows:A}],P=S[T+1];if(P)return{data:{index:T+1,overflows:D},reset:{placement:P}};const j=D.slice().sort((e,t)=>e.overflows[0]-t.overflows[0]),M=null==(c=j.find(e=>{let{overflows:t}=e;return t.every(e=>e<=0)}))?void 0:c.placement,L=null!=M?M:j[0].placement;return L!==m?{data:{index:T+1,overflows:D},reset:{placement:L}}:{}}}};const I=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:a,middlewareData:o,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",flipAlignment:h=!0,...b}=e,O=r(a),E=[s,...f||(O===s||!h?[g(s)]:function(e){const t=g(e);return[y(e),t,y(t)]}(s))],_=await u(t,b),I=[];let S=(null==(n=o.flip)?void 0:n.overflows)||[];if(d&&I.push(_[O]),p){const{main:e,cross:t}=v(a,i,await(null==c.isRTL?void 0:c.isRTL(l.floating)));I.push(_[e],_[t])}if(S=[...S,{placement:a,overflows:I}],!I.every(e=>e<=0)){var w,T;const e=(null!=(w=null==(T=o.flip)?void 0:T.index)?w:0)+1,t=E[e];if(t)return{data:{index:e,overflows:S},reset:{placement:t}};let n="bottom";switch(m){case"bestFit":{var k;const e=null==(k=S.map(e=>[e,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:k[0].placement;e&&(n=e);break}case"initialPlacement":n=s}if(a!==n)return{reset:{placement:n}}}return{}}}};function S(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function w(e){return O.some(t=>e[t]>=0)}const T=function(e){let{strategy:t="referenceHidden",...n}=void 0===e?{}:e;return{name:"hide",async fn(e){const{rects:r}=e;switch(t){case"referenceHidden":{const t=S(await u(e,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:w(t)}}}case"escaped":{const t=S(await u(e,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:t,escaped:w(t)}}}default:return{}}}}};const k=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:i}=t,s=await async function(e,t){const{placement:n,platform:i,elements:s}=e,c=await(null==i.isRTL?void 0:i.isRTL(s.floating)),l=r(n),u=a(n),d="x"===o(n),p=["left","top"].includes(l)?-1:1,f=c&&d?-1:1,m="function"==typeof t?t(e):t;let{mainAxis:h,crossAxis:g,alignmentAxis:v}="number"==typeof m?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return u&&"number"==typeof v&&(g="end"===u?-1*v:v),d?{x:g*f,y:h*p}:{x:h*p,y:g*f}}(t,e);return{x:n+s.x,y:i+s.y,data:s}}}};function C(e){return"x"===e?"y":"x"}const x=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:a,placement:i}=t,{mainAxis:s=!0,crossAxis:c=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...d}=e,p={x:n,y:a},m=await u(t,d),h=o(r(i)),g=C(h);let v=p[h],b=p[g];if(s){const e="y"===h?"bottom":"right";v=f(v+m["y"===h?"top":"left"],v,v-m[e])}if(c){const e="y"===g?"bottom":"right";b=f(b+m["y"===g?"top":"left"],b,b-m[e])}const y=l.fn({...t,[h]:v,[g]:b});return{...y,data:{x:y.x-n,y:y.y-a}}}}},A=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:a,placement:i,rects:s,middlewareData:c}=t,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=e,p={x:n,y:a},f=o(i),m=C(f);let h=p[f],g=p[m];const v="function"==typeof l?l(t):l,b="number"==typeof v?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const e="y"===f?"height":"width",t=s.reference[f]-s.floating[e]+b.mainAxis,n=s.reference[f]+s.reference[e]-b.mainAxis;h<t?h=t:h>n&&(h=n)}if(d){var y,O,E,_;const e="y"===f?"width":"height",t=["top","left"].includes(r(i)),n=s.reference[m]-s.floating[e]+(t&&null!=(y=null==(O=c.offset)?void 0:O[m])?y:0)+(t?0:b.crossAxis),a=s.reference[m]+s.reference[e]+(t?0:null!=(E=null==(_=c.offset)?void 0:_[m])?E:0)-(t?b.crossAxis:0);g<n?g=n:g>a&&(g=a)}return{[f]:h,[m]:g}}}},D=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:s}=t,{apply:c=(()=>{}),...l}=e,d=await u(t,l),f=r(n),m=a(n);let h,g;"top"===f||"bottom"===f?(h=f,g=m===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=f,h="end"===m?"top":"bottom");const v=p(d.left,0),b=p(d.right,0),y=p(d.top,0),O=p(d.bottom,0),E={availableHeight:o.floating.height-(["left","right"].includes(n)?2*(0!==y||0!==O?y+O:p(d.top,d.bottom)):d[h]),availableWidth:o.floating.width-(["top","bottom"].includes(n)?2*(0!==v||0!==b?v+b:p(d.left,d.right)):d[g])};await c({...t,...E});const _=await i.getDimensions(s.floating);return o.floating.width!==_.width||o.floating.height!==_.height?{reset:{rects:!0}}:{}}}},P=function(e){return void 0===e&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:a,elements:i,rects:s,platform:u,strategy:f}=t,{padding:m=2,x:h,y:g}=e,v=l(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(null==u.getOffsetParent?void 0:u.getOffsetParent(i.floating)),strategy:f}):s.reference),b=null!=(n=await(null==u.getClientRects?void 0:u.getClientRects(i.reference)))?n:[],y=c(m);const O=await u.getElementRects({reference:{getBoundingClientRect:function(){var e;if(2===b.length&&b[0].left>b[1].right&&null!=h&&null!=g)return null!=(e=b.find(e=>h>e.left-y.left&&h<e.right+y.right&&g>e.top-y.top&&g<e.bottom+y.bottom))?e:v;if(b.length>=2){if("x"===o(a)){const e=b[0],t=b[b.length-1],n="top"===r(a),o=e.top,i=t.bottom,s=n?e.left:t.left,c=n?e.right:t.right;return{top:o,bottom:i,left:s,right:c,width:c-s,height:i-o,x:s,y:o}}const e="left"===r(a),t=p(...b.map(e=>e.right)),n=d(...b.map(e=>e.left)),i=b.filter(r=>e?r.left===n:r.right===t),s=i[0].top,c=i[i.length-1].bottom;return{top:s,bottom:c,left:n,right:t,width:t-n,height:c-s,x:n,y:s}}return v}},floating:i.floating,strategy:f});return s.reference.x!==O.reference.x||s.reference.y!==O.reference.y||s.reference.width!==O.reference.width||s.reference.height!==O.reference.height?{reset:{rects:O}}:{}}}};function j(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function M(e){if(null==e)return window;if(!j(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function L(e){return M(e).getComputedStyle(e)}function R(e){return j(e)?"":e?(e.nodeName||"").toLowerCase():""}function N(){const e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function U(e){return e instanceof M(e).HTMLElement}function F(e){return e instanceof M(e).Element}function V(e){if("undefined"==typeof ShadowRoot)return!1;return e instanceof M(e).ShadowRoot||e instanceof ShadowRoot}function B(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=L(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(a)}function G(e){return["table","td","th"].includes(R(e))}function z(e){const t=/firefox/i.test(N()),n=L(e);return"none"!==n.transform||"none"!==n.perspective||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some(e=>n.willChange.includes(e))||["paint","layout","strict","content"].some(e=>{const t=n.contain;return null!=t&&t.includes(e)})}function H(){return!/^((?!chrome|android).)*safari/i.test(N())}function K(e){return["html","body","#document"].includes(R(e))}const W=Math.min,q=Math.max,Y=Math.round;function X(e,t,n){var r,a,o,i;void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect();let c=1,l=1;t&&U(e)&&(c=e.offsetWidth>0&&Y(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&Y(s.height)/e.offsetHeight||1);const u=F(e)?M(e):window,d=!H()&&n,p=(s.left+(d&&null!=(r=null==(a=u.visualViewport)?void 0:a.offsetLeft)?r:0))/c,f=(s.top+(d&&null!=(o=null==(i=u.visualViewport)?void 0:i.offsetTop)?o:0))/l,m=s.width/c,h=s.height/l;return{width:m,height:h,top:f,right:p+m,bottom:f+h,left:p,x:p,y:f}}function Q(e){return(t=e,(t instanceof M(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function $(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Z(e){return X(Q(e)).left+$(e).scrollLeft}function J(e,t,n){const r=U(t),a=Q(t),o=X(e,r&&function(e){const t=X(e);return Y(t.width)!==e.offsetWidth||Y(t.height)!==e.offsetHeight}(t),"fixed"===n);let i={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==R(t)||B(a))&&(i=$(t)),U(t)){const e=X(t,!0);s.x=e.x+t.clientLeft,s.y=e.y+t.clientTop}else a&&(s.x=Z(a));return{x:o.left+i.scrollLeft-s.x,y:o.top+i.scrollTop-s.y,width:o.width,height:o.height}}function ee(e){return"html"===R(e)?e:e.assignedSlot||e.parentNode||(V(e)?e.host:null)||Q(e)}function te(e){return U(e)&&"fixed"!==L(e).position?e.offsetParent:null}function ne(e){const t=M(e);let n=te(e);for(;n&&G(n)&&"static"===L(n).position;)n=te(n);return n&&("html"===R(n)||"body"===R(n)&&"static"===L(n).position&&!z(n))?t:n||function(e){let t=ee(e);for(V(t)&&(t=t.host);U(t)&&!K(t);){if(z(t))return t;{const e=t.parentNode;t=V(e)?e.host:e}}return null}(e)||t}function re(e){if(U(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=X(e);return{width:t.width,height:t.height}}function ae(e,t){var n;void 0===t&&(t=[]);const r=function e(t){const n=ee(t);return K(n)?t.ownerDocument.body:U(n)&&B(n)?n:e(n)}(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),o=M(r),i=a?[o].concat(o.visualViewport||[],B(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(ae(i))}function oe(e,t,n){return"viewport"===t?l(function(e,t){const n=M(e),r=Q(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,s=0,c=0;if(a){o=a.width,i=a.height;const e=H();(e||!e&&"fixed"===t)&&(s=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:s,y:c}}(e,n)):F(t)?function(e,t){const n=X(e,!1,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft;return{top:r,left:a,x:a,y:r,right:a+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):l(function(e){var t;const n=Q(e),r=$(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=q(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=q(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let s=-r.scrollLeft+Z(e);const c=-r.scrollTop;return"rtl"===L(a||n).direction&&(s+=q(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:c}}(Q(e)))}function ie(e){const t=ae(e),n=function(e,t){let n=e;for(;n&&!K(n)&&!t.includes(n)&&(!F(n)||!["absolute","fixed"].includes(L(n).position));){const e=ee(n);n=V(e)?e.host:e}return n}(e,t);let r=null;if(n&&U(n)){const e=ne(n);B(n)?r=n:U(e)&&(r=e)}return F(r)?t.filter(e=>r&&F(e)&&function(e,t){const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&V(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(e,r)&&"body"!==R(e)):[]}const se={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[..."clippingAncestors"===n?ie(t):[].concat(n),r],i=o[0],s=o.reduce((e,n)=>{const r=oe(t,n,a);return e.top=q(r.top,e.top),e.right=W(r.right,e.right),e.bottom=W(r.bottom,e.bottom),e.left=q(r.left,e.left),e},oe(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const a=U(n),o=Q(n);if(n===o)return t;let i={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((a||!a&&"fixed"!==r)&&(("body"!==R(n)||B(o))&&(i=$(n)),U(n))){const e=X(n,!0);s.x=e.x+n.clientLeft,s.y=e.y+n.clientTop}return{...t,x:t.x-i.scrollLeft+s.x,y:t.y-i.scrollTop+s.y}},isElement:F,getDimensions:re,getOffsetParent:ne,getDocumentElement:Q,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:J(t,ne(n),r),floating:{...re(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===L(e).direction};function ce(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=!0,animationFrame:s=!1}=r,c=a&&!s,l=c||o?[...F(e)?ae(e):e.contextElement?ae(e.contextElement):[],...ae(t)]:[];l.forEach(e=>{c&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});let u,d=null;if(i){let r=!0;d=new ResizeObserver(()=>{r||n(),r=!1}),F(e)&&!s&&d.observe(e),F(e)||!e.contextElement||s||d.observe(e.contextElement),d.observe(t)}let p=s?X(e):null;return s&&function t(){const r=X(e);!p||r.x===p.x&&r.y===p.y&&r.width===p.width&&r.height===p.height||n();p=r,u=requestAnimationFrame(t)}(),n(),()=>{var e;l.forEach(e=>{c&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==(e=d)||e.disconnect(),d=null,s&&cancelAnimationFrame(u)}}const le=(e,t,n)=>(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,c=await(null==i.isRTL?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:d}=s(l,r,c),p=r,f={},m=0;for(let n=0;n<o.length;n++){const{name:h,fn:g}=o[n],{x:v,y:b,data:y,reset:O}=await g({x:u,y:d,initialPlacement:r,placement:p,strategy:a,middlewareData:f,rects:l,platform:i,elements:{reference:e,floating:t}});u=null!=v?v:u,d=null!=b?b:d,f={...f,[h]:{...f[h],...y}},O&&m<=50&&(m++,"object"==typeof O&&(O.placement&&(p=O.placement),O.rects&&(l=!0===O.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):O.rects),({x:u,y:d}=s(l,p,c))),n=-1)}return{x:u,y:d,placement:p,strategy:a,middlewareData:f}})(e,t,{platform:se,...n});var ue=n(0),de=n(58),pe="undefined"!=typeof document?ue.useLayoutEffect:ue.useEffect;function fe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!fe(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!=r--;){const n=a[r];if(("_owner"!==n||!e.$$typeof)&&!fe(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function me(e){let{middleware:t,placement:n="bottom",strategy:r="absolute",whileElementsMounted:a}=void 0===e?{}:e;const[o,i]=ue.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[s,c]=ue.useState(t);fe(null==s?void 0:s.map(e=>{let{name:t,options:n}=e;return{name:t,options:n}}),null==t?void 0:t.map(e=>{let{name:t,options:n}=e;return{name:t,options:n}}))||c(t);const l=ue.useRef(null),u=ue.useRef(null),d=ue.useRef(null),p=ue.useRef(o),f=function(e){const t=ue.useRef(e);return pe(()=>{t.current=e}),t}(a),m=ue.useCallback(()=>{l.current&&u.current&&le(l.current,u.current,{middleware:s,placement:n,strategy:r}).then(e=>{h.current&&!fe(p.current,e)&&(p.current=e,de.flushSync(()=>{i(e)}))})},[s,n,r]);pe(()=>{h.current&&m()},[m]);const h=ue.useRef(!1);pe(()=>(h.current=!0,()=>{h.current=!1}),[]);const g=ue.useCallback(()=>{if("function"==typeof d.current&&(d.current(),d.current=null),l.current&&u.current)if(f.current){const e=f.current(l.current,u.current,m);d.current=e}else m()},[m,f]),v=ue.useCallback(e=>{l.current=e,g()},[g]),b=ue.useCallback(e=>{u.current=e,g()},[g]),y=ue.useMemo(()=>({reference:l,floating:u}),[]);return ue.useMemo(()=>({...o,update:m,refs:y,reference:v,floating:b}),[o,m,y,v,b])}const he=e=>{const{element:t,padding:n}=e;return{name:"arrow",options:e,fn(e){return r=t,Object.prototype.hasOwnProperty.call(r,"current")?null!=t.current?m({element:t.current,padding:n}).fn(e):{}:t?m({element:t,padding:n}).fn(e):{};var r}}}}])}));